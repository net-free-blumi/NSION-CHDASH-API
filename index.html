<!DOCTYPE html>
<html dir="rtl" lang="he-il">
  <head>
    
    <link class="icon" rel="icon" href="לוגו גולדיס רגיל.png" type="icon" alt="icon">
    <title>ניהול הזמנות ג אונליין</title>
    <script src="script.js"></script>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="script.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


    <meta name="google-site-verification" content="dUgCkLcDLymDM3mSiVs6eFf6bx8KvC9XIbzJrhuDITI" />

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBQVSDD37S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZBQVSDD37S');
</script>


    <style>



body {
            font-family: 'Rubik', sans-serif;
            display: flex;
            /* flex-direction: column; */
            min-height: 90vh;
            background-color: #f4f4f4;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin: 0;
            background-image: url("Black-logo.jpg");
            background-size: cover;
            background-attachment: fixed;
            padding: 10px; /* מרווח כדי למנוע חיתוך במסכים קטנים */
            text-align: right;
        color: #333;
        align-items: flex-start; 
        min-height: 100vh; 

        }

      .container {
        max-width: 650px; /* גודל מקסימלי לקונטיינר */
        width: 100%; /* גמישות מלאה */
        padding: 20px; /* ריווח פנימי */
        background-color: white;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); /* צל קטן ליותר עומק */
        border-radius: 10px; /* פינות מעוגלות */
      }
      h1 {
        background-color: #343a40;
        color: #fff;
        padding: 10px;
        border-radius: 5px;
        text-align: center;
      }



      #notesSummary{
font-weight: bold;
font-size: large;
padding: 10px;

      }
      label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
      }

      input[type="text"],
      input[type="date"],
      input[type="time"],
      input[type="number"] {
        width: 100%;
        padding: 12px; /* הגדלנו את הגודל */
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px; /* רדיוס פינות גדול יותר */
        font-size: 16px; /* גודל טקסט גדול יותר */
        box-sizing: border-box;
      }

      button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 12px 24px; /* שינינו את הריווח */
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 18px; /* גודל כפתורים גדול יותר */
        margin: 5px 2px;
        cursor: pointer;
        border-radius: 8px; /* הגדלת רדיוס הכפתורים */
      }
      button:hover {
        background-color: #0056b3;
      }

      select {
        width: 100%;
        padding: 12px; /* הגדלנו את הגודל */
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px; /* רדיוס פינות גדול יותר */
        font-size: 18px; /* גודל טקסט גדול יותר */
      }

      /* עיצוב הכפתורים לרדיו */
      input[type="radio"] {
        margin: 10px;
        transform: scale(1.5); /* הגדלת כפתורי הרדיו */
      }

      label[for="quantityOption"],
      label[for="sizeOption"] {
        font-size: 25px; /* גודל פונט גדול יותר לתוויות */
        font-weight: bold;
        margin-right: 10px;
      }
      
      label[for="noneOption"] {
        font-size: 13px; /* גודל פונט גדול יותר לתוויות */
        font-weight: bold;
        margin-right: 10px;
      }

      #summary {
        margin-top: 0px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
        white-space: pre-line; /* שמירת פורמט כמו בהודעת טקסט */
        line-height: 0.8; /* קביעת ריווח בין שורות */
      }


      
      .category-title {
        font-weight: bold;
        margin-top: 0px;
        color: #007bff;
        text-decoration: underline;
      }
      ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
      }
      li {
        padding: 5px;
        margin-bottom: 2px;
        border-bottom: 1px solid #ddd;
      }
      #copyButton {
        margin-top: 0px;
        /* text-align: center;
      justify-content: center;
      align-items: center;
      display: flex; */
        background-color: #28a745;
      }
      #copyButton:hover {
        background-color: #218838;
      }
      .delete-btn {
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 5px 10px;
        margin-right: 10px;
        cursor: pointer;
        border-radius: 3px;
      }


      @media (max-width: 600px) {
        .delete-btn {
          margin-right: 2px;
    }
}
      .delete-btn:hover {
        background-color: #c82333;
      }
      li {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* תוצאות חיפוש עיצוב */
      ul#searchResults {
        list-style-type: none;
        padding: 0;
        background-color: #fff;
        max-height: 150px;
        overflow-y: auto;
        border: 1px solid #ccc;
      }

      ul#searchResults li {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      ul#searchResults li:hover {
        background-color: #f1f1f1;
      }

      /* עיצוב כפתור העתקת מק"ט */
      ul#searchResults li button {
        padding: 5px 10px;
        font-size: 0.8em;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
      }

      ul#searchResults li button:hover {
        background-color: #0056b3;
      }


      .notification {
        display: none;
        position: fixed;
        /* bottom: 20px; */
        bottom: 40%;
        left: 50%;
        transform: translateX(-50%);
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        border: 1px solid #c3e6cb;
        border-radius: 5px;
        box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
        z-index: 1000;
        font-size: 16px;
        font-weight: bold;
      }

      .external-links {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
  }

  .external-links img {
    border: 2px solid #ddd;
    border-radius: 8px;
    transition: transform 0.3s ease;
  }

  .external-links img:hover {
    transform: scale(1.1);
  }

  /* תפריט תחתון */
  #tacton {

      margin-top: 80px;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: #333;
  color: #fff;
  text-align: center;
  padding: 10px 0;
  font-family: Arial, sans-serif;
  font-size: 18px;
  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  }

  .item-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  
}

.product-code {
  color: #666;
  font-size: 0.9em;
}

li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px;
  margin-bottom: 2px;
  border-bottom: 1px solid #ddd;
}

#breadTypeDiv {
    margin: 10px 0;
}

#breadType {
    width: 100%;
    padding: 12px;
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 16px;
    
    box-sizing: border-box;
}

/* General styles for radio buttons */
.radio-container {
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.8); /* Light transparent background */
    border-radius: 10px; /* Rounded corners */
    padding: 10px; /* Padding around the content */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
    transition: background 0.3s; /* Smooth background transition */
    cursor: pointer; /* Change cursor to pointer */

   
}

.radio-container:hover {
    background: rgba(255, 255, 255, 1); /* Solid background on hover */
    cursor: pointer;
}

.radio-container.selected {
    background: rgba(0, 123, 255, 0.2); /* Light blue background for selected state */
    cursor: pointer;
    text-align: center;
    align-items: center;
}

.radio-container input[type="radio"] {
    display: none; /* Hide the default radio button */
    cursor: pointer;
    
}

.radio-container label {
    margin-left: 10px; /* Space between radio button and label */
    font-size: 25px; /* Font size for labels */
    cursor: pointer;
    
}

/* Styles for input boxes */
.input-box {
  width: 150px;
  margin-left: 20px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 10px; /* Rounded corners */
    font-size: 20px;
    font-weight: bold;
    background: rgba(255, 255, 255, 0.8); /* Light transparent background */
    transition: border-color 0.3s, background 0.3s; /* Smooth transition */
    /* cursor: pointer; */
}



.input-box:focus {
    border-color: #007bff; /* Change border color on focus */
    outline: none; /* Remove default outline */
    background: rgba(255, 255, 255, 1); /* Solid background on focus */
    /* cursor: pointer; */
}

/* סגנון כפתור העריכה */
.edit-btn {
    background-color: #ffc107;
    color: white;
    border: none;
    padding: 5px 10px;
    margin-right: 5px;
    cursor: pointer;
    border-radius: 3px;
    font-size: 14px;
    height: 28px;
    line-height: 1;
    display: inline-flex;
    align-items: center;
}
@media (max-width: 600px) {
  .edit-btn  {
    
    max-width: 80%; /* קבע רוחב מקסימלי קטן יותר במסכים קטנים */
        font-size: 10px; /* הקטן את גודל הטקסט */
    }
}



.edit-btn .material-icons {
    font-size: 14px;
    vertical-align: middle;
}

/* עדכון לסגנון הפופאפ */
.edit-popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 15px;
    border-radius: 10px;
    width: 60%;
    max-width: 300px;
    direction: rtl;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 1001;
}

.edit-popup textarea {
    width: 85%;
    height: 45px;
    margin: 10px 0;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-family: 'Rubik', sans-serif;
    font-size: 18px;
    resize: vertical;
    direction: rtl;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
    transition: border-color 0.2s, box-shadow 0.2s;
    position: relative;
    z-index: 1002;
    min-height: 45px;
    max-height: 120px;
}

.edit-popup textarea:focus {
    border-color: #007bff;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05), 0 0 0 2px rgba(0, 123, 255, 0.25);
    outline: none;
}

.edit-popup h3 {
    margin: 0 0 15px 0;
    color: #333;
    text-align: right;
    font-size: 14px;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 8px;
}

.popup-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 12px;
}

.popup-buttons button {
    padding: 6px 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    font-size: 13px;
    transition: background-color 0.2s;
    position: relative;
    z-index: 1002;
}

.save-btn {
    background-color: #28a745;
    color: white;
}

.save-btn:hover {
    background-color: #218838;
}

.cancel-btn {
    background-color: #dc3545;
    color: white;
}

.cancel-btn:hover {
    background-color: #c82333;
}

/* רקע כהה כשהפופאפ פתוח */
.overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 1000;
}



.date-time-container {
      display: flex; /* השתמש ב-flexbox */
      gap: 50px; /* רווח בין התיבות */
      align-items: center;
      text-align: center;
      border: 3px solid #ada5a5;
padding-right: 30px;      
  }
  @media (max-width: 600px) {
    .date-time-container {
      gap: 5px;
      border: 1px solid #ada5a5;
      padding-right: 10px; 
    }
}
  
  .date-time-label {
      display: flex; 
      align-items: center; 
      align-items: center;
      flex-direction: column;
      text-align: center;
  }
  @media (max-width: 600px) {
    .date-time-label {
      width: 140px;
    }
}
  .date-time-label2 {
      display: flex; /* השתמש ב-flexbox */
      flex-direction: column; /* תווית מעל התיבה */
      align-items: center;
      text-align: center;
     width: 190px;
  }
  @media (max-width: 600px) {
    .date-time-label2 {
      width: 140px;
    }
}


.date-time-label3 {
      display: flex; /* השתמש ב-flexbox */
      flex-direction: column; /* תווית מעל התיבה */
      align-items: center;
      text-align: center;
     width: auto;

  }
  @media (max-width: 600px) {
    .date-time-label3 {
      width: 100px;

    }
}
  
  .date-time-input {
    flex-direction: column;
      width: 140px; /* גודל התיבה */
      padding: 5px; /* ריפוד פנימי */
      font-size: 24px; /* גודל טקסט */
      margin-top: 5px; /* רווח בין התווית לתיבה */
      align-items: center;
      text-align: center;
  }
  @media (max-width: 600px) {
    .date-time-input {
        max-width: 100%; /* קבע רוחב מקסימלי קטן יותר במסכים קטנים */
        font-size: 14px;
        /* width: 80px; */
    }
}

  .date-time-label1 {
      display: flex; /* השתמש ב-flexbox */
      flex-direction: column; /* תווית מעל התיבה */
      align-items: center;
      text-align: center;
      width: 140px;
  }
  @media (max-width: 600px) {
    .date-time-input {
      width: 40px;
    }
}

  /* הסתרת הקטגוריה כולה כשהרשימה ריקה */
  /* <!-- הסתרת קטגוריות ריקות --> */
  #warehouse:has(ul:empty),
        #amar:has(ul:empty),
        #sushi:has(ul:empty) {
            display: none;
        }


        .product-quantity-container {
      display: flex; /* השתמש ב-flexbox */
      gap: 50px; /* רווח בין התוויות */
      align-items: center;
      text-align: center;
      
  }
  @media (max-width: 600px) {
    .product-quantity-container {
      gap: 10px;

    }
}
  
  .product-label{
      display: flex; /* השתמש ב-flexbox */
      flex-direction: column; /* תווית מעל התיבה */
      align-items: center;
      text-align: center;
            width: 160px;
margin-right: 40px;  
/* margin: 100px; */
}
@media (max-width: 600px) {
  .product-label {
      width: 110px;
      margin-right: 20px;  
    }
}


.product-code-input {
    width: 120px; /* קבע את הרוחב של תיבת הקלט */
    padding: 5px; /* ריפוד פנימי */
    text-align: center; /* מרכז את הטקסט בתיבה */
    align-items: center;
    font-size: 16px; /* גודל טקסט */
background-color: #c1232324;}

  .quantity-label {
      display: flex; /* השתמש ב-flexbox */
      flex-direction: column; /* תווית מעל התיבה */
      align-items: center; /* מרכז את התוכן */
      /* width: 330px; */
      width: 230px; 
    text-align: center; /* מרכז את הטקסט בתיבה */
    font-size: 16px; /* גודל טקסט */
    margin-right: 100px;
}
@media (max-width: 600px) {
    .quantity-label {
      width: 190px;
      margin-right: 40px;

    }
}

.product-code-input,
.quantity-input {
    width: 120px; /* קבע את הרוחב של תיבת הקלט */
    padding: 5px; /* ריפוד פנימי */
    text-align: center; /* מרכז את הטקסט בתיבה */
    font-size: 16px; /* גודל טקסט */
}

@media (max-width: 600px) {
    .date-time-label2 {
      width: 90px;
    }
}


    </style>

    <!-- הוסף בחלק של ה-style -->
    <style>
        /* ... הסגנונות הקיימים ... */
        
        #pasteButton {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            height: 44px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #pasteButton:hover {
            background-color: #0056b3;
        }

        #pasteButton .material-icons {
            font-size: 20px;
            color: white;
        }

        @media (max-width: 600px) {
            #pasteButton {
                min-width: 36px;
                height: 36px;
            }
            
            #pasteButton .material-icons {
                font-size: 18px;
            }
        }
    </style>


  
  </head>
  <body>


    <div class="container">
      
      <!-- הוסף את הקוד הזה מתחת לכותרת הראשית -->
      <div class="external-links">
        <a href="https://www.goldys.co.il/" target="_blank">
          <img src="לוגו גולדיס רגיל.png" title="גולדיס אתר רגיל" alt="קישור 1" width="100" height="100">
        </a>
        <a href="https://www.goldys.co.il/holidays" target="_blank">
          <img src="גולדיס חגים-לוגו.jpg" title="גולדיס חגים" alt="קישור 2" width="100" height="100">
        </a>
      </div>
      <h1>ניהול הזמנות</h1>
      <!-- שאר הקוד שלך ממשיך כאן -->
      <div>
        <!-- כותרת לתיבת החיפוש -->
        <h3>תיבת חיפוש מוצר/מק"ט</h3>

        <!-- הודעת העתקה שתופיע בחלק העליון -->
        <div
          id="copyMessage"
          style="
            display: none;
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4caf50;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            font-size: 16px;
            opacity: 0;
            transition: all 0.5s ease-in-out;
          "
        >
          הועתק בהצלחה!
        </div>

       

        <!-- תיבת החיפוש -->
        <div style="display: flex; gap: 10px; align-items: center;">
            <input
                type="text"
                id="searchInput"
                placeholder="הכנס מקט או שם מוצר"
                oninput="searchProduct()"
            />
            <button id="clearButton" onclick="clearSearch()">נקה חיפוש</button>
        </div>

        <!-- תוצאות חיפוש -->
        <ul id="searchResults"></ul>

        <br/><br/>


        <button style="background-color: rgba(245, 66, 66, 0.98);" onclick="newOrder()">התחל הזמנה חדשה</button>
             <!-- הוסף את זה מתחת לכפתור "הזמנה חדשה" -->
     <div id="orderNotification" class="notification order-notification" style="display: none; background-color: #ff0000; color: #010911;">
      ההזמנה אופסה בהצלחה! 
    </div>

        <br/><br/><br/>

     
<!-- הנח את תיבות התאריך, השעה ומספר ההזמנה באותה שורה עם תוויות -->
<div class="date-time-container">
  <div class="date-time-label2">
    <label for="orderNumber">מספר הזמנה:</label>
    <input type="text" id="orderNumber" class="date-time-input" />
</div>

  <div class="date-time-label">
      <label for="orderDate">תאריך:</label>
      <input type="date" id="orderDate" class="date-time-input" />
  </div>
  <div class="date-time-label3">
      <label for="orderTime">שעה:</label>
      <input type="time" id="orderTime" class="date-time-input" />
  </div>
</div>

        <br/>
<!-- הנח את תיבת מק"ט מוצר וכמות באותה שורה עם תוויות -->
 <!-- תיבת המק"ט עם כפתור ההדבקה -->
 <div class="product-quantity-container">
  <div class="product-label">
      <label for="productCode">מק"ט מוצר:</label>
      <div style="display: flex; align-items: center;">
          <input type="text" id="productCode" class="product-code-input" />
          <button 
              id="pasteButton" 
              onclick="pasteFromClipboard()"
              style="padding: 20px; border-radius: 4px; background-color: #007bff;"
              title="הדבק מהלוח"
          >
              <span class="material-icons">content_paste</span>
          </button>
      </div>
  </div>
  <div class="quantity-label">
      <label for="productQuantity">כמות יחי'/מגשים:</label>
      <div style="display: flex; align-items: center;">
          <button type="button" id="decreaseButton">-</button>
          <input type="number" id="productQuantity" value="1" min="1" class="quantity-input" />
          <button type="button" id="increaseButton">+</button>
      </div>
  </div>
</div>

        <!-- הוספת שדה בחירת סוג לחם לביסים -->
<div id="breadTypeDiv" style="display: none;">
  <label for="breadType">סוג לחם:</label>
  <select id="breadType">
    <option value="">בחר</option> <!-- ברירת מחדל ריקה -->
      <option value="ביס שומשום">ביס שומשום</option>
      <option value="ביס בריוש">ביס בריוש</option>
      <option value="ביס קמח מלא">ביס קמח מלא</option>
      <option value="ביס דגנים">ביס דגנים</option>
      <option value="ביס פרג">ביס פרג</option>
      <option value="ביס שחור">ביס שחור</option>
      <option value="ביס אדום-סלק">ביס אדום-סלק</option>
      <option value="ביס בריוש מלבן">ביס בריוש מלבן</option>
  </select>
</div>

<label for="note">הערות:</label>
<input type="text" id="productNote" placeholder="הזן הערות כאן">

        <label for="productChoice">בחר סוג פריט:</label>
        <br><br>
        <div style="display: flex; align-items: center; gap: 20px;">
          <div class="radio-container">
              <input type="radio" id="quantityOption" name="productChoice" value="quantity" checked onchange="updateSelectedRadio()">
              <label for="quantityOption">לפי כמות</label>
          </div>
      
          <div class="radio-container">
              <input type="radio" id="sizeOption" name="productChoice" value="size" onchange="updateSelectedRadio()">
              <label for="sizeOption">לפי גודל</label>
          </div>
      
          <div class="radio-container">
              <input type="radio" id="noneOption" name="productChoice" value="none" onchange="toggleQuantitySize(); updateSelectedRadio()">
              <label for="noneOption">ללא גודל/כמות</label>
          </div>
      </div>
      <br><br>
      <!-- שדה עבור כמות -->
      <div id="quantityDiv" style=" align-items: center; gap: 50px; margin-top: 10px; font-weight: bold; ">
        <label for="unitQuantity">כמות:</label>
        <br>
        <input type="number" id="unitQuantity" value="20" style=" width: 150px;" class="input-box" />
        <select id="unitType" class="input-box">
            <option value="יחי'">יחי'</option>
            <option value="כוסות">כוסות</option>
        </select>
    </div>
      <!-- שדה עבור גודל -->
      <div id="sizeDiv" style="display: none; margin-top: 10px;">
          <label for="productSize">גודל:</label>
          <select id="productSize" class="input-box">
              <option value="medium">בינוני</option>
              <option value="large">גדול</option>
          </select>
      </div>
<br>
        <button aria-label="הוסף לסיכום" onclick="addProduct()">
          הוסף לסיכום
      </button>
         
      </div>
      <div>
        <label for="temperature">בחר מצב חם/קר:</label>
        <select id="temperature" name="temperature">
          <option value="">בחר</option> <!-- ברירת מחדל ריקה -->
          <option value="חם">חם</option>
          <option value="קר">קר</option>
        </select>
      </div>
      <br>

      <!-- הוסף את זה במקום המתאים בטופס שלך -->
<!-- <div>
  <label>
    <input type="radio" name="temperature" id="hotOption"> חם
  </label>
  <label>
    <input type="radio" name="temperature" id="coldOption"> קר
  </label>
</div> -->
      <div id="summary">
        <h2>סיכום הזמנה</h2>
        <p id="orderInfo"></p>
        <div id="kitchen">
          <div class="category-title">מטבח:</div>
          <ul id="kitchenList"></ul>
        </div>
        <div id="bakery">
          <div class="category-title">קונדיטוריה:</div>
          <ul id="bakeryList"></ul>
        </div>
        <div id="online">
          <div class="category-title">אונליין:</div>
          <ul id="onlineList"></ul>
        </div>
        <div id="warehouse">
          <div class="category-title">מחסן:</div>
          <ul id="warehouseList"></ul>
        </div>

        <!-- הוספה אחרי שאר הקטגוריות -->
        <div id="amar">
          <div class="category-title">קונדיטוריית עמר:</div>
          <ul id="amarList"></ul>
        </div>

        <div id="sushi">
          <div class="category-title">סושי:</div>
          <ul id="sushiList"></ul>
        </div>

        <div >
          <strong class="category-title">מצב חם/קר:</strong> <span id="notesSummary"></span>
        </div>

      </div>
      <!-- ליד הכפתורים הקיימים -->
      <!-- <button id="copyButton" onclick="copySummary()">העתק סיכום הזמנה</button> -->
      <button id="whatsappButton" onclick="openWhatsAppModal()">שליחת והעתקה סיכום כללי</button>
      <button id="whatsappFruitsButton" onclick="openWhatsAppFruitsModal()">שליחת סיכום פירות</button>
      <button id="copyFruitsButton" onclick="copyFruitSummary()">העתק סיכום פירות</button>
      <button id="copyBakeryButton" onclick="copyBakerySummary()">העתק סיכום קונדיטוריה</button>
      <button id="copyWarehouseButton" onclick="copyWarehouseSummary()">העתק סיכום מחסן</button>
      <button id="copySushiButton" onclick="copySushiSummary()">העתק סיכום סושי</button>
      <button id="copyAmarButton" onclick="copyAmarSummary()">סיכום קונדיטוריית עמר</button>
      <div id="tacton">האתר נבנה ועוצב על ידי מוישי ב  | mchb0556706325@gmail.com | 0515157166</div>
    </div>

    <div id="copy-notification" class="notification">
      <!-- ההודעה תוצג כאן -->
    </div>
    <div id="notification" class="notification"></div>

    <!-- בסוף הבודי, לפני הסקריפטים -->
    <div class="overlay" id="overlay"></div>
    <div class="edit-popup" id="editPopup">
        <h3>עריכת פריט</h3>
        <textarea id="editItemText" placeholder="ערוך את פרטי הפריט כאן"></textarea>
        <div class="popup-buttons">
            <button class="save-btn" onclick="saveEdit()">שמור</button>
            <button class="cancel-btn" onclick="closeEditPopup()">ביטול</button>
        </div>
    </div>

    <!-- WhatsApp Modal -->
    <div id="whatsappModal" class="modal" style="display: none;">
        <div class="modal-content wa-modal-content">
            <span class="close" onclick="closeWhatsAppModal()">&times;</span>
            <h2>שליחת סיכום הזמנה לוואטסאפ</h2>
            <div id="waEditable" class="wa-preview wa-editable" contenteditable="true" spellcheck="false"></div>
            <div class="modal-buttons">
                <button onclick="sendWhatsAppMessage()" class="send-btn">שלח לוואטסאפ</button>
                <button onclick="copyCurrentSummary()" class="copy-btn">העתק סיכום</button>
                <button onclick="closeWhatsAppModal()" class="cancel-btn">ביטול</button>
            </div>
        </div>
    </div>

    <!-- Fruits WhatsApp Modal -->
    <div id="whatsappFruitsModal" class="modal" style="display: none;">
        <div class="modal-content wa-modal-content">
            <span class="close" onclick="closeWhatsAppFruitsModal()">&times;</span>
            <h2>שליחת סיכום פירות לוואטסאפ</h2>
            <div id="waEditableFruits" class="wa-preview wa-editable" contenteditable="true" spellcheck="false"></div>
            <div class="modal-buttons">
                <button onclick="sendWhatsAppFruitsMessage()" class="send-fruits-btn">שלח לוואטסאפ</button>
                <button onclick="copyFruitSummary()" class="copy-btn">העתק סיכום</button>
                <button onclick="closeWhatsAppFruitsModal()" class="cancel-btn">ביטול</button>
            </div>
        </div>
    </div>

    <!-- הוספת מודל אישור שליחה כפולה -->
    <div id="duplicateMessageModal" class="modal" style="display: none;">
        <div class="modal-content confirmation-modal">
            <div class="confirmation-icon">⚠️</div>
            <h3>שליחה חוזרת</h3>
            <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
            <div class="confirmation-buttons">
                <button onclick="confirmResend()" class="confirm-btn">כן, שלח שוב</button>
                <button onclick="closeDuplicateModal()" class="cancel-btn">ביטול</button>
            </div>
        </div>
    </div>

    <!-- מודל אישור שליחה כפולה לפירות -->
    <div id="duplicateFruitsModal" class="modal" style="display: none;">
        <div class="modal-content confirmation-modal">
            <div class="confirmation-icon">⚠️</div>
            <h3>שליחה חוזרת</h3>
            <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
            <div class="confirmation-buttons">
                <button onclick="confirmFruitsResend()" class="confirm-btn">כן, שלח שוב</button>
                <button onclick="closeDuplicateFruitsModal()" class="cancel-btn">ביטול</button>
            </div>
        </div>
    </div>

    <style>
        /* סגנונות קיימים */
        .wa-modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 16px 12px 12px 12px;
            border: 1px solid #888;
            width: 98%;
            max-width: 420px;
            border-radius: 12px;
            direction: rtl;
            box-sizing: border-box;
        }

        /* סגנונות למודל האישור */
        .confirmation-modal {
            background-color: #ffffff;
            margin: 15% auto;
            padding: 25px;
            border: none;
            width: 90%;
            max-width: 400px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            direction: rtl;
        }

        .confirmation-icon {
            font-size: 48px;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }

        .confirmation-modal h3 {
            color: #333;
            margin: 0 0 15px 0;
            font-size: 24px;
        }

        .confirmation-modal p {
            color: #666;
            margin: 0 0 25px 0;
            font-size: 16px;
            line-height: 1.5;
        }

        .confirmation-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .confirm-btn {
            background-color: #25D366;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .confirm-btn:hover {
            background-color: #128C7E;
            transform: translateY(-2px);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        /* סגנונות קיימים נוספים */
        .wa-editable {
            min-height: 180px;
            max-height: 320px;
            overflow-y: auto;
            background: #e1ffc7;
            border-radius: 16px 16px 16px 0;
            border: 1.5px solid #b2e59e;
            padding: 18px 18px 18px 10px;
            margin-bottom: 10px;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 17px;
            color: #222;
            direction: rtl;
            text-align: right;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            white-space: pre-line;
            word-break: break-word;
            outline: none;
        }
    </style>

    <style>
    .close {
        color: #222;
        float: left;
        font-size: 34px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.2s, transform 0.2s;
        user-select: none;
    }
    .close:hover {
        color: #25D366;
        transform: scale(1.18) rotate(-8deg);
        cursor: pointer;
    }
</style>

    <style>
.copy-btn {
    background: linear-gradient(90deg, #00c6ff 0%, #0072ff 100%);
    color: #fff;
    border: none;
    border-radius: 24px;
    padding: 10px 28px;
    font-size: 18px;
    font-weight: bold;
    box-shadow: 0 2px 8px rgba(0,0,0,0.10);
    transition: background 0.2s, transform 0.2s;
    margin: 0 8px;
    outline: none;
}
.copy-btn:hover {
    background: linear-gradient(90deg, #0072ff 0%, #00c6ff 100%);
    transform: translateY(-2px) scale(1.04);
}

/* הודעות קופצות תמיד במרכז, עיצוב מודרני וידידותי */
#copy-notification, #notification, #copyMessage {
  z-index: 9999 !important;
  position: fixed !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  display: none;
  min-width: 80px;
  max-width: 400px;
  height: 40px;
  padding: 4px 32px;
  border-radius: 18px;
  font-size: 16px;
  font-family: 'Varela Round', 'Rubik', 'Segoe UI', Arial, sans-serif;
  font-weight: 700;
  box-shadow: 0 2px 8px rgba(0,0,0,0.13);
  text-align: center;
  opacity: 0.98;
  pointer-events: none;
  background: linear-gradient(135deg, #e1ffc7 60%, #b2e59e 100%);
  color: #1a3d1a;
  letter-spacing: 0.3px;
  transition: transform 0.2s, box-shadow 0.2s;
  line-height: 2.3;
  white-space: pre-line;
}
#copy-notification.show, #notification.show, #copyMessage.show {
  display: block !important;
  animation: popIn 0.35s;
}
@keyframes popIn {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.7); }
  80% { opacity: 1; transform: translate(-50%, -50%) scale(1.08); }
  100% { opacity: 0.98; transform: translate(-50%, -50%) scale(1); }
}
</style>

<style>
  /* סגנון לאנימציית הטעינה */
  .loading-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid #ffffff;
    border-radius: 50%;
    border-top-color: transparent;
    animation: spin 1s linear infinite;
    margin-left: 8px;
    vertical-align: middle;
  }

  @keyframes spin {
    to {
        transform: rotate(360deg);
    }
  }

  /* סגנון לכפתור מושבת */
  .send-btn:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
    opacity: 0.7;
  }
</style>

<style>
  /* עיצוב מודלים של וואטסאפ ושליחה כפולה */
  .modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0; top: 0; width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.35);
    justify-content: center;
    align-items: center;
  }
  .modal[style*="display: block"] {
    display: flex !important;
  }
  .modal-content, .confirmation-modal {
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.18);
    padding: 24px 18px 18px 18px;
    max-width: 95vw;
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    text-align: center;
    direction: rtl;
  }
  .wa-editable {
    min-height: 120px;
    background: #e1ffc7;
    border-radius: 12px;
    border: 1.5px solid #b2e59e;
    padding: 14px;
    margin-bottom: 12px;
    font-size: 17px;
    color: #222;
    outline: none;
    text-align: right;
  }
  .modal-buttons, .confirmation-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 10px;
    flex-wrap: wrap;
  }
  .send-btn, .copy-btn, .cancel-btn, .confirm-btn {
    border: none;
    border-radius: 8px;
    padding: 10px 18px;
    font-size: 16px;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.2s;
  }
  .send-btn, .confirm-btn { background: #25D366; color: #fff; }
  .send-btn:hover, .confirm-btn:hover { background: #128C7E; }
  .copy-btn { background: #f0f0f0; color: #333; }
  .copy-btn:hover { background: #e0e0e0; }
  .cancel-btn { background: #ff4444; color: #fff; }
  .cancel-btn:hover { background: #cc0000; }
  .confirmation-icon { font-size: 40px; margin-bottom: 10px; }
  @media (max-width: 600px) {
    .modal-content, .confirmation-modal { max-width: 98vw; padding: 10px 2vw; }
    .wa-editable { font-size: 15px; padding: 10px; }
    .send-btn, .copy-btn, .cancel-btn, .confirm-btn { font-size: 15px; padding: 8px 8px; }
  }
  </style>

    <script>
      // הגדרת משתנים גלובליים בתחילת הסקריפט
      window.currentEditItem = null;
      window.currentEditCategory = null;
      
      // נתוני מוצרים
      const productData = {
       
        12628: { name: "מגש כריכוני טונה", category: "kitchen" },
        12617: { name: "מגש ביס שניצל", category: "kitchen" },
        12627: { name: "מגש כריכוני סלט ביצים וירקות", category: "kitchen" },
        16331: { name: "מגש ביס סלט אבוקדו וביצה", category: "kitchen" },
        12618: { name: "מגש ביס חזה הודו מעושן", category: "kitchen" },
        12616: { name: "מגש ביס בריוש במילוי אסאדו", category: "kitchen" },

        12626: { name: "מגש סמוק סלמון בקרואסון", category: "kitchen" },
        12408: { name: "מגש מקלות גריסני בסמוק סלמון ורוטב דיז׳ון", category: "kitchen" },
        12409: { name: "מגש סביח בג'בטה", category: "kitchen" },
        12622: { name: "מגש פוקאצ'ות הבית + מטבלים", category: "kitchen" },
        12602: { name: "מגש ניגוב למתקדמים", category: "kitchen" },



        12624: { name: "מגש מאפי בוקר טריים של הבייקרי", category: "amar" },

        99110: { name: "חלת חתן", category: "amar" },
        42102: { name: "פיצות", category: "amar" },
        11708: { name: "ביס קוקטייל מזונות", category: "amar" },
        22461: { name: "לחמניה המוציא", category: "amar" },

        12611: { name: "מגש מיני רוגלך שוקולד ובורקס תפו'א", category: "online" },

        12907: { name: "מגש mix בשרים בעישון שלנו", category: "kitchen" },
        12620: { name: "מגש ממולאים מטוגנים + רטבים", category: "kitchen" },
        12330: { name: "מגש קבבוני טלה", category: "kitchen" },
        12418: { name: "מגש שיפודי סאטה פרגית בטמפורת חמאת בוטנים", category: "kitchen" },
        12405: { name: "מגש מיני קיש ירקות", category: "kitchen" },
        12450: { name: "מגש ירקות חתוכים", category: "kitchen" },
        12404: { name: "מגש דגים מעושנים", category: "kitchen" },
        12406: { name: "מגש מיני מאפה ירקות בסגנון סצ'ואן", category: "kitchen" },
        12407: { name: "מגש אצבעות אמנון בבצק בירה", category: "kitchen" },
        12451: { name: "מגש אנטיפסטי של ירקות העונה", category: "kitchen" },
        12605: { name: "מגש מיני פסטיה במילוי עוף מוקפץ", category: "kitchen" },
        12621: { name: "מגש שניצלונים בטמפורה", category: "kitchen" },
        12464: { name: "מגש שיפודי אנטיפסטי", category: "kitchen" },
        12463: { name: "מגש סלט פירות ופקאן בכוסות", category: "kitchen" },
        12456: { name: "מגש סלט עשבי תיבול וחמוציות בכוסות", category: "kitchen" },
        12461: { name: "מגש סלט בורגול חגיגי בכוסות", category: "kitchen" },
        12462: { name: "מגש חמוצים תאילנדים בכוסות", category: "kitchen" },
        12453: { name: "מגש סלט קיסר וקרוטונים בכוסות", category: "kitchen" },
        12460: { name: "מגש סלט כרוב צבעוני בכוסות", category: "kitchen" },
        12800: { name: "מגש סלט בורמזי בכוסות", category: "kitchen" },
        12455: { name: "מגש סלט פסטה בכוסות", category: "kitchen" },
        12802: { name: "מגש סלט קינואה בכוסות", category: "kitchen" },
        12801: { name: "מגש סלט שורשים בכוסות", category: "kitchen" },
        12417: { name: "מגש כדורים יפניים + רוטב סאצ׳ואן", category: "kitchen" },
        12619: { name: "מגש רוסטביף מהמעשנה", category: "kitchen" },
        12452: { name: "מגש סלט קטניות בכוסות", category: "kitchen" },
        12424: { name: "ישיבות במשרד", category: "kitchen" },
        12615: { name: "חגיגה לחובבי בשר", category: "kitchen" },


        1245299: { name: "ליטר סלט קטניות במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1246399: { name: "ליטר סלט פירות ופקאן במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1245699: { name: "ליטר סלט עשבי תיבול וחמוציות במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1246199: { name: "ליטר סלט בורגול חגיגי במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1246299: { name: "ליטר חמוצים תאילנדים במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1245399: { name: "ליטר סלט קיסר וקרוטונים במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1246099: { name: "ליטר סלט כרוב צבעוני במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1280099: { name: "ליטר סלט בורמזי במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1245599: { name: "ליטר סלט פסטה במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1280299: { name: "ליטר סלט קינואה במרוכז. *רוטב חובה!!*", category: "kitchen" },
        1280199: { name: "ליטר סלט שורשים במרוכז. *רוטב חובה!!*", category: "kitchen" },
        4310199: { name: "ליטר סלט ירקות ישראלי במרוכז. *רוטב חובה!!*", category: "kitchen" },
        22449: { name: "ליטר מרק ירקות כתומים", category: "kitchen" },
        11119: { name: "ליטר חומוס", category: "kitchen" },
        11143: { name: "ליטר טחינה אסלית", category: "kitchen" },
        11127: { name: "ליטר חציל מטוגן בתחמיץ", category: "kitchen" },
        10634: { name: "ליטר צ'יפס", category: "kitchen" },
        23164: { name: "ליטר מטבוחה פיקנטית", category: "kitchen" },
        11149: { name: "ליטר מטבוחה פיקנטית", category: "kitchen" },

        4310101: { name: "מגש סלט ירקות ישראלי בכוסות", category: "kitchen" },


       




        10807: { name: "תבנית ענקית לקידוש קוגל תפו'א", category: "kitchen" },
        10811: { name: "תבנית ענקית לקידוש קוגל ירושלמי", category: "kitchen" },
        11122: { name: "ליטר חמוצים מנפיס", category: "kitchen" },
        10801: { name: "ליטר טשולנט בשרי", category: "kitchen" },
        10803: { name: "ליטר טשולנט מלכים", category: "kitchen" },
        10800: { name: "ליטר טשולנט פרווה", category: "kitchen" },
        10628: { name: "ליטר קוביות אנטיפסטי", category: "kitchen" },
10603: { name: "ליטר אורז פטריות ובצל", category: "kitchen" },
10602: { name: "ליטר אורז מקלובה", category: "kitchen" },
10408: { name: "פילה סלמון בחרדל ודבש", category: "kitchen" },
10321: { name: "פרגית על האש", category: "kitchen" },
10324: { name: "שיפוד פרגית על האש", category: "kitchen" },
10201: { name: "צלי כתף עגל בבישול קדירה", category: "kitchen" },
22443: { name: "ליטר תפו''א ובטטה", category: "kitchen" },
11137: { name: "ליטר חציל קלוי במיונז", category: "kitchen" },
22500: { name: "ליטר עוף סיני מוקפץ", category: "kitchen" },
10318: { name: "ליטר עוף סיני מוקפץ", category: "kitchen" },

11167: { name: "סלק אדום עם בצלים טריים", category: "kitchen" },
      

        0: { name: "", category: "kitchen" },
        1: { name: "", category: "bakery" },
        2: { name: "", category: "online" },
        3: { name: "", category: "warehouse" },
        4: { name: "", category: "sushi" },
        5: { name: "", category: "amar" },


  

        // בייקרי
        12493: { name: "מגש mix טארטלטים", category: "bakery" },
        12480: { name: "מגש אקלר צרפתי", category: "bakery" },
        12486: { name: "מגש מיני לימונשלי", category: "bakery" },
        12484: { name: "מגש מיני טריקולו", category: "bakery" },
        12481: { name: "מגש טראפלס חלומי", category: "bakery" },
        12487: { name: "מגש מיני מוס אוריאו", category: "bakery" },
        12482: { name: "מגש mix אקלרים", category: "bakery" },
        12488: { name: "מגש מיני מוס שוקולד", category: "bakery" },
        12483: { name: "מגש מיני טירמיסו", category: "bakery" },
        12601: { name: "מגש mix מיני כוסות מוס", category: "bakery" },
        12489: { name: "מגש קינדר בטארטלט", category: "bakery" },
        12490: { name: "מגש מקרונים מצרפת", category: "bakery" },


        11621: { name: "טארט לימון גדול", category: "bakery" },
  11403: { name: "עוגת פררו רושה", category: "bakery" },
  11655: { name: "עוגת מוס פיסטוק חגיגית", category: "bakery" },
  11654: { name: "עוגת מוס שוקולד בלגי", category: "bakery" },
  11563: { name: "עוגת יום הולדת כמו בשנות ה90", category: "bakery" },
  11656: { name: "עוגת שכבות שוקולד", category: "bakery" },
  11620: { name: "טארט שוקולד גדול", category: "bakery" },
  11558: { name: "טארט תפוחי עץ גדול", category: "bakery" },
  11557: { name: "טארט פקאן גדול", category: "bakery" },
11709: { name: "לחמנית ביס בריוש", category: "amar" },
117083: { name: "לחמנית ביס שומשום", category: "amar" },



        // אונליין
        12457: { name: "מגש אירוח פירות העונה", category: "online" },
        12113: { name: "מגש פירות עונה טריים", category: "online" },
        12491: { name: "מגש בראוניז", category: "bakery" },
        12494: { name: "מגש עוגיות של הבייקרי", category: "bakery" },
        12612: { name: "מגש עוגות בחושות", category: "bakery" },
        12127: { name: "מגש כוסות צבעוני", category: "bakery" },
        12600: { name: "מגש חיתוכיות של הבייקרי", category: "bakery" },
        100: { name: "שאר ההזמנה...", category: "online" },
        13461: { name: "מגש פירות העונה בכוסות 5 סוגים שונים סה''כ 15 כוסות", category: "online" },


        // מחסן
12459: { name: "מגש פירות יבשים", category: "warehouse" },
10: { name: "בקבוק קולה גדול", category: "warehouse" },
11: { name: "בקבוק קוקה קולה גדול", category: "warehouse" },
12: { name: "בקבוק קוקה קולה זירו גדול", category: "warehouse" },
13: { name: "בקבוק פפסי גדול", category: "warehouse" },
14: { name: "בקבוק פפסי מקס גדול", category: "warehouse" },
15: { name: "בקבוק 7 אפ גדול", category: "warehouse" },
16: { name: "בקבוק מירינדה גדול", category: "warehouse" },
17: { name: "בקבוק סודה גדול", category: "warehouse" },
18: { name: "בקבוק מים גדול", category: "warehouse" },
19: { name: "בקבוק פפסי גדול", category: "warehouse" },
20: { name: "בקבוק מים קטן", category: "warehouse" },
21: { name: "בקבוק 7 אפ זירו גדול", category: "warehouse" },
22: { name: "בקבוק ג'מפ תות בננה גדול", category: "warehouse" },
23: { name: "בקבוק ג'מפ תפוזים גדול", category: "warehouse" },
24: { name: "בקבוק ג'מפ ענבים גדול", category: "warehouse" },
24: { name: "בקבוק ג'מפ אשכוליות גדול", category: "warehouse" },
30: { name: "חד''פ רגיל סכו''ם צלחת כוס", category: "warehouse" },
39: { name: "חד''פ יוקרתי סכו''ם צלחת כוס", category: "warehouse" },

31: { name: "קערות לסלט", category: "warehouse" },
32: { name: "כפות הגשה", category: "warehouse" },
33: { name: "צלחות", category: "warehouse" },
34: { name: "כוסות", category: "warehouse" },
35: { name: "כפות", category: "warehouse" },
36: { name: "מזלגות", category: "warehouse" },


// סושי

40105: { name: "מגש קומבינציה ספייסי", category: "sushi" },
40106: { name: "מגש קומבינציה קריספי", category: "sushi" },
40101: { name: "מגש מסיבה גם וגם", category: "sushi" },
40103: { name: "מגש קומבינציה Special גולד'יס", category: "sushi" },
40102: { name: "מגש מסיבה צמחוני", category: "sushi" },
40100: { name: "מגש מסיבה דגים", category: "sushi" },
40108: { name: "מגש קומבינציה סלמון", category: "sushi" },

// 222222: { name: "", category: "sushi" },


10701: { name: "פלפל ממולא של בית", category: "kitchen" },
11168: { name: "ליטר סלט ערבי", category: "kitchen" },
10310: { name: "ליטר שניצלונים בטמפורה", category: "kitchen" },
11707: { name: "לחמניה מזונות", category: "amar" },
10821: { name: "פשטידת בצל אישית", category: "kitchen" },
10822: { name: "פשטידת פטריות אישית", category: "kitchen" },
11751: { name: "לחם דגנים אובלי", category: "warehouse" },
11754: { name: "לחם כפרי צרפתי", category: "warehouse" },
11105: { name: "ליטר גזר מרוקאי אסלי", category: "kitchen" },
10623: { name: "ליטר שעועית שלמה מוקפצת עם פטריות שמפניון", category: "kitchen" },
22467: { name: "סופלה שוקולד", category: "bakery" },
10350: { name: "חזה עוף בטעמי המזרח הרחוק", category: "kitchen" },
10320: { name: "פרגית בגריל", category: "kitchen" },
10327: { name: "מוסקה יוונית בשרית", category: "kitchen" },
10702: { name: "מוסקה יוונית פרווה", category: "kitchen" },
11160: { name: "ליטר טבולה עם ירקות עונה ופטרוזיליה", category: "kitchen" },
11111: { name: "ליטר פסטו עשבי תיבול", category: "kitchen" },
10315: { name: "רבע עוף ברוטב סצ'ואן", category: "kitchen" },


12625: { name: "מגש מיני מאפים מתוקים (25 יחי') מ 5 סוגים", category: "amar" },
11552: { name: "פרנות לוהטות מהטאבון", category: "warehouse" },



"11146": { name: "ליטר קולסלאו", category: "kitchen" },
  "11101": { name: "כרעיים עוף בגריל", category: "kitchen" },
  "10307": { name: "שניצל עוף קלאסי", category: "kitchen" },
  "111603": { name: "מאפה פילו במילוי עוף מוקפץ", category: "kitchen" },
  "33302": { name: "מוסקה פרווה", category: "kitchen" },
  "111201": { name: "חזה עוף בגריל", category: "kitchen" },
  "312011": { name: "ליטר תפו''א כתום", category: "kitchen" },
  "316061": { name: "אנטיפסטי ירקות קלויים", category: "kitchen" },
  "10600": { name: "ליטר אורז לבן", category: "kitchen" },
  "11134": { name: "ליטר חציל מרוקאי", category: "kitchen" },
  "22510": { name: "ליטר תפו''א כתום", category: "kitchen" },
  "10632": { name: "ליטר תפו''א צהוב", category: "kitchen" },
  "10309": { name: "ליטר שניצלונים", category: "kitchen" },
  "10319": { name: "ליטר מעורב ירושלמי", category: "kitchen" },
  "10620": { name: "ליטר קוסקוס", category: "kitchen" },
  "10621": { name: "ליטר ירקות לקוסקוס", category: "kitchen" },


13480: { name: "מגש טאקוס ונאצ'וס בהרכבה אישית", category: "kitchen" },
13479: { name: "מגש שווארמה כרובית בהרכבה אישית", category: "kitchen" },
13473: { name: "מגש בורקס פינוקים", category: "kitchen" },
13475: { name: "מגש חצילים מזן בלאדי על חם מעושן", category: "kitchen" },
13476: { name: "מגש קרפצ'ו סלקים עונתי", category: "kitchen" },
13474: { name: "מגש קרפצ'ו סלמון מעושן", category: "kitchen" },
13478: { name: "מגש טורטיית סביח", category: "kitchen" },
13477: { name: "מגש טורטייה של אנטיפסטי", category: "kitchen" },


410: { name: "מגש קרואסון סלט ביצים", category: "kitchen" },
415: { name: "מגש קרואסון סלט טונה", category: "kitchen" },






      };








// מגדיר את productConfigurations כמשתנה גלובלי
      const productConfigurations = {
    // מוצרים לפי גודל (בינוני/גדול)
    '12457': { type: 'size', defaultSize: 'large' },  // מגש אירוח פירות העונה
    '12113': { type: 'size', defaultSize: 'large' },  // מגש פירות עונה טריים
    '12907': { type: 'size', defaultSize: 'large' },  // מגש mix בשרים בעישון שלנו
    '12330': { type: 'size', defaultSize: 'large' },  // מגש קבבוני טלה
    '12450': { type: 'size', defaultSize: 'large' },  // מגש ירקות חתוכים
    '12404': { type: 'size', defaultSize: 'large' },  // מגש דגים מעושנים
    '12407': { type: 'size', defaultSize: 'large' },  // מגש אצבעות אמנון בבצק בירה
    '12621': { type: 'size', defaultSize: 'large' },  // מגש שניצלונים בטמפורה
    '12612': { type: 'size', defaultSize: 'large' },  // מגש עוגות בחושות
    '12417': { type: 'size', defaultSize: 'large' },  // מגש כדורים יפניים + רוטב סאצ׳ואן
    '12619': { type: 'size', defaultSize: 'large' },  // מגש רוסטביף מהמעשנה
    '12494': { type: 'size', defaultSize: 'large' },  // מגש עוגיות של הבייקרי
    '12451': { type: 'size', defaultSize: 'large' },  // מגש אנטיפסטי של ירקות העונה
    '12611': { type: 'size', defaultSize: 'large' }, 
    '12601': { type: 'size', defaultSize: 'large' }, 
    '12482': { type: 'size', defaultSize: 'large' }, 





    '12459': { type: 'size', defaultSize: 'medium' }, 
    '12490': { type: 'size', defaultSize: 'medium' }, 

    '12481': { type: 'size', defaultSize: 'medium' }, 
    '12600': { type: 'size', defaultSize: 'medium' }, 


   '12493': { type: 'quantity', defaultQuantity: 24, unit: 'יחי\'', predefinedQuantities: [24] },
'12418': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12405': { type: 'quantity', defaultQuantity: 15, unit: 'יחי\'', predefinedQuantities: [10, 15] },
'12464': { type: 'quantity', defaultQuantity: 15, unit: 'יחי\'', predefinedQuantities: [10, 15] },
'12628': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12406': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12626': { type: 'quantity', defaultQuantity: 15, unit: 'יחי\'', predefinedQuantities: [9, 15] },
'16331': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12627': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12618': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12616': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12605': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12617': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12480': { type: 'quantity', defaultQuantity: 20, unit: 'יחי\'', predefinedQuantities: [12, 20] },
'12489': { type: 'quantity', defaultQuantity: 24, unit: 'יחי\'', predefinedQuantities: [24, 18] },
'12624': { type: 'quantity', defaultQuantity: 9, unit: 'יחי\'', predefinedQuantities: [9] },

'12408': { type: 'quantity', defaultQuantity: 13, unit: 'יחי\'', predefinedQuantities: [13] },

'12409': { type: 'quantity', defaultQuantity: 15, unit: 'יחי\''},




    // מוצרים לפי כוסות
'12463': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12456': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12453': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12460': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12455': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12802': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12452': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12801': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12800': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12461': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12462': { type: 'quantity', defaultQuantity: 15, unit: 'כוסות', predefinedQuantities: [10, 15] },
'12484': { type: 'quantity', unit: 'כוסות', defaultQuantity: 21, predefinedQuantities: [21, 35] },
'12486': { type: 'quantity', unit: 'כוסות', defaultQuantity: 21, predefinedQuantities: [21, 35] },
'12488': { type: 'quantity', unit: 'כוסות', defaultQuantity: 21, predefinedQuantities: [21, 35] },
'12483': { type: 'quantity', defaultQuantity: 21, unit: 'כוסות', predefinedQuantities: [21, 35] },
'12487': { type: 'quantity', defaultQuantity: 21, unit: 'כוסות', predefinedQuantities: [21, 35] },

'4310101': { type: 'quantity', defaultQuantity: 10, unit: 'כוסות', predefinedQuantities: [10, 15] },





    // מוצרים ללא גודל/כמות
    '1246299': { type: 'none' },  // ליטר חמוצים תאילנדים במרוכז
    '1246199': { type: 'none' },  // ליטר סלט בורגול חגיגי במרוכז
    '1280099': { type: 'none' },  // ליטר סלט בורמזי במרוכז
    '1246399': { type: 'none' },  // ליטר סלט פירות ופקאן במרוכז
    '11621': { type: 'none' },    // טארט לימון גדול
    '11403': { type: 'none' },    // עוגת פררו רושה
    '12622': { type: 'none' }, 
    '12620': { type: 'none' }, 
    '11709': { type: 'none' }, 
    '117083': { type: 'none' }, 
    '11552': { type: 'none' }, 
        '12625': { type: 'none' }, 
    '40105': { type: 'none' }, 
    '40106': { type: 'none' }, 
    '40101': { type: 'none' }, 
    '40103': { type: 'none' }, 
    '40102': { type: 'none' }, 
    '40100': { type: 'none' }, 
    '40108': { type: 'none' }, 
    '31': { type: 'none' }, 
    '32': { type: 'none' }, 
    '33': { type: 'none' }, 
    '34': { type: 'none' }, 
    '35': { type: 'none' }, 
    '36': { type: 'none' }, 
    '39': { type: 'none' }, 
    '30': { type: 'none' }, 
    '24': { type: 'none' }, 
    '23': { type: 'none' }, 
    '22': { type: 'none' }, 
    '21': { type: 'none' }, 
    '20': { type: 'none' }, 
    '19': { type: 'none' }, 
    '18': { type: 'none' }, 
    '17': { type: 'none' }, 
    '16': { type: 'none' }, 
    '15': { type: 'none' }, 
    '14': { type: 'none' }, 
    '13': { type: 'none' }, 
    '12': { type: 'none' }, 
    '11': { type: 'none' }, 
    '10': { type: 'none' }, 
    '13461': { type: 'none' }, 



    '100': { type: 'none' }, 
    '11403': { type: 'none' }, 
    '11655': { type: 'none' }, 
    '11654': { type: 'none' }, 
    '11563': { type: 'none' }, 
    '11656': { type: 'none' }, 
    '11620': { type: 'none' }, 
    '11558': { type: 'none' }, 
    '11557': { type: 'none' }, 

    '11621': { type: 'none' }, 
    '1245299': { type: 'none' }, 
    '1246399': { type: 'none' }, 
    '1245699': { type: 'none' }, 
    '1246199': { type: 'none' }, 
    '1246299': { type: 'none' }, 
    '1245399': { type: 'none' }, 
    '1246099': { type: 'none' }, 
    '1280099': { type: 'none' }, 
    '1245599': { type: 'none' }, 
    '1280299': { type: 'none' }, 
    '1280199': { type: 'none' }, 
    '4310199': { type: 'none' }, 
    '22449': { type: 'none' }, 
    '11119': { type: 'none' }, 
    '11143': { type: 'none' }, 
    '11127': { type: 'none' }, 
    '10634': { type: 'none' }, 
    '23164': { type: 'none' }, 
    '11149': { type: 'none' }, 

    '12424': { type: 'none' }, 
    '12615': { type: 'none' }, 
    '99110': { type: 'none' }, 
    '42102': { type: 'none' }, 
    '11708': { type: 'none' }, 
    '22461': { type: 'none' }, 
    '10628': { type: 'none' }, 
    '10603': { type: 'none' }, 
    '10602': { type: 'none' }, 
    '10408': { type: 'none' }, 
    '10321': { type: 'none' }, 
    '10324': { type: 'none' }, 
    '10201': { type: 'none' }, 
    '22443': { type: 'none' }, 
    '11137': { type: 'none' }, 
    '22500': { type: 'none' },
    '10318': { type: 'none' }, 
    '12602': { type: 'none' }, 

    '11167': { type: 'none' }, 
    '10807': { type: 'none' },    
    '10811': { type: 'none' },      
    '11122': { type: 'none' },       
    '10801': { type: 'none' },      
    '10803': { type: 'none' }, 
    '10800': { type: 'none' }, 


    
    '10701': { type: 'none' }, 
    '11168': { type: 'none' }, 
    '10310': { type: 'none' }, 
    '11707': { type: 'none' }, 
    '10821': { type: 'none' }, 
    '10822': { type: 'none' }, 
    '11751': { type: 'none' }, 
    '11754': { type: 'none' }, 
    '11105': { type: 'none' }, 
    '10623': { type: 'none' }, 
    '22467': { type: 'none' }, 
    '10350': { type: 'none' }, 
    '10320': { type: 'none' }, 
    '10327': { type: 'none' }, 
    '10702': { type: 'none' }, 
    '11160': { type: 'none' }, 
    '11111': { type: 'none' }, 
    '10315': { type: 'none' }, 
    // ... כל המוצרים עם "במרוכז" או ללא גודל/כמות
    '0': { type: 'none' },        // ריק מטבחד
    '1': { type: 'none' },        // ריק קונדיטוריה
    '2': { type: 'none' },        // ריק אונליין
    '3': { type: 'none' },        // ריק מחסן
    '4': { type: 'none' },        // ריק סושי
    '5': { type: 'none' },         // ריק קונדיט. עמר








"11146": { type: "none" },        // ליטר קולסלאו
  "11101": { type: "none" },        // כרעיים עוף בגריל
  "10307": { type: "none" },        // שניצל עוף קלאסי
  "111603": { type: "none" },       // מאפה פילו במילוי עוף מוקפץ
  "33302": { type: "none" },        // מוסקה פרווה
  "111201": { type: "none" },       // חזה עוף בגריל
  "312011": { type: "none" },       // תפו"א אפוי עם פפריקה
  "316061": { type: "none" },       // אנטיפסטי ירקות קלויים
  "10600": { type: "none" },        // ליטר אורז לבן
  "11134": { type: "none" },        // ליטר חציל מרוקאי
  "22510": { type: "none" },        // ליטר תפו"א כתום
  "10632": { type: "none" },        // ליטר תפו"א ברוזמרין
  "10309": { type: "none" },        // ליטר שניצלונים
  "10319": { type: "none" },        // ליטר מעורב ירושלמי
  "10620": { type: "none" },        // ליטר קוסקוס
  "10621": { type: "none" },         // ליטר ירקות לקוסקוס












'410': { type: 'quantity', defaultQuantity: 15, unit: 'יחי\'', predefinedQuantities: [15, 20] },
'415': { type: 'quantity', defaultQuantity: 15, unit: 'יחי\'', predefinedQuantities: [15, 20] },

    

'13480': { type: 'size', defaultSize: 'large' },   // מגש טאקוס ונאצ'וס
'13479': { type: 'size', defaultSize: 'large' },   // מגש שווארמה כרובית
'13473': { type: 'size', defaultSize: 'large' },   // מגש מאפי פינוקים
'13475': { type: 'size', defaultSize: 'medium' },  // מגש חצילים בלאדי
'13476': { type: 'size', defaultSize: 'medium' },  // מגש קרפצ'ו סלקים
'13474': { type: 'size', defaultSize: 'medium' },  // מגש קרפצ'ו סלמון
'13478': { type: 'size', defaultSize: 'medium' },  // מגש טורטיית סביח
'13477': { type: 'size', defaultSize: 'medium' },  // מגש טורטייה אנטיפסטי
'12491': { type: 'size', defaultSize: 'medium' }


};


function createQuantityDatalist(quantities, currentValue) {
    // מוחק רשימה קודמת אם קיימת
    const existingList = document.getElementById('quantityOptionsList');
    if (existingList) {
        existingList.remove();
    }

    // מוחק כפתור קודם אם קיים
    const existingButton = document.querySelector('.quantity-toggle-btn');
    if (existingButton) {
        existingButton.remove();
    }

    const quantityInput = document.getElementById('unitQuantity');
    if (!quantityInput) return;

    // יוצר כפתור להצגת אפשרויות
    const toggleButton = document.createElement('button');
    toggleButton.type = 'button';
    toggleButton.className = 'quantity-toggle-btn';
    toggleButton.innerHTML = '↓↓';
    toggleButton.style.cssText = `
        position: absolute;
        right: 25px;
        top: 50%;
        transform: translateY(-50%);
        background-color: #c1232324;
        border: none;
        cursor: pointer;
        padding: 0 15px;
        font-size: 14px;
        color: #007bff;
    `;

    // יוצר רשימת אפשרויות
    const optionsList = document.createElement('ul');
    optionsList.id = 'quantityOptionsList';
    optionsList.style.cssText = `
        position: absolute;
        list-style: none;
        padding: 5px 0;
        margin: 0;
        background: white;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        z-index: 1000;
        display: none;
        width: 100px;
        right: 25px;
    `;

    // מוסיף את כל האפשרויות לרשימה (ללא בדיקה אם זה הערך הנוכחי)
    quantities.forEach(quantity => {
        const li = document.createElement('li');
        li.textContent = quantity;
        li.style.cssText = `
            padding: 8px 15px;
            cursor: pointer;
            text-align: center;
            ${quantity == currentValue ? 'background-color: #f0f0f0;' : ''}
        `;
        li.onmouseover = () => li.style.backgroundColor = '#f0f0f0';
        li.onmouseout = () => li.style.backgroundColor = quantity == currentValue ? '#f0f0f0' : 'white';
        li.onclick = () => {
            quantityInput.value = quantity;
            quantityInput.dispatchEvent(new Event('change'));
            optionsList.style.display = 'none';
        };
        optionsList.appendChild(li);
    });

    // מוסיף את הכפתור והרשימה
    quantityInput.parentElement.style.position = 'relative';
    quantityInput.parentElement.appendChild(toggleButton);
    quantityInput.parentElement.appendChild(optionsList);

    // מטפל בלחיצה על הכפתור
    toggleButton.onclick = (e) => {
        e.preventDefault();
        optionsList.style.display = optionsList.style.display === 'none' ? 'block' : 'none';
    };

    // מסתיר את הרשימה בלחיצה מחוץ
    document.addEventListener('click', (e) => {
        if (!quantityInput.contains(e.target) && 
            !toggleButton.contains(e.target) && 
            !optionsList.contains(e.target)) {
            optionsList.style.display = 'none';
        }
    });
}

function configureProduct(productCode) {
    console.log('מנסה להגדיר מוצר:', productCode);
    
    const config = productConfigurations[productCode];
    if (!config) {
        console.log('מוצר לא מוגדר ברשימה, משאיר הגדרות ברירת מחדל');
        const existingList = document.getElementById('quantityOptionsList');
        const existingButton = document.querySelector('.quantity-toggle-btn');
        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();
        return;
    }

    try {
        if (config.type === 'none') {
            const noneRadio = document.getElementById('noneOption');
            if (noneRadio) {
                noneRadio.checked = true;
                noneRadio.dispatchEvent(new Event('change'));
            }
    } else if (config.type === 'size') {
            const sizeRadio = document.getElementById('sizeOption');
            if (sizeRadio) {
                sizeRadio.checked = true;
                sizeRadio.dispatchEvent(new Event('change'));
                
                setTimeout(() => {
                    const sizeSelect = document.getElementById('productSize');
                    if (sizeSelect) {
                        sizeSelect.value = config.defaultSize;
                        sizeSelect.dispatchEvent(new Event('change'));
                    }
                }, 100);
            }
        } else if (config.type === 'quantity') {
            const quantityRadio = document.getElementById('quantityOption');
            if (quantityRadio) {
                quantityRadio.checked = true;
                quantityRadio.dispatchEvent(new Event('change'));
                
                setTimeout(() => {
                    const quantityInput = document.getElementById('unitQuantity');
                    const unitSelect = document.getElementById('unitType');
                    
                    if (quantityInput) {
                        quantityInput.value = config.defaultQuantity;
                        if (config.predefinedQuantities) {
                            createQuantityDatalist(config.predefinedQuantities, config.defaultQuantity);
                        }
                        quantityInput.dispatchEvent(new Event('change'));
                    }
                    if (unitSelect) {
                        unitSelect.value = config.unit;
                        unitSelect.dispatchEvent(new Event('change'));
                    }
                }, 100);
            }
        }
    } catch (error) {
        console.log('שגיאה בהגדרת המוצר:', error);
    }
}

// הפונקציה של ההדבקה נשארת אותה דבר
const originalPasteFunction = window.pasteFromClipboard;
window.pasteFromClipboard = async function() {
    if (originalPasteFunction) {
        await originalPasteFunction();
    }
    
    setTimeout(() => {
        const searchInput = document.querySelector('input[type="text"]');
        if (searchInput && searchInput.value) {
            const code = searchInput.value.trim();
            console.log('נמצא מק"ט:', code);
            configureProduct(code);
        }
    }, 200);
};


// מוסיפים את הקוד הזה בסוף הקובץ
let timeoutId = null;

document.getElementById('productCode').addEventListener('input', function(e) {
    // מבטל טיימר קודם אם קיים
    if (timeoutId) {
        clearTimeout(timeoutId);
    }
    
    // אם השדה ריק - מאפס את הבחירה
    if (!e.target.value.trim()) {
        // מסמן את כפתור "לפי כמות" כברירת מחדל
        const quantityRadio = document.getElementById('quantityOption');
        if (quantityRadio) {
            quantityRadio.checked = true;
            quantityRadio.dispatchEvent(new Event('change'));
        }

        // מנקה את האפשרויות הקיימות
        const existingList = document.getElementById('quantityOptionsList');
        const existingButton = document.querySelector('.quantity-toggle-btn');
        const quantityInput = document.getElementById('unitQuantity');
        
        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();
        if (quantityInput) quantityInput.value = '';

        document.getElementById('breadTypeDiv').style.display = 'none';
        return;
    }

    // ממשיך כרגיל אם יש ערך
    timeoutId = setTimeout(() => {
        const code = e.target.value.trim();
        if (code) {
            console.log('נמצא מק"ט (הקלדה):', code);
            configureProduct(code);
        }
    }, 500);
});

// מעדכנים את פונקציית pasteFromClipboard
window.pasteFromClipboard = async function() {
    if (originalPasteFunction) {
        await originalPasteFunction();
    }
    
    // לא צריך להמתין כאן כי זו הדבקה
    const searchInput = document.querySelector('input[type="text"]');
    if (searchInput && searchInput.value) {
        const code = searchInput.value.trim();
        console.log('נמצא מק"ט (הדבקה):', code);
        configureProduct(code);
    }
};





       document.getElementById("increaseButton").addEventListener("click", function() {
        const quantityInput = document.getElementById("productQuantity");
        quantityInput.value = parseInt(quantityInput.value) + 1; // Increase quantity by 1
    });

    document.getElementById("decreaseButton").addEventListener("click", function() {
        const quantityInput = document.getElementById("productQuantity");
        const currentValue = parseInt(quantityInput.value);
        if (currentValue > 1) {
            quantityInput.value = currentValue - 1; // Decrease quantity by 1, but not below 1
        }
    });


function updateSelectedRadio() {
    const radioContainers = document.querySelectorAll('.radio-container');
    radioContainers.forEach(container => {
        const radio = container.querySelector('input[type="radio"]');
        if (radio.checked) {
            container.classList.add('selected'); // Add selected class if checked
        } else {
            container.classList.remove('selected'); // Remove selected class if not checked
        }
    });
}

// Call this function on page load to set the initial state
updateSelectedRadio();
      // טעינת פרטי ההזמנה מדפדפן בעת פתיחת הדף
      document.addEventListener("DOMContentLoaded", () => {
        document
          .getElementById("orderDate")
         
          .addEventListener("change", saveOrderDetails);
        document
          .getElementById("orderTime")
          .addEventListener("change", saveOrderDetails);
        document
          .getElementById("orderNumber")
          .addEventListener("change", saveOrderDetails);
        displayOrderInfo();
      });

      // שמירת פרטי ההזמנה ב-Local Storage
      function saveOrderDetails() {
        const orderNumber = document.getElementById("orderNumber").value;
        const orderDate = document.getElementById("orderDate").value;
        const orderTime = document.getElementById("orderTime").value;
        const temperature = document.getElementById("temperature").value; // שמירת מצב חם/קר
        localStorage.setItem("orderNumber", orderNumber);
        localStorage.setItem("orderDate", orderDate);
        localStorage.setItem("orderTime", orderTime);
        localStorage.setItem("temperature", temperature); // שמירת בחירה של חם/קר

        // שמירת רשימות המוצרים
        ["kitchen", "bakery", "online", "warehouse"].forEach((category) => {
          const items = Array.from(
            document.getElementById(`${category}List`).children
          ).map((li) => li.firstElementChild.textContent);
          localStorage.setItem(`${category}Items`, JSON.stringify(items));
        });

        displayOrderInfo();
      }
      function loadSavedOrder() {
        displayOrderInfo();

        ["kitchen", "bakery", "online", "amar", "warehouse"].forEach((category) => {
          const items = JSON.parse(
            localStorage.getItem(`${category}Items`) || "[]"
          );
          const list = document.getElementById(`${category}List`);
          list.innerHTML = "";
          items.forEach((item) => {
            const li = document.createElement("li");
            li.innerHTML = `
                        <span>${item}</span>
                        <button class="delete-btn" onclick="removeProduct(this, '${category}')">מחק</button>
                    `;
            list.appendChild(li);
          });
        });
      }

      function cleanInput(input) {
    return input.trim();
}
      
      // קריאה לפונקציית הטעינה בעת טעינת הדף
      document.addEventListener("DOMContentLoaded", loadSavedOrder);

      // הצגת פרטי ההזמנה על המסך
      function displayOrderInfo() {
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderTime = localStorage.getItem("orderTime") || "";
        const temperature = localStorage.getItem("temperature") || ""; // הצגת חם/קר
        const formattedDate = orderDate ? formatDateToDDMMYYYY(orderDate) : "תאריך לא תקין";
        document.getElementById("orderInfo").innerHTML = `<strong>הזמנה מס: ${orderNumber}</strong><br>
                <strong>לתאריך: ${formattedDate}</strong><br>
                <strong>לשעה: ${orderTime}</strong>`;
        
        document.getElementById("notesSummary").textContent = temperature ? `''${temperature}''` : '';
      }

      function extractBreadDetails(text) {
    const matches = text.match(/\((\d+)\s*יחי'\)\s*(ביס\s*\w+)/);
    if (matches) {
        return {
            quantity: matches[1],
            breadType: matches[2]
        };
    }
    return null;
}

function calculateTotalCorassonQuantity() {
    const allLists = document.querySelectorAll("#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li");
    let totalQuantity = 0;

    allLists.forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/\d+/)[0];
            if (productCode === "12626") {
                const itemText = item.querySelector("span").textContent;
                const match = itemText.match(/(\d+)\s*מגש.*?\((\d+)\s*יחי'/);
                if (match) {
                    const trays = parseInt(match[1]);
                    const unitsPerTray = parseInt(match[2]);
                    totalQuantity += trays * unitsPerTray;
                }
            }
        }
    });

    return totalQuantity;
}


function copyAmarSummary() {
    const amarList = document.getElementById("amarList");
    const orderDate = new Date(document.getElementById("orderDate").value);
    const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
    const dayName = days[orderDate.getDay()];
    const orderTime = document.getElementById("orderTime").value;
    
    // התחלת הסיכום
    let summary = `*ליום ${dayName} עד השעה: ${orderTime}*\n\n`;
    
    // חישוב כמות הקרואסונים, ג'בטה וגריסיני
    let corassonTotal = 0;
    let jabettaTotal = 0;
    let grisiniTotal = 0;
    let focacciaTotal = 0;
    let bakeryTotal = 0; // משתנה חדש למאפי בוקר
    let finukimTotal = 0; // משתנה חדש לבורקסים

    
    const allLists = document.querySelectorAll("#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li");
    
    // בדיקה אם יש מוצרים מקונדיטוריית עמר
    let hasAmarProducts = false;
    const amarProductCodes = ["12626", "12408", "12409", "12622", "12624", "13473", "410", "415"]; // מוצרים רגילים של עמר + מגש מאפי פינוקים
  
    // בדיקה אם יש מוצרים ששייכים לעמר
    allLists.forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (amarProductCodes.includes(productCode) || bisProducts.includes(productCode)) {
                hasAmarProducts = true;
            }
        }
    });

    // בדיקה אם יש מוצרים בכלל
    if (!hasAmarProducts && amarList.children.length === 0) {
        showNotification("אין מוצרי קונדיטוריית עמר בהזמנה.", "red");
        return;
    }

    // קודם כל מחשב את הקרואסונים והג'בטה
    // חישוב הכמויות
    
    const corassonCodes = ["12626", "410", "415"];

    // --- חישוב קרואסונים ---
    allLists.forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            const itemText = item.querySelector("span").textContent;

            if (corassonCodes.includes(productCode)) {
                // חפש גם 15 וגם 20 יחי'
                let match = itemText.match(/(\d+)\s*מגש.*?\((\d+)\s*יחי'?/);
                if (match) {
                    const trays = parseInt(match[1]);
                    const unitsPerTray = parseInt(match[2]);
                    corassonTotal += trays * unitsPerTray;
                } else {
                    // אם לא מצא, ברירת מחדל 15 יחי'
                    match = itemText.match(/(\d+)\s*מגש/);
                    if (match) {
                        const trays = parseInt(match[1]);
                        corassonTotal += trays * 15;
                    }
                }
            } else if (productCode === "12409") {
                const match = itemText.match(/(\d+)\s*מגש.*?\((\d+)\s*יחי'/);
                if (match) {
                    const trays = parseInt(match[1]);
                    const unitsPerTray = parseInt(match[2]);
                    jabettaTotal += trays * unitsPerTray;
                }
            } else if (productCode === "12408") {
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    const trays = parseInt(match[1]);
                    grisiniTotal += trays * 13;
                }
            } else if (productCode === "12622") {
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    const trays = parseInt(match[1]);
                    focacciaTotal += trays * 8;
                }
            } else if (productCode === "12624") {
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    const trays = parseInt(match[1]);
                    bakeryTotal += trays * 9;
                }
            } else if (productCode === "13473") {
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    const trays = parseInt(match[1]);
                    finukimTotal += trays * 20;
                }
            }
        }
    });
    // מוסיף את הקוראסונים לסיכום אם יש
    if (corassonTotal > 0) {
        summary += `● ${corassonTotal} קרואסון מיני\n\n`;
    }
    // מוסיף את הג'בטה לסיכום אם יש
    if (jabettaTotal > 0) {
        summary += `● ${jabettaTotal} ג'בטה מיני\n\n`;
    }
    // מוסיף את הגריסיני לסיכום אם יש
    if (grisiniTotal > 0) {
        summary += `● ${grisiniTotal} מקלות גריסני\n\n`;
    }

    // מוסיף את הפוקאצ'ות לסיכום אם יש
    if (focacciaTotal > 0) {
        summary += `● ${focacciaTotal} פוקאצות מ4 סוגים\n\n`;
    }
 // מוסיף את מאפי הבוקר לסיכום אם יש
 if (bakeryTotal > 0) {
        summary += `● ${bakeryTotal} יח' מאפי בוקר טריים של הבייקרי\n\n`;
    }
    // --- הוספת סיכום בורקס משולש עם תפו"א ---
    if (finukimTotal > 0) {
        summary += `● ${finukimTotal} בורקס תפו''א משולש מיני \n\n`;
    }
    window.finukimTotal = 0; // איפוס למניעת הצטברות בין קריאות

    
    // המשך הקוד הקיים...
    const items = amarList.getElementsByTagName("li");
    for (const item of items) {
    let itemText = item.querySelector("span").textContent;
    // מסיר את |BREAD_TYPE:...|
    itemText = itemText.replace(/\|BREAD_TYPE:ביס (שומשום|בריוש|קמח מלא|דגנים|פרג|שחור|אדום-סלק|בריוש מלבן)\|/g, '').trim();
    summary += `● ${itemText}\n\n`;
}

    // אובייקט לאחסון סיכום הכמויות לפי סוג ביס
    const bisTypeTotals = {};

    // בדיקה אם יש מוצרי ביס
    // נוסיף גם את amarList ללולאה
    const allBisLists = [
        ...document.querySelectorAll("#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li"),
        ...amarList.getElementsByTagName("li")
    ];
    allBisLists.forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (bisProducts.includes(productCode)) {
                // קח את הטקסט המקורי מה־data-attribute
                const itemText = item.getAttribute('data-raw-summary') || item.querySelector("span").textContent;
                const quantityMatch = itemText.match(/(\d+)\s*מגש.*?\((\d+)\s*יחי'\)/);
                const breadTypeMatch = itemText.match(/\|BREAD_TYPE:(ביס (שומשום|בריוש|קמח מלא|דגנים|פרג|שחור|אדום-סלק|בריוש מלבן))\|/);
                if (quantityMatch && breadTypeMatch) {
                    const numTrays = parseInt(quantityMatch[1]);
                    const unitsPerTray = parseInt(quantityMatch[2]);
                    const totalUnits = numTrays * unitsPerTray;
                    const breadType = breadTypeMatch[1];
                    if (bisTypeTotals[breadType]) {
                        bisTypeTotals[breadType] += totalUnits;
                    } else {
                        bisTypeTotals[breadType] = totalUnits;
                    }
                }
            }
        }
    });
    
    // הוספת סיכום הביסים המאוחד
    Object.entries(bisTypeTotals).forEach(([breadType, total]) => {
        summary += `● ${total} ${breadType}\n\n`;
    });
    
    // הוספת מספר ההזמנה עם הדגשה לוואטסאפ
    const orderNumber = document.getElementById("orderNumber").value;
    summary += `(הזמנה מס' *${orderNumber}*)`;

    // העתקה ללוח
    navigator.clipboard.writeText(summary).then(() => {
        showNotification("סיכום קונדיטוריית עמר הועתק בהצלחה!", "green");
    }).catch(() => {
        showNotification("שגיאה בהעתקת הסיכום", "red");
    });
}


      function copyFruitSummary() {
    const orderNumber = localStorage.getItem("orderNumber") || "";
    const orderDate = localStorage.getItem("orderDate") || "";
    const formattedDate = orderDate ? formatDateToDDMMYYYY(orderDate) : "";
    const orderDay = getDayOfWeek(orderDate);
    const orderTime = document.getElementById("orderTime").value;
    
    const fruitItems = getFruitItems().map(item => {
        const match = item.match(/(\d+)\s+מגש.*?\((.*?)\)/);
        if (match) {
            const [_, quantity, size] = match;
            return `${quantity} מגש פירות *${size}*`;
        }
        return item;
    });

    // הוספת סיכום עבור המקט החדש
    const totalFruitTrays = calculateTotalFruitTrays(); // פונקציה חדשה לחישוב מגשים
    if (totalFruitTrays > 0) {
        fruitItems.push(`${totalFruitTrays} מגש פירות העונה בכוסות *5 סוגים שונים סה''כ 15 כוסות במגש*`);
    }

    if (fruitItems.length > 0) {
        const fruitSummary = `*ליום ${orderDay} עד השעה: ${orderTime}*\n\n${fruitItems.join('\n')}\n\n(הזמנה מס' *${orderNumber})*`;
        
        navigator.clipboard.writeText(fruitSummary.trim())
            .then(() => {
                showCopyNotification("סיכום פירות הועתק בהצלחה!");
            })
            .catch((err) => {
                console.error("שגיאה בהעתקה:", err);
                showCopyNotification("שגיאה בהעתקת סיכום פירות.", true);
            });
    } else {
        showNotification("אין מגשי פירות בהזמנה.", "red");
    }
}

// פונקציה חדשה לחישוב כמות המגשים של המקט החדש
function calculateTotalFruitTrays() {
    const fruitList = document.getElementById("onlineList");
    let totalQuantity = 0;

    Array.from(fruitList.children).forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "13461") {
                const itemText = item.querySelector("span").textContent;
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    totalQuantity += parseInt(match[1]);
                }
            }
        }
    });

    return totalQuantity;
}


// פונקציה לקבלת רשימת מגשי הפירות בסיכום
function getFruitItems() {
  const fruitCodes = ["12113", "12457"]; // מק"ט של מגשי הפירות
    const fruitItems = [];

    const lists = ["kitchenList", "bakeryList", "onlineList", "warehouseList"];


    lists.forEach(listId => {
        const list = document.getElementById(listId);
        if (!list) return;
        
        Array.from(list.children).forEach(item => {
            const itemText = item.querySelector('.product-code')?.textContent;
            if (itemText) {
                const code = itemText.match(/מק"ט: (\d+)/)?.[1];
                if (fruitCodes.includes(code)) {
                    fruitItems.push(item.querySelector('span').textContent);
                }
            }
        });
    });
    return fruitItems;
}
     
      // פונקציה לקבלת היום בשבוע מתאריך
      function getDayOfWeek(dateString) {
        const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
        const date = new Date(dateString);
        return days[date.getDay()];
      }

      function copyWarehouseSummary() {
    const warehouseList = document.getElementById("warehouseList");
    const orderDate = new Date(document.getElementById("orderDate").value);
    const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
    const dayName = days[orderDate.getDay()];
    const orderTime = document.getElementById("orderTime").value;

    // התחלת הסיכום
    let summary = `*ליום ${dayName} עד השעה: ${orderTime}*\nמארי\n\n`;
    
    // סיכום של כל הכמויות
    let pranutTotal = 0;
    let warehouseItemsSummary = [];

    // מקבל את כל הפריטים ברשימת המחסן
    const warehouseItems = Array.from(warehouseList.children);

    // חישוב הכמויות מהמחסן
    warehouseItems.forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        const itemText = item.querySelector("span").textContent;
        if (productCodeElement) {
            warehouseItemsSummary.push(itemText.replace(/\(מק"ט: \d+\)/g, '').trim());
        }
    });

    // חישוב כמות הפרנות ממגש ניגוב למתקדמים
    const kitchenList = document.getElementById("kitchenList");
    const kitchenItems = Array.from(kitchenList.children);
    kitchenItems.forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "12602") {
                const itemText = item.querySelector("span").textContent;
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    const trays = parseInt(match[1]);
                    pranutTotal += trays * 6; // כל מגש = 5 פרנות
                }
            }
        }
    });

    // בדיקה אם יש מוצרים במחסן או פרנות
    if (warehouseItemsSummary.length === 0 && pranutTotal === 0) {
      
        showNotification("אין מוצרים במחסן.", "red");
        return;
        
    }

    
    // הוספת פרטי המוצרים מהמחסן לסיכום
    if (warehouseItemsSummary.length > 0) {
        summary += `${warehouseItemsSummary.join("\n")}\n\n`;
    }

    // הוספת סיכום הפרנות אם יש
    if (pranutTotal > 0) {
        summary += `${pranutTotal} יח' פרנה מיני\n\n`;
    }

    // הוספת מספר ההזמנה לסיכום
    const orderNumber = document.getElementById("orderNumber").value;
    summary += `(הזמנה מס' *${orderNumber}*)`;

    // העתקת הסיכום ללוח
    navigator.clipboard.writeText(summary.trim())
        .then(() => {
            showCopyNotification("סיכום מחסן הועתק בהצלחה!");
        })
        .catch((err) => {
            console.error("שגיאה בהעתקה:", err);
            showCopyNotification("שגיאה בהעתקת סיכום מחסן.", true);
        });
}

function copySushiSummary() {
    const orderNumber = localStorage.getItem("orderNumber") || "";
    const orderDate = localStorage.getItem("orderDate") || "";
    const orderDay = getDayOfWeek(orderDate);
    const orderTime = document.getElementById("orderTime").value;
  
    // מקבל את כל פריטי הסושי
    const sushiItems = Array.from(document.getElementById("sushiList").children)
        .map(li => li.firstElementChild.textContent.replace(/\(מק"ט: \d+\)/g, '').trim());

    if (sushiItems.length > 0) {
        const sushiSummary = `היי @\n
אשמח לקבל

${sushiItems.map(item => `● ${item}`).join('\n\n')}

שיגיע אליי *ביום ${orderDay}* עד השעה: *${orderTime}*

(הזמנה מס' *${orderNumber}*)`;
        

        navigator.clipboard.writeText(sushiSummary.trim())
            .then(() => {
                showCopyNotification("סיכום סושי הועתק בהצלחה!");
            })
            .catch((err) => {
                console.error("שגיאה בהעתקה:", err);
                showCopyNotification("שגיאה בהעתקת סיכום סושי.", true);
            });
    } else {
        showNotification("אין פריטי סושי בהזמנה.", "red");
    }
}

      function toggleQuantitySize() {
    const quantityDiv = document.getElementById("quantityDiv");
    const sizeDiv = document.getElementById("sizeDiv");
    const isQuantity = document.getElementById("quantityOption").checked;
    const isSize = document.getElementById("sizeOption").checked;
    const isNone = document.getElementById("noneOption").checked;

    if (isQuantity) {
        quantityDiv.style.display = "block";
        sizeDiv.style.display = "none";
    } else if (isSize) {
        quantityDiv.style.display = "none";
        sizeDiv.style.display = "block";
    } else { // isNone
        quantityDiv.style.display = "none";
        sizeDiv.style.display = "none";
    }
}
      // פונקציה לפורמט התאריך DD/MM/YYYY
      function formatDateToDDMMYYYY(dateString) {
        const date = new Date(dateString);
        const day = String(date.getDate()).padStart(2, "0");
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
      }

// רשימת המק"טים של הביסים
const bisProducts = ['12628', '12617', '12627', '16331', '12618', '12616'];

// פונקציה לבדוק אם יש צורך להציג את תיבת סוג הלחם
function checkBisProduct(productCode) {
    const breadTypeDiv = document.getElementById('breadTypeDiv');
    if (bisProducts.includes(productCode)) {
        breadTypeDiv.style.display = 'block';
    } else {
        breadTypeDiv.style.display = 'none';
    }
}



// הוספת מאזין אירועים לשדה המק"ט
const productCodeInput = document.getElementById('productCode');

// מאזין לאירוע input
productCodeInput.addEventListener('input', function(e) {
    const code = e.target.value.trim(); // קבלת הקלט והסרת רווחים
    checkBisProduct(code); // בדיקת הצגת תיבת סוג הלחם
});



// מאזין לאירוע paste
productCodeInput.addEventListener('paste', function(e) {
    setTimeout(() => {
        const code = e.target.value.trim(); // קבלת הקלט לאחר ההדבקה
        checkBisProduct(code); // בדיקת הצגת תיבת סוג הלחם
    }, 0); // שימוש ב-setTimeout כדי להמתין להדבקה
});

// הוספת מאזין אירועים לשדה המק"ט
document.getElementById('productCode').addEventListener('input', function(e) {
    const code = e.target.value.trim(); // קבלת הקלט והסרת רווחים
    checkBisProduct(code); // בדיקת הצגת תיבת סוג הלחם
});

// קריאה לפונקציית checkBisProduct בעת טעינת הדף
document.addEventListener("DOMContentLoaded", function() {
    checkBisProduct(''); // בדוק אם יש צורך להציג את תיבת סוג הלחם עם ערך ריק
});

// הוספת מאזין אירועים לשדה המק"ט
document.getElementById('productCode').addEventListener('input', function(e) {
    checkBisProduct(e.target.value); // בדיקת הצגת תיבת סוג הלחם
});

// עדכון פונקציית copyProductCode מהחיפוש
function copyProductCode() {
    const productCode = document.getElementById('productCode').value; // קבלת המק"ט מהתיבה
    navigator.clipboard.writeText(productCode).then(() => {
        showNotification("המק''ט הועתק ללוח!", "green");
    }).catch(err => {
        console.error('Failed to copy: ', err);
        showNotification("לא הצלחנו להעתיק ללוח", "red");
    });

    // לא מדביקים את המק"ט לתיבת הקלט
    // אין צורך לשנות את תיבת הקלט
}

// הוספת מאזין אירועים לשדה המק"ט
document.getElementById('productCode').addEventListener('input', function(e) {
    checkBisProduct(e.target.value); // בדיקת הצגת תיבת סוג הלחם
});

// עדכון פונקציית addProduct
function addProduct() {
    if (!validateOrderDate()) {
        return;
    }
    const productCode = cleanInput(document.getElementById("productCode").value);
    const note = document.getElementById("productNote").value;

    // הוספת בדיקה אם המק"ט קיים או אם לא הוזן מק"ט
    if (!productCode || !productData[productCode]) {
        showNotification("המק''ט לא נמצא במערכת", "red");
        return; // יציאה מהפונקציה
    }

    const isQuantity = document.getElementById("quantityOption").checked;
    const isSize = document.getElementById("sizeOption").checked;
    const breadType = document.getElementById("breadType").value;
    
    let finalNote = note;
    if (bisProducts.includes(productCode)) {
    finalNote = (breadType ? `|BREAD_TYPE:${breadType}|` : '') + (note ? ` ${note}` : '');
}

    if (productData[productCode]) {
        const product = productData[productCode];
        const trayQuantity = document.getElementById("productQuantity").value;

        let productSummary;
        if (isQuantity) {
            const unitQuantity = document.getElementById("unitQuantity").value;
            const unitType = document.getElementById("unitType").value;
            productSummary = `${trayQuantity} ${product.name} (${unitQuantity} ${unitType}) ${finalNote ? ` ${finalNote}` : ''}`;
        } else if (isSize) {
            const productSize = document.getElementById("productSize").value;
            const sizeText = productSize === "medium" ? "בינוני" : "גדול";
            productSummary = `${trayQuantity} ${product.name} (${sizeText}) ${finalNote ? ` ${finalNote}` : ''}`;
        } else {
            productSummary = `${trayQuantity} ${product.name} ${finalNote ? ` ${finalNote}` : ''}`;
        }
        
        const rawSummary = productSummary; // עם BREAD_TYPE
        const displaySummary = productSummary.replace(/\|BREAD_TYPE:(ביס (שומשום|בריוש|קמח מלא|דגנים|פרג|שחור|אדום-סלק|בריוש מלבן))\|/g, ' $1');


        

        
        const listItem = document.createElement("li");
        listItem.innerHTML = `
            <span>${displaySummary}</span>
            <div class="item-actions">
                <span class="product-code">מק"ט: ${productCode}</span>
                <button type="button" class="edit-btn" onclick="openEditPopup(this, '${product.category}')" title="ערוך פריט">
                    <span class="material-icons">edit</span>
                </button>
                <button class="delete-btn" onclick="removeProduct(this, '${product.category}')">מחק</button>
            </div>
        `;
        // שמור את הטקסט הגולמי ב־data-attribute
        listItem.setAttribute('data-raw-summary', rawSummary);
        const listId = `${product.category}List`;
        document.getElementById(listId).appendChild(listItem);

        showNotification("נוסף בהצלחה להזמנה!", "blue");
        saveOrderDetails();
        resetFields();

        // הוספת קריאה לבדוק אם יש צורך להציג את תיבת סוג הלחם
        checkBisProduct(productCode); // בדיקת הצגת תיבת סוג הלחם
    } else {
        showNotification("אין מס מקט כזה במערכת.", "red");
    }

  

// ... existing code ...



// ... existing code ...

     saveOrderDetails();
        resetFields();
        setTimeout(() => {
          notification.style.display = "none";
        }, 3000);
      }

      // פונקציה חדשה להסרת מוצר
    // ... existing code ...
function removeProduct(button, category) {
    // מוצאים את אלמנט ה-li הקרוב ביותר לכפתור המחיקה
    const listItem = button.closest('li');
    if (listItem) {
        document.getElementById(`${category}List`).removeChild(listItem);
        saveOrderDetails();
    }
}
// ... existing code ...

      // איפוס שדות לאחר הוספת מוצר
      function resetFields() {
    document.getElementById("productCode").value = "";
    document.getElementById("productQuantity").value = "1";
    document.getElementById("productNote").value = "";
    document.getElementById("breadTypeDiv").style.display = "none";

        document.getElementById("searchInput").value = "";
    document.getElementById("searchResults").innerHTML = "";
    // איפוס ובחירת אפשרות הכמות
    document.getElementById("quantityOption").checked = true;
    document.getElementById("sizeOption").checked = false;
    document.getElementById("noneOption").checked = false;
    // הצגת שדה הכמות והסתרת שדה הגודל
    document.getElementById("quantityDiv").style.display = "block";
    document.getElementById("sizeDiv").style.display = "none";
    toggleQuantitySize();



    const existingList = document.getElementById('quantityOptionsList');
    const existingButton = document.querySelector('.quantity-toggle-btn');
    const quantityInput = document.getElementById('unitQuantity');
    
    if (existingList) existingList.remove();
    if (existingButton) existingButton.remove();


    resetInputStyles(); // Ensure styles are reset when starting a new order
      updateSelectedRadio();
    // איפוס ערכי הכמות
    document.getElementById("unitQuantity").value = "20";
    document.getElementById("unitType").value = "יחי'";


    // איפוס ערך הגודל
    document.getElementById("productSize").value = "medium";
}

// הוספת אימות קלט בסיסי
function validateInput(input) {
    return input.replace(/[<>]/g, ''); // מניעת XSS בסיסית
}
      // הוספת מוצר לרשימת הקטגוריות
      function addToCategoryList(category, productSummary) {
        const categoryList = document.getElementById(category + "List");
        const listItem = document.createElement("li");
        listItem.textContent = productSummary;
        categoryList.appendChild(listItem);
      }

      // אתחול הזמנה חדשה
      function newOrder() {
        localStorage.clear();
        document.getElementById("orderInfo").textContent = "";
        document.getElementById("kitchenList").innerHTML = "";
        document.getElementById("bakeryList").innerHTML = "";
        document.getElementById("onlineList").innerHTML = "";
        document.getElementById("warehouseList").innerHTML = "";
        document.getElementById("amarList").innerHTML = "";
        document.getElementById("sushiList").innerHTML = "";
        document.getElementById("notesSummary").innerHTML = "";
        document.getElementById("temperature").value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("searchInput").value = "";
    document.getElementById("searchResults").innerHTML = "";
    document.getElementById('breadTypeDiv').style.display = 'none'; // הסתרת תיבת סוגי הלחם

    const existingList = document.getElementById('quantityOptionsList');
    const existingButton = document.querySelector('.quantity-toggle-btn');
    const quantityInput = document.getElementById('unitQuantity');
    
    if (existingList) existingList.remove();
    if (existingButton) existingButton.remove();



        resetInputFields();
        document.getElementById("quantityOption").checked = true;
        document.getElementById("sizeOption").checked = false;
        document.getElementById("noneOption").checked = false;

        // הצגת שדה הכמות והסתרת שדה הגודל
        document.getElementById("quantityDiv").style.display = "block";
        document.getElementById("sizeDiv").style.display = "none";
        toggleQuantitySize();
        
        updateSelectedRadio();
        // Reset radio button styles and selection
        resetInputStyles();
        document.getElementById("quantityOption").checked = true; // Set default to "לפי כמות"

        // הצגת ההודעה
        const notification = document.getElementById("orderNotification");
        notification.style.display = "block"; // הצגת ההודעה
        setTimeout(() => {
            notification.style.display = "none"; // הסתרת ההודעה לאחר 3 שניות
        }, 3000);
    }

      // איפוס שדות קלט
      function resetInputFields() {
        document.getElementById("orderNumber").value = "";
        document.getElementById("notesSummary").value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("searchInput").value = "";
    document.getElementById("searchResults").innerHTML = "";
        document.getElementById("orderDate").value = "";
        document.getElementById("orderTime").value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("productQuantity").value = 1;
        document.getElementById("unitQuantity").value = 20;
        document.getElementById("productSize").selectedIndex = 0;
        document.getElementById("unitType").value = "יחי'";
         const existingList = document.getElementById('quantityOptionsList');
    const existingButton = document.querySelector('.quantity-toggle-btn');
    const quantityInput = document.getElementById('unitQuantity');
        
    if (existingList) existingList.remove();
    if (existingButton) existingButton.remove();
        
        
      resetInputStyles();
      updateSelectedRadio();
      }

      // העתקת סיכום ההזמנה ל-WA
      function copySummary() {
    const orderNumber = localStorage.getItem("orderNumber") || "";
    const orderDate = localStorage.getItem("orderDate") || "";
    const orderTime = localStorage.getItem("orderTime") || "";
    const temperature = localStorage.getItem("temperature") || "";
    const formattedDate = orderDate ? formatDateToDDMMYYYY(orderDate) : "";

    // בדוק אם יש מוצרים בסיכום ההזמנה
    const hasProducts = ["kitchen", "bakery", "online", "warehouse"].some((category) => {
        return document.getElementById(`${category}List`).children.length > 0;
    });

    if (!hasProducts) {
        showNotification("אין מוצרים בסיכום ההזמנה.", "red"); // הודעת שגיאה
        return; // יציאה מהפונקציה אם אין מוצרים
    }

    let summary = `*הזמנה מס: ${orderNumber}*\n*תאריך: ${formattedDate}*\n*שעה: ${orderTime}*\n\n`;

    // רשימת הקטגוריות שיכללו בסיכום הכללי
    ["kitchen", "bakery", "online", "warehouse"].forEach((category) => {
      const categoryItems = Array.from(document.getElementById(`${category}List`).children)
    .map((li) => {
        let text = li.firstElementChild.textContent;
        text = text.replace(/\(מק"ט: \d+\)/g, '')
                   .replace(/\|BREAD_TYPE:(ביס (שומשום|בריוש|קמח מלא|דגנים|פרג|שחור|אדום-סלק|בריוש מלבן))\|/g, ' $1')
                   .trim();
        return text;
    })
    .filter((text) => text.trim() !== "");

            if (categoryItems.length > 0) {
            const categoryTitle = getCategoryTitle(category);
            summary += `*${categoryTitle}:*\n${categoryItems.join("\n\n")}\n\n`;
        }
    });
    if (temperature) {
        summary += `*הערות:* *"${temperature}"*\n`;
    }

    navigator.clipboard.writeText(summary.trim())
        .then(() => {
            showCopyNotification("סיכום ההזמנה הועתק בהצלחה!");
        })
        .catch((err) => {
            console.error("שגיאה בהעתקה:", err);
            showCopyNotification("שגיאה בהעתקת הסיכום.", true);
        });
}

      function showCopyNotification(message, isError = false) {
        const notification = document.getElementById("copy-notification");
        notification.textContent = message;
        notification.style.backgroundColor = isError ? "#f8d7da" : "#d4edda"; // שינוי צבע בהתאם לסוג ההודעה
        notification.style.display = "block";

        setTimeout(function () {
          notification.style.display = "none";
        }, 3000); // ההודעה תיעלם אחרי 3 שניות
      }

      function getCategoryTitle(category) {
        switch (category) {
          case "kitchen":
            return "מטבח";
          case "bakery":
            return "קונדיטוריה";
          case "online":
            return "אונליין";
          case "warehouse":
            return "מחסן";
          default:
            return category;
        }
      }

      // החלפת תצוגת שדות על פי בחירה
      document
        .getElementById("quantityOption")
        .addEventListener("change", function () {
          document.getElementById("quantityDiv").style.display = "block";
          document.getElementById("sizeDiv").style.display = "none";
        });

      document
        .getElementById("sizeOption")
        .addEventListener("change", function () {
          document.getElementById("sizeDiv").style.display = "block";
          document.getElementById("quantityDiv").style.display = "none";
        });

      // נסיון של חיפוש
      // רשימת מוצרים
      const products = [
        {
          code: "12457",
          name: "מגש אירוח פירות העונה",
          sizes: [
            { size: "גדול", price: 205 },
            { size: "בינוני", price: 139 },
          ],
        },
        {
          code: "12113",
          name: "מגש פירות עונה טריים",
          sizes: [
            { size: "גדול", price: 205 },
            { size: "בינוני", price: 139 },
          ],
        },
        {
          code: "12493",
          name: "מגש mix טארטלטים",
          sizes: [
            { size: "24 יחי", price: 216 },
          ],
        },
        {
          code: "12486",
          name: "מגש מיני לימונשלי",
          sizes: [
            { size: "21 כוסות", price: 189 },
            { size: "35 כוסות", price: 315 },
          ],
        },
        {
          code: "12459",
          name: "מגש פירות יבשים",
          sizes: [
            { size: "בינוני", price: 160 },
          ],
        },
        {
          code: "12907",
          name: "מגש mix בשרים בעישון שלנו",
          sizes: [
            { size: "גדול", price: 375 },
            { size: "בינוני", price: 240 },
          ],
        },
        {
          code: "12620",
          name: "מגש ממולאים מטוגנים + רטבים",
          sizes: [
            { size: "", price: 125 },
          ],
        },
        {
          code: "12330",
          name: "מגש קבבוני טלה",
          sizes: [
            { size: "גדול", price: 270 },
            { size: "בינוני", price: 185 },
          ],
        },
        {
          code: "12418",
          name: "מגש שיפודי סאטה פרגית בטמפורת חמאת בוטנים",
          sizes: [
          { size: "12 יחי", price: 255 },
          { size: "20 יחי", price: 425 },
          ],
        },
        {
          code: "12482",
          name: "מגש mix אקלרים",
          sizes: [
            { size: "גדול", price: 235 },
          ],
        },
        {
          code: "12405",
          name: "מגש מיני קיש ירקות",
          sizes: [
          { size: "10 יחי", price: 115 },
          { size: "15 יחי", price: 175 },
          ],
        },
        {
          code: "12450",
          name: "מגש ירקות חתוכים",
          sizes: [
            { size: "גדול", price: 135 },
            { size: "בינוני", price: 95 },
          ],
        },
        {
          code: "12404",
          name: "מגש דגים מעושנים",
          sizes: [
            { size: "גדול", price: 295 },
            { size: "בינוני", price: 195 },
          ],
        },
        {
          code: "12484",
          name: "מגש מיני טריקולו",
          sizes: [
          { size: "21 כוסות", price: 189 },
          { size: "35 כוסות", price: 315 },
          ],
        },
        {
          code: "12464",
          name: "מגש שיפודי אנטיפסטי",
          sizes: [
          { size: "10 יחי", price: 125 },
          { size: "15 יחי", price: 190 },
          ],
        },
        {
          code: "12490",
          name: "מגש מקרונים מצרפת",
          sizes: [
            { size: "בינוני", price: 192 },
          ],
        },
        {
          code: "12409",
          name: "מגש סביח בג'בטה",
          sizes: [
            { size: "15 יחי", price: 180 },
          ],
        },
        {
          code: "12628",
          name: "מגש כריכוני טונה",
          sizes: [
          { size: "12 יחי", price: 170 },
          { size: "20 יחי", price: 285 },
          ],
        },
        {
          code: "12622",
          name: "מגש פוקאצ'ות הבית + מטבלים",
          sizes: [
            { size: "גדול", price: 115 },
          ],
        },
        {
          code: "12406",
          name: "מגש מיני מאפה ירקות בסגנון סצ'ואן",
          sizes: [
          { size: "12 יחי", price: 148 },
          { size: "20 יחי", price: 260 },
          ],
        },
        {
          code: "12407",
          name: "מגש אצבעות אמנון בבצק בירה",
          sizes: [
            { size: "גדול", price: 205 },
            { size: "בינוני", price: 118 },
          ],
        },
        {
          code: "12626",
          name: "מגש סמוק סלמון בקרואסון",
          sizes: [
          { size: "9 יחי", price: 162 },
          { size: "15 יחי", price: 265 },
          ],
        },
        {
          code: "16331",
          name: "מגש ביס סלט אבוקדו וביצה",
          sizes: [
          { size: "12 יחי", price: 168 },
          { size: "20 יחי", price: 280 },
          ],
        },
        {
          code: "12627",
          name: "מגש כריכוני סלט ביצים וירקות",
          sizes: [
          { size: "12 יחי", price: 135 },
          { size: "20 יחי", price: 247 },
          ],
        },
        {
          code: "12602",
          name: "מגש ניגוב למתקדמים",
          sizes: [
            { size: "גדול", price: 149 },
          ],
        },
        {
          code: "12463",
          name: "מגש סלט פירות ופקאן בכוסות",
          sizes: [
            { size: "10 כוסות", price: 105 },
            { size: "15 כוסות", price: 162 },
          ],
        },
        {
          code: "12456",
          name: "מגש סלט עשבי תיבול וחמוציות בכוסות",
          sizes: [
          { size: "10 כוסות", price: 105 },
          { size: "15 כוסות", price: 162 },
          ],
        },

        {
          code: "12453",
          name: "מגש סלט קיסר וקרוטונים בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12460",
          name: "מגש סלט כרוב צבעוני בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12455",
          name: "מגש סלט פסטה בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12802",
          name: "מגש סלט קינואה בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12452",
          name: "מגש סלט קטניות בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12801",
          name: "מגש סלט שורשים בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12800",
          name: "מגש סלט בורמזי בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12461",
          name: "מגש סלט בורגול חגיגי בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12462",
          name: "מגש חמוצים תאילנדים בכוסות",
          sizes: [
          { size: "10 כוסות", price: 115 },
          { size: "15 כוסות", price: 172 },
          ],
        },
        {
          code: "12611",
          name: "מגש מיני רוגלך שוקולד ובורקס תפו'א",
          sizes: [
          { size: "בינוני", price: 85 },
          { size: "גדול", price: 135 },
          ],
        },
        {
          code: "12491",
          name: "מגש בראוניז",
          sizes: [
            { size: "בינוני", price: 152 },
          ],
        },
        {
          code: "12494",
          name: "מגש עוגיות של הבייקרי",
          sizes: [
          { size: "בינוני", price: 165 },
            { size: "גדול", price: 264 },
          ],
        },
        {
          code: "12451",
          name: "מגש אנטיפסטי של ירקות העונה",
          sizes: [
            { size: "בינוני", price: 95 },
            { size: "גדול", price: 135 },
          ],
        },
        {
          code: "12618",
          name: "מגש ביס חזה הודו מעושן",
          sizes: [
          { size: "12 יחי", price: 216 },
          { size: "20 יחי", price: 360 },
          ],
        },
        {
          code: "12616",
          name: "מגש ביס בריוש במילוי אסאדו",
          sizes: [
          { size: "12 יחי", price: 240 },
          { size: "20 יחי", price: 400 },
          ],
        },
        {
          code: "12621",
          name: "מגש שניצלונים בטמפורה",
          sizes: [
            { size: "גדול", price: 299 },
            { size: "בינוני", price: 189 },
          ],
        },
        {
          code: "12424",
          name: "ישיבות במשרד",
          sizes: [
            { size: "10 איש", price: 759 },
            { size: "15 איש", price: 1218 },
          ],
        },
        {
          code: "12612",
          name: "מגש עוגות בחושות",
          sizes: [
          { size: "בינוני", price: 95 },
            { size: "גדול", price: 155 },
          ],
        },
        {
          code: "12408",
          name: "מגש מקלות גריסני בסמוק סלמון ורוטב דיז׳ון",
          sizes: [
            { size: "גדול", price: 148 },
          ],
        },
        {
          code: "12481",
          name: "מגש טראפלס חלומי",
          sizes: [
            { size: "בינוני", price: 220 },
          ],
        },
        {
          code: "12487",
          name: "מגש מיני מוס אוריאו",
          sizes: [
          { size: "21 כוסות", price: 189 },
          { size: "35 כוסות", price: 315 },
          ],
        },
        {
          code: "12605",
          name: "מגש מיני פסטיה במילוי עוף מוקפץ",
          sizes: [
          { size: "12 יחי", price: 178 },
          { size: "20 יחי", price: 300 },
          ],
        },
        {
          code: "12617",
          name: "מגש ביס שניצל",
          sizes: [
          { size: "12 יחי", price: 216 },
          { size: "20 יחי", price: 360 },
          ],
        },
        {
          code: "12600",
          name: "מגש חיתוכיות של הבייקרי",
          sizes: [
          { size: "בינוני", price: 225 },
          ],
        },
        {
          code: "12417",
          name: "מגש כדורים יפניים + רוטב סאצ׳ואן",
          sizes: [
          { size: "בינוני", price: 195 },
            { size: "גדול", price: 269 },
          ],
        },
        {
          code: "12488",
          name: "מגש מיני מוס שוקולד",
          sizes: [
          { size: "21 כוסות", price: 189 },
          { size: "35 כוסות", price: 315 },
          ],
        },
        {
          code: "12619",
          name: "מגש רוסטביף מהמעשנה",
          sizes: [
          { size: "בינוני", price: 215 },
            { size: "גדול", price: 315 },
          ],
        },
        {
          code: "12127",
          name: "מגש כוסות צבעוני",
          sizes: [
            { size: "גדול", price: 149 },
          ],
        },
        {
          code: "12483",
          name: "מגש מיני טירמיסו",
          sizes: [
          { size: "21 כוסות", price: 189 },
          { size: "35 כוסות", price: 315 },
          ],
        },
        {
          code: "12601",
          name: "מגש mix מיני כוסות מוס",
          sizes: [
            { size: "גדול", price: 420 },
          ],
        },
        {
          code: "12615",
          name: "חגיגה לחובבי בשר",
          sizes: [
            { size: "12 איש", price: 1514 },
            { size: "18 איש", price: 2543 },
          ],
        },
        {
          code: "12624",
          name: "מגש מאפי בוקר טריים של הבייקרי",
          sizes: [
            { size: "9 יחי'", price: 139 },
          ],
        },
        {
          code: "12489",
          name: "מגש קינדר בטארטלט",
          sizes: [
          { size: "18 יחי", price: 252 },
          { size: "24 יחי", price: 324 },
          ],
        },
        {
          code: "99110",
          name: "חלת חתן",
          sizes: [
            { size: "גדול", price: 100 },
          ],
        },
        {
          code: "42102",
          name: "פיצות",
          sizes: [
            { size: "אסאדו", price: 78 },
          ],
        },
        {
          code: "10",
          name: "בקבוק גדול קולה",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "11",
          name: "בקבוק גדול קוקה קולה",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "12",
          name: "בקבוק גדול קוקה קולה זירו",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "13",
          name: "בקבוק גדול פפסי",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "14",
          name: "בקבוק גדול פפסי מקס",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "15",
          name: "בקבוק גדול 7 אפ",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "16",
          name: "בקבוק גדול מירינדה",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "17",
          name: "בקבוק גדול סודה",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "18",
          name: "בקבוק גדול מים",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "19",
          name: "בקבוק גדול פפסי",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "20",
          name: "בקבוק קטן מים",
          sizes: [
            { size: "קטן", price: 10 },
          ],
        },
        {
          code: "21",
          name: "בקבוק גדול 7 אפ זירו",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "22",
          name: "בקבוק גדול גמפ  תות בננה",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "23",
          name: "בקבוק גדול גמפ תפוזים",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "24",
          name: "בקבוק גדול גמפ ענבים",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "24",
          name: "בקבוק גדול גמפ אשכוליות",
          sizes: [
            { size: "גדול", price: 10 },
          ],
        },
        {
          code: "39",
          name: "חד''פ רגיל סכו''ם צלחת כוס",
          sizes: [
            { size: "סכ''ום", price: 3 },
          ],
        },
        {
          code: "30",
          name: "חד''פ ריגל סכו''ם צלחת כוס",
          sizes: [
            { size: "סכ''ום", price: 3 },
          ],
        },
        {
          code: "31",
          name: "קערות לסלט",
          sizes: [
            { size: "גדול", price: 0 },
            { size: "בינוני", price: 0 },
          ],
        },
        {
          code: "32",
          name: "כפות הגשה",
          sizes: [
            { size: "גדול", price: 0 },
            { size: "בינוני", price: 0 },
          ],
        },
        {
          code: "33",
          name: "צלחות",
          sizes: [
            { size: "גדול", price: 0 },
            { size: "בינוני", price: 0 },
          ],
        },
        {
          code: "34",
          name: "כוסות",
          sizes: [
            { size: "גדול", price: 0 },
            { size: "בינוני", price: 0 },
          ],
        },
        {
          code: "35",
          name: "כפות",
          sizes: [
            { size: "גדול", price: 0 },
            { size: "בינוני", price: 0 },
          ],
        },
        {
          code: "36",
          name: "מזלגות",
          sizes: [
            { size: "גדול", price: 0 },
            { size: "בינוני", price: 0 },
          ],
        },
        {
          code: "100",
          name: "...שאר ההזמנה",
          sizes: [
          ],
        },
        {
          code: "40105",
          name: "מגש סושי קומבינציה ספייסי",
          sizes: [
            { size: "גדול", price: 135 },
          ],
        },
        {
          code: "40106",
          name: "מגש סושי קומבינציה קריספי",
          sizes: [
          { size: "גדול", price: 145 },
          ],
        },
        {
          code: "40101",
          name: "מגש סושי מסיבה גם וגם",
          sizes: [
          { size: "גדול", price: 385 },
          ],
        },
        {
          code: "40103",
          name: "מגש סושי קומבינציה Special גולד'יס",
          sizes: [
          { size: "גדול", price: 245 },
          ],
        },
        {
          code: "40102",
          name: "מגש סושי מסיבה צמחוני",
          sizes: [
          { size: "גדול", price: 345 },
          ],
        },
   {
          code: "40100",
          name: "מגש סושי מסיבה דגים",
          sizes: [
            { size: "גדול", price: 399 },
          ],
        },
        {
          code: "40108",
          name: "מגש סושי קומבינציה סלמון",
          sizes: [
            { size: "גדול", price: 210 },
          ],
        },
        {
          code: "12480",
          name: "מגש אקלר צרפתי",
          sizes: [
          { size: "12 יחי", price: 118 },
          { size: "20 יחי", price: 196 },          ],
        },
        {
          code: "11708",
          name: "ביס קוקטייל מזונות",
          sizes: [
          { size: "ליחידה", price: 2.5 },
               ],
        },
        {
          code: "22461",
          name: "לחמניה המוציא",
          sizes: [
          { size: "ליחידה", price: 3.5 },
          ],
        },
        {
          code: "11621",
          name: "טארט לימון גדול",
          sizes: [
          { size: "ליחידה", price: 88 },
          ],
        },

        {
          code: "11403",
          name: "עוגת פררו רושה",
          sizes: [
          { size: "ליחידה", price: 150 },
          ],
        }, {
          code: "11655",
          name: "עוגת מוס פיסטוק חגיגית",
          sizes: [
          { size: "ליחידה", price: 120 },
          ],
        },
         {
          code: "11654",
          name: "עוגת מוס שוקולד בלגי",
          sizes: [
          { size: "ליחידה", price: 120 },
          ],
        },
        {
          code: "11563",
          name: "עוגת יום הולדת כמו בשנות ה90",
          sizes: [
          { size: "ליחידה", price: 120 },
          ],
        },
        {
          code: "11656",
          name: "עוגת שכבות שוקולד",
          sizes: [
          { size: "ליחידה", price: 140 },
          ],
        },
        {
          code: "11620 ",
          name: "טארט שוקולד גדול",
          sizes: [
          { size: "ליחידה", price: 88 },
          ],
        },
        {
          code: "11558",
          name: "טארט תפוחי עץ גדול",
          sizes: [
          { size: "ליחידה", price: 88 },
          ],
        },
        {
          code: "11557",
          name: "טארט פקאן גדול",
          sizes: [
          { size: "ליחידה", price: 88 },
          ],
        },
        {
          code: "1246299",
          name: "ליטר חמוצים תאילנדים במרוכז",
          sizes: [
          { size: "במרוכז ליטר", price: 172 },
          ],
        },
        {
          code: "1246199",
          name: "ליטר סלט בורגול חגיגי במרוכז",
          sizes: [
          { size: "במרוכז ליטר", price: 172 },
          ],
        },
        {
          code: "1280099",
          name: "ליטר סלט בורמזי במרוכז",
          sizes: [
          { size: "במרוכז 3 ליטר", price: 172 },
          ],
        },
        {
          code: "1246399",
          name: "ליטר סלט פירות ופקאן במרוכז",
          sizes: [
          { size: "במרוכז 3 ליטר", price: 172 },
          ],
        },
        {
          code: "1245699",
          name: "ליטר סלט עשבי תיבול וחמוציות במרוכז",
          sizes: [
          { size: "במרוכז 3 ליטר", price: 172 },
          ],
        },
        {
          code: "1245399",
          name: "ליטר סלט קיסר וקרוטונים במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },
        {
          code: "1246099",
          name: "ליטר סלט כרוב צבעוני במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },
        {
          code: "1245599",
          name: "ליטר סלט פסטה במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },
        {
          code: "1280299",
          name: "ליטר סלט קינואה במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },
        {
          code: "1245299",
          name: "ליטר סלט קטניות במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },
        {
          code: "1280199",
          name: "ליטר סלט שורשים במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },


        {
          code: "4310199",
          name: "ליטר סלט ירקות ישראלי במרוכז",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },

        {
          code: "22449",
          name: "ליטר מרק ירקות כתומים",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },

        {
          code: "11119",
          name: "ליטר חומוס",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },

        {
          code: "11143",
          name: "ליטר טחינה אסלית",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },

        {
          code: "11127",
          name: "ליטר חציל מטוגן בתחמיץ",
          sizes: [
          { size: "ליטר", price: 172 },
          ],
        },
        {
          code: "10634",
          name: "ליטר צ'יפס",
          sizes: [
          { size: "במרוכז ליטר", price: 172 },
          ],
        },

        {
          code: "23164",
          name: "ליטר מטבוחה פיקנטית",
          sizes: [
          { size: "במרוכז ליטר", price: 172 },
          ],
        },
        

        {
          code: "13461",
          name: "מגש פירות העונה בכוסות 5 סוגים שונים סה''כ 15 כוסות",
          sizes: [
          { size: "15 כוסות", price: 200 },
          ],
        },
        {
          code: "0",
          name: "ריק מטבח",
          sizes: [
          { size: "", price:0 },
          ],
        },
        {
          code: "1",
          name: "ריק קונדיטוריה",
          sizes: [
          { size: "", price:0 },
          ],
        },
        {
          code: "2",
          name: "ריק אונליין",
          sizes: [
          { size: "", price:0 },
          ],
        },
        {
          code: "3",
          name: "ריק מחסן",
          sizes: [
          { size: "", price:0 },
          ],
        },
        {
          code: "4",
          name: "ריק סושי",
          sizes: [
          { size: "", price:0 },
          ],
        },
        {
          code: "5",
          name: "ריק קונדיט. עמר",
          sizes: [
          { size: "ריק", price:0 },
          ],
        },

        {
        code: "11709",
          name: "לחמנית ביס בריוש",
          sizes: [
          { size: "ליחידה", price:0 },
          ],
        },

        {
        code: "117083",
          name: "לחמנית ביס שומשום",
          sizes: [
          { size: "ליחידה", price:0 },
          ],
        },
        {
        code: "10628",
          name: "ליטר קוביות אנטיפסטי",
          sizes: [
          { size: "לליטר", price:0 },
          ],
        },
        {
        code: "10603",
          name: "ליטר אורז פטריות ובצל",
          sizes: [
          { size: "לליטר", price:0 },
          ],
        },
        {
        code: "10602",
          name: "ליטר אורז מקלובה",
          sizes: [
          { size: "לליטר", price:0 },
          ],
        },
        {
        code: "10408",
          name: "פילה סלמון בחרדל ודבש",
          sizes: [
          { size: "ליחידה", price:0 },
          ],
        },
        {
        code: "10321",
          name: "פרגית על האש",
          sizes: [
          { size: "ליחידה", price:34 },
          ],
        },
        {
        code: "10324",
          name: "שיפוד פרגית על האש",
          sizes: [
          { size: "ליחידה", price:16 },
          ],
        },

        {
        code: "10201",
          name: "צלי כתף עגל בבישול קדירה",
          sizes: [
          { size: "ליחידה", price:58 },
          ],
        },
        {
        code: "22443",
          name: "ליטר תפו''א ובטטה",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
        code: "11137",
          name: "ליטר חציל קלוי במיונז",
          sizes: [
          { size: "ליחידה", price:16 },
          ],
        },
        {
        code: "22500",
          name: "ליטר עוף סיני מוקפץ",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },

        {
        code: "10318",
          name: "ליטר עוף סיני מוקפץ",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },

        {
        code: "11167",
          name: "סלק אדום עם בצלים טריים",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
        code: "10807",
          name: "תבנית ענקית לקידוש קוגל תפו'א",
          sizes: [
          { size: "גדול", price:200 },
          ],
        },
        {
        code: "10811",
          name: "תבנית ענקית לקידוש קוגל ירושלמי",
          sizes: [
          { size: "גדול", price:200 },
          ],
        },
        {
        code: "11122",
          name: "ליטר חמוצים מנפיס",
          sizes: [
          { size: "לליטר", price:0 },
          ],
        },
        {
        code: "10801",
          name: "ליטר טשולנט בשרי",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
        code: "10803",
          name: "ליטר טשולנט מלכים",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
        code: "10800",
          name: "טשולנט פרווה",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
          code: "4310101",
          name: "מגש סלט ירקות ישראלי בכוסות",
          sizes: [
          { size: "10 כוסות", price: 0 },
          { size: "15 כוסות", price: 0 },
          ],
        },
        {
          code: "11149",
          name: "ליטר מטבוחה פיקנטית",
          sizes: [
          { size: "במרוכז ליטר", price: 172 },
          ],
        },
        {
        code: "10701",
          name: "פלפל ממולא של בית",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },
        {
        code: "11168",
          name: "ליטר סלט ערבי",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
        code: "10310",
          name: "ליטר שניצלונים בטמפורה",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },
        {
        code: "11707",
          name: "לחמניה מזונות",
          sizes: [
          { size: "יחי'", price:0 },
          ],
        },
        {
        code: "10821",
          name: "פשטידת בצל אישית",
          sizes: [
          { size: "יחי'", price:5 },
          ],
        },
        {
        code: "10822",
          name: "פשטידת פטריות אישית",
          sizes: [
          { size: "יחי'", price:5 },
          ],
        },
 {
        code: "11751",
          name: "לחם דגנים אובלי",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },
        {
        code: "11754",
          name: "לחם כפרי צרפתי",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },

        {
        code: "11105",
          name: "ליטר גזר מרוקאי אסלי",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },

        {
        code: "10623",
          name: "ליטר שעועית שלמה מוקפצת עם פטריות שמפניון",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },

        {
        code: "22467",
          name: "סופלה שוקולד",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },

        {
        code: "10350",
          name: "חזה עוף בטעמי המזרח הרחוק",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },


        {
        code: "10320",
          name: "פרגית בגריל",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },
        {
        code: "10327",
          name: "מוסקה יוונית בשרית",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },
        {
        code: "10702",
          name: "מוסקה יוונית פרווה",
          sizes: [
          { size: "יחי", price:0 },
          ],
        },
        {
        code: "11160",
          name: "ליטר טבולה עם ירקות עונה ופטרוזיליה",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },

{
        code: "11111",
          name: "ליטר פסטו עשבי תיבול",
          sizes: [
          { size: "ליטר", price:0 },
          ],
        },

        {
        code: "10315",
          name: "רבע עוף ברוטב סצ'ואן",
          sizes: [
          { size: "יחי'", price:0 },
          ],
        },
        {
        code: "12625",
          name: "מגש מיני מאפים מתוקים (25 יחי') מ 5 סוגים",
          sizes: [
          { size: "גדול", price:125 },
          ],
        },

        {
        code: "11552",
          name: "פרנות לוהטות מהטאבון",
          sizes: [
          { size: "", price:0 },
          ],
        },

        {
        code: "13480",
          name: "מגש טאקוס ונאצ'וס בהרכבה אישית",
          sizes: [
          { size: "גדול", price:289 },
          ],
        },
        {
        code: "13479",
          name: "מגש שווארמה כרובית בהרכבה אישית",
          sizes: [
          { size: "גדול", price:215 },
          ],
        },
        {
        code: "13473",
          name: "מגש בורקס פינוקים",
          sizes: [
          { size: "גדול", price:186 },
          ],
        },
        {
        code: "13475",
          name: "מגש חצילים מזן בלאדי על חם מעושן",
          sizes: [
          { size: "בינוני", price:149 },
          ],
        },
        {
        code: "13476",
          name: "מגש קרפצ'ו סלקים עונתי",
          sizes: [
          { size: "בינוני", price:149 },
          ],
        },
        {
        code: "13474",
          name: "מגש קרפצ'ו סלמון מעושן",
          sizes: [
          { size: "בינוני", price:185 },
          ],
        },
        {
        code: "13478",
          name: "מגש טורטיית סביח (צמחוני)",
          sizes: [
          { size: "בינוני", price:186 },
          ],
        },
        {
        code: "13477",
          name: "מגש טורטייה של אנטיפסטי (צמחוני)",
          sizes: [
          { size: "בינוני", price:186 },
          ],
        },


        {
          code: "410",
          name: "מגש קרואסון סלט ביצים",
          sizes: [
          { size: "15 יחי", price: 0 },
          { size: "20 יחי", price: 0 },
          ],
        },

        {
          code: "415",
          name: "מגש קרואסון סלט טונה",
          sizes: [
          { size: "15 יחי", price: 0 },
          { size: "20 יחי", price: 0 },
          ],
        },


        {
          code: "11146",
          name: "ליטר קולסלאו",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "11101",
          name: "כרעיים עוף בגריל",
          sizes: [
          { size: "ליחידה", price: 28 },
          ],
        },
        {
          code: "10307",
          name: "שניצל עוף קלאסי",
          sizes: [
          { size: "ליחידה", price: 26 },
          ],
        },
 {
          code: "111603",
          name: "מאפה פילו במילוי עוף מוקפץ",
          sizes: [
          { size: "ליחידה", price: 25 },
          ],
        }, 
        {
          code: "33302",
          name: "מוסקה פרווה",
          sizes: [
          { size: "ליחידה", price: 20 },
          ],
        },
         {
          code: "111201",
          name: "חזה עוף בגריל",
          sizes: [
          { size: "ליחידה", price: 25 },
          ],
        },
         {
          code: "312011",
          name: "תפו''א כתום",
          sizes: [
          { size: "לליטר", price: 0 },
          ],
        },
         {
          code: "316061",
          name: "אנטיפסטי ירקות קלויים",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "10600",
          name: "ליטר אורז לבן",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "11134",
          name: "ליטר חציל מרוקאי",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "22510",
          name: "ליטר תפו''א כתום",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "10632",
          name: "ליטר תפו''א צהוב",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "10309",
          name: "ליטר שניצלונים",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "10319",
          name: "ליטר מעורב ירושלמי",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "10620",
          name: "ליטר קוסקוס",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        {
          code: "10621",
          name: "ליטר ירקות לקוסקוס",
          sizes: [
          { size: "ליטר", price: 0 },
          ],
        },
        
      














        // {
        //   code: " ",
        //   name: " ",
        //   sizes: [
        //   { size: " ", price: 0 },
        //   ],
        // },


      ];

   // עדכון פונקציית searchProduct
function searchProduct() {
    const input = document.getElementById("searchInput").value.toLowerCase();
    const resultsList = document.getElementById("searchResults");
    resultsList.innerHTML = "";

    if (input.length > 0) {
        const filteredProducts = products.filter(
            (product) =>
                product.code.includes(input) || product.name.toLowerCase().includes(input)
        );

        // יצירת רשימת תוצאות
        filteredProducts.forEach((product) => {
            const li = document.createElement("li");
            const sizesInfo = product.sizes
                .map((sizeObj) => `${sizeObj.size} ${sizeObj.price} ש"ח`)
                .join(" | ");
            li.innerHTML = `${product.name} (מק"ט: ${product.code}) - ${sizesInfo}`;

            const copyButton = document.createElement("button");
            copyButton.textContent = 'העתק מס מק"ט';
            copyButton.onclick = (e) => {
                e.stopPropagation();
                copyToClipboard(product.code);
            };

            li.appendChild(copyButton);
            li.onclick = () => addToOrder(product);
            resultsList.appendChild(li);
        });
    }
}


      // פונקציה להוספת מוצר לסיכום
      function addToOrder(product) {
        const orderSummary = document.getElementById("orderSummary");
        const li = document.createElement("li");
        li.textContent = `${product.name} (מק"ט: ${product.code})`;
        orderSummary.appendChild(li);

        // נקה את שדה החיפוש ותוצאות החיפוש
        document.getElementById("searchInput").value = "";
        document.getElementById("searchResults").innerHTML = "";
      }
      function validateOrderDate() {
    const orderDate = document.getElementById("orderDate").value;
    if (!orderDate) {
        showNotification("אנא הכנס תאריך הזמנה!", "red");
        return false;
    }
    return true;
}
function showNotification(message, color) {
    const notification = document.getElementById("notification");
    notification.textContent = message;
    notification.style.color = color;
    notification.style.display = "block";

    setTimeout(() => {
        notification.style.display = "none";
    }, 3000); // ההודעה תיעלם אחרי 3 שניות
}


// פונקציה לניקוי תיבת החיפוש
function clearSearch() {
    // ניקוי החיפוש הקיים
    document.getElementById('searchInput').value = '';
    document.getElementById('searchResults').innerHTML = '';
    document.getElementById('productCode').value = '';
    
    // מנקה את האפשרויות הקיימות
    const existingList = document.getElementById('quantityOptionsList');
    const existingButton = document.querySelector('.quantity-toggle-btn');
    if (existingList) existingList.remove();
    if (existingButton) existingButton.remove();

    // קודם מסמן את כפתור "לפי כמות"
    const quantityRadio = document.getElementById('quantityOption');
    if (quantityRadio) {
        quantityRadio.checked = true;
        // מפעיל את אירוע השינוי
        quantityRadio.dispatchEvent(new Event('change'));
        
        // ממתין רגע קט לפני הגדרת הערכים
        setTimeout(() => {
            // מגדיר את ברירת המחדל ל-20 יחידות
            const quantityInput = document.getElementById('unitQuantity');
            const unitSelect = document.getElementById('unitType');
            if (quantityInput) {
                quantityInput.value = '20';
                quantityInput.dispatchEvent(new Event('change'));
            }
            if (unitSelect) {
                unitSelect.value = 'יחי\'';
                unitSelect.dispatchEvent(new Event('change'));
            }
        }, 100);
    }

    document.getElementById('breadTypeDiv').style.display = 'none';
}
// הוספת מאזין אירועים לשדה המק"ט
document.getElementById('productCode').addEventListener('input', function(e) {
    if (timeoutId) {
        clearTimeout(timeoutId);
    }
    
    if (!e.target.value.trim()) {
        const existingList = document.getElementById('quantityOptionsList');
        const existingButton = document.querySelector('.quantity-toggle-btn');
        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        // קודם מסמן את כפתור "לפי כמות"
        const quantityRadio = document.getElementById('quantityOption');
        if (quantityRadio) {
            quantityRadio.checked = true;
            quantityRadio.dispatchEvent(new Event('change'));
            
            // ממתין רגע קט לפני הגדרת הערכים
            setTimeout(() => {
                const quantityInput = document.getElementById('unitQuantity');
                const unitSelect = document.getElementById('unitType');
                if (quantityInput) {
                    quantityInput.value = '20';
                    quantityInput.dispatchEvent(new Event('change'));
                }
                if (unitSelect) {
                    unitSelect.value = 'יחי\'';
                    unitSelect.dispatchEvent(new Event('change'));
                }
            }, 100);
        }

        document.getElementById('breadTypeDiv').style.display = 'none';
        return;
    }

    timeoutId = setTimeout(() => {
        const code = e.target.value.trim();
        if (code) {
            console.log('נמצא מק"ט (הקלדה):', code);
            configureProduct(code);
        }
    }, 500);
});

// פונקציה להעתקת מק"ט ללוח ולהצגת הודעה קצרה במרכז העליון שזזה מטה
function copyToClipboard(code) {
    navigator.clipboard
        .writeText(code)
        .then(() => {
            showCopyMessage(); // הצגת הודעה
          
            document.getElementById("searchInput").value = "";
            document.getElementById("searchResults").innerHTML = "";
        })
        .catch((err) => {
            alert('שגיאה בהעתקת המק"ט ללוח');
        });
}



      // עדכון פונקציית showCopyMessage
function showCopyMessage() {
    const messageElement = document.getElementById("copyMessage");
    messageElement.style.display = "block";
    setTimeout(() => {
        messageElement.style.top = "20px";
        messageElement.style.opacity = "1";
    }, 10);

    setTimeout(() => {
        messageElement.style.top = "0";
        messageElement.style.opacity = "0";
        setTimeout(() => {
            messageElement.style.display = "none";
        }, 500);
    }, 2000);
}

     


      // פונקציה לקבלת נתוני ההזמנה וליצור את הסיכום
function generateOrderSummary() {
  const orderItems = getOrderItems(); // מניח שיש לך פונקציה שמה שמחזירה את פרטי המוצרים בהזמנה
  let orderSummary = '';

  // מוסיפים את כל פרטי המוצרים
  orderItems.forEach(item => {
    orderSummary += `מוצר: ${item.name}, מק"ט: ${item.code}, כמות: ${item.quantity}\n`;
  });

  // הוספת הבחירה של חם או קר אם נבחר
  const temperature = document.getElementById('temperature').value;
  if (temperature) {
    orderSummary += `הערות: ${temperature}\n`;
  } else {
    orderSummary += `הערות: לא נבחר\n`;
  }

  // הצגת הסיכום בדף
  document.getElementById('order-summary').innerText = orderSummary;
}

// כפתור העתקה שמעתיק את הסיכום
function copyOrderSummary() {
  const orderSummary = document.getElementById('order-summary').innerText;

  // יצירת אלמנט זמני להעתקת הטקסט
  const tempInput = document.createElement('input');
  tempInput.value = orderSummary;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand('copy');
  document.body.removeChild(tempInput);

  alert('הסיכום הועתק!');
}

// קוראים לפונקצייה בעת שינוי מצב החום/קור או שינוי פריט
document.getElementById('temperature').addEventListener('change', generateOrderSummary);

// אם יש כפתור העתקה
document.getElementById('copy-button').addEventListener('click', copyOrderSummary);




// פונקציה שמייצרת את סיכום ההזמנה כולל חם/קר
function generateOrderSummary() {
  const orderItems = getOrderItems(); // פונקציה שמחזירה את פרטי המוצרים בהזמנה (תעדכן לפי הצורך)
  let orderSummary = '';

  // הוספת פרטי המוצרים בהזמנה
  orderItems.forEach(item => {
    orderSummary += `מוצר: ${item.name}, מק"ט: ${item.code}, כמות: ${item.quantity}\n`;
  });

  // הוספת הערה על מצב חם/קר
  const temperature = document.getElementById('temperature').value;
  if (temperature) {
    orderSummary += `הערות: ${temperature}\n`;
  } else {
    orderSummary += `הערות: לא נבחר\n`; // אם לא נבחר משהו, כתוב "לא נבחר"
  }

  // הצגת סיכום ההזמנה בדף
  document.getElementById('order-summary').innerText = orderSummary;
}

// כפתור להעתקת סיכום ההזמנה
function copyOrderSummary() {
  const orderSummary = document.getElementById('order-summary').innerText;

  // יצירת אלמנט input זמני להעתקת הטקסט
  const tempInput = document.createElement('input');
  tempInput.value = orderSummary;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand('copy');
  document.body.removeChild(tempInput);

  alert('הסיכום הועתק!');
}

// קריאה לפונקציה של סיכום ההזמנה כאשר יש שינוי במצב חם/קר
document.getElementById('temperature').addEventListener('change', generateOrderSummary);

// כפתור העתקה שמעתיק את הסיכום
document.getElementById('copy-button').addEventListener('click', copyOrderSummary);

// פונקציה שמחזירה את המוצרים בהזמנה (יש לעדכן את הפונקציה הזו לפי איך שאתה שומר את פרטי ההזמנה)
function getOrderItems() {
  // כאן אתה יכול לשים את הדרך בה אתה אוסף את פרטי המוצרים
  // לדוגמה:
  return [
    { name: 'מוצר 1', code: 'מק"ט123', quantity: 2 },
    { name: 'מוצר 2', code: 'מק"ט124', quantity: 1 }
  ];
}

function resetInputStyles() {
    const radioContainers = document.querySelectorAll('.radio-container');
    radioContainers.forEach(container => {
        container.classList.remove('selected'); // Remove selected class
    });
    document.getElementById("quantityOption").checked = true; // Reset to default
    updateSelectedRadio(); // Update the visual state
}

// הגדרת משתנים גלובליים
var currentEditItem = null;
var currentEditCategory = null;

function openEditPopup(button, category) {
    try {
        currentEditItem = button.closest('li');
        if (!currentEditItem) {
            console.error('Could not find list item');
            return;
        }
        
        currentEditCategory = category;
        const itemSpan = currentEditItem.querySelector('span:first-child');
        if (!itemSpan) {
            console.error('Could not find item text span');
            return;
        }
        
        const itemText = itemSpan.textContent;
        const editTextArea = document.getElementById('editItemText');
        const overlay = document.getElementById('overlay');
        const popup = document.getElementById('editPopup');
        
        if (!editTextArea || !overlay || !popup) {
            console.error('Could not find required elements');
            return;
        }
        
        editTextArea.value = itemText;
        overlay.style.display = 'block';
        popup.style.display = 'block';
        
        // מיקוד אוטומטי בתיבת הטקסט
        editTextArea.focus();
        
    } catch (error) {
        console.error('Error in openEditPopup:', error);
        showNotification("שגיאה בפתיחת חלון העריכה", "red");
    }
}

function closeEditPopup() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('editPopup').style.display = 'none';
    currentEditItem = null;
    currentEditCategory = null;
}

function saveEdit() {
    if (currentEditItem && currentEditCategory) {
        const newText = document.getElementById('editItemText').value;
        currentEditItem.querySelector('span').textContent = newText;
        // עדכון data-raw-summary (אם קיים)
        currentEditItem.setAttribute('data-raw-summary', newText);
        // שמירת השינויים
        saveOrderDetails();
        // סגירת הפופאפ
        closeEditPopup();
        // הצגת הודעת הצלחה
        showNotification("הפריט עודכן בהצלחה!", "green");
    }
}

// סגירת הפופאפ בלחיצה על האוברליי
document.getElementById('overlay').addEventListener('click', closeEditPopup);

// הוספת מאזין לחיצה על Escape לסגירת הפופאפ
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closeEditPopup();
    }
});

document.addEventListener('DOMContentLoaded', function() {
    // וידוא שכל האלמנטים קיימים
    const overlay = document.getElementById('overlay');
    const popup = document.getElementById('editPopup');
    const editTextArea = document.getElementById('editItemText');

    if (!overlay || !popup || !editTextArea) {
        console.error('חסרים אלמנטים חיוניים בדף');
        return;
    }

    // הוספת מאזיני אירועים
    overlay.addEventListener('click', closeEditPopup);
    
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeEditPopup();
        }
    });
});

// הוספת הפונקציה החדשה לפני copyWarehouseSummary
function getWarehouseItems() {
    const warehouseList = document.getElementById("warehouseList");
    const kitchenList = document.getElementById("kitchenList");
    let items = [];
    let pranutTotal = 0;

    // הוספת פריטי מחסן רגילים
    Array.from(warehouseList.children).forEach(item => {
        const itemText = item.querySelector("span").textContent;
        items.push(itemText.replace(/\(מק"ט: \d+\)/g, '').trim());
    });

    // חישוב כמות הפרנות ממגש ניגוב למתקדמים
    Array.from(kitchenList.children).forEach(item => {
        const productCodeElement = item.querySelector(".product-code");
        if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "12602") {
                const itemText = item.querySelector("span").textContent;
                const match = itemText.match(/(\d+)\s*מגש/);
                if (match) {
                    const trays = parseInt(match[1]);
                    pranutTotal += trays * 5; // כל מגש = 5 פרנות
                }
            }
        }
    });

    // הוספת פרנות לרשימה אם יש
    if (pranutTotal > 0) {
        items.push(`${pranutTotal} יח' פרנה מיני`);
    }

    return items;
}

// הוסף את הפונקציה הזו בחלק של הסקריפט
async function pasteFromClipboard() {
    try {
        const text = await navigator.clipboard.readText();
        const searchInput = document.getElementById('searchInput');
        const productCodeInput = document.getElementById('productCode');
        
        searchInput.value = text;
        productCodeInput.value = text;
        
        // הפעלת החיפוש
        searchProduct();
        
        // בדיקה אם זה מק"ט של ביסים
        checkBisProduct(text);
        
        showNotification("הודבק בהצלחה!", "green");
    } catch (err) {
        console.error('Failed to read clipboard:', err);
        showNotification("לא הצלחנו לגשת ללוח ההעתקה", "red");
    }
}

    </script>

    
  </body>
</html>
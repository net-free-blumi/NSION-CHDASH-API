<!DOCTYPE html>
<html dir="rtl" lang="he-il">
  <head>
    <link
      class="icon"
      rel="icon"
      href="×œ×•×’×• ×’×•×œ×“×™×¡ ×¨×’×™×œ.png"
      type="icon"
      alt="icon"
    />
    <title>× ×™×”×•×œ ×”×–×× ×•×ª ×’ ××•× ×œ×™×™×Ÿ</title>
    <script src="script.js"></script>
    <script>window.API_BASE_URL='https://nsion-chdash-api-1.onrender.com';</script>
    <script src="config.js"></script>
    <script src="products-loader.js"></script>
    <link rel="stylesheet" href="style.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ×§×™×©×•×¨ ×œ××¢×¨×›×ª × ×™×”×•×œ ××•×¦×¨×™× -->
    <link rel="stylesheet" href="admin.css" />

    <!-- ×§×™×©×•×¨ ×œ×¤×•× ×˜ -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <!-- Google Sign-In API -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <meta
      name="google-site-verification"
      content="dUgCkLcDLymDM3mSiVs6eFf6bx8KvC9XIbzJrhuDITI"
    />

    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <meta
      name="google-site-verification"
      content="dUgCkLcDLymDM3mSiVs6eFf6bx8KvC9XIbzJrhuDITI"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-ZBQVSDD37S"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-ZBQVSDD37S");
    </script>

    <style>
      body {
        font-family: "Rubik", sans-serif;
        display: flex;
        /* flex-direction: column; */
        min-height: 90vh;
        background-color: #f4f4f4;
        align-items: center;
        justify-content: center;
        text-align: center;
        margin: 0;
        background-image: url("Black-logo.jpg");
        background-size: cover;
        background-attachment: fixed;
        padding: 10px; /* ××¨×•×•×— ×›×“×™ ×œ×× ×•×¢ ×—×™×ª×•×š ×‘××¡×›×™× ×§×˜× ×™× */
        text-align: right;
        color: #333;
        align-items: flex-start;
        min-height: 100vh;
      }

      .container {
        max-width: 650px; /* ×’×•×“×œ ××§×¡×™××œ×™ ×œ×§×•× ×˜×™×™× ×¨ */
        width: 100%; /* ×’××™×©×•×ª ××œ××” */
        padding: 20px; /* ×¨×™×•×•×— ×¤× ×™××™ */
        background-color: white;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); /* ×¦×œ ×§×˜×Ÿ ×œ×™×•×ª×¨ ×¢×•××§ */
        border-radius: 10px; /* ×¤×™× ×•×ª ××¢×•×’×œ×•×ª */
      }
      h1 {
        background-color: #343a40;
        color: #fff;
        padding: 10px;
        border-radius: 5px;
        text-align: center;
      }

      .category-title { display: inline; }

      /* ×©×•×¨×•×ª ××¡×•×“×¨×•×ª ×•× ×¢×™××•×ª ×‘×ª×¦×•×’×ª ×¤×¨×˜×™ ×”×–×× ×” */
      #orderInfo .line { display: block; margin: 6px 0; }

      #notesSummary {
        font-weight: bold;
        font-size: large;
        padding: 0;
        display: inline;
        margin-inline-start: 6px;
      }
      /* ×”×¦×’×ª ×—×/×§×¨ ×‘××•×ª×” ×©×•×¨×” × ×§×™×™×” */
      #summary .hot-cold-row { display: inline-flex; align-items: baseline; gap: 6px; }
      label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
      }

      input[type="text"],
      input[type="date"],
      input[type="time"],
      input[type="number"] {
        width: 100%;
        padding: 12px; /* ×”×’×“×œ× ×• ××ª ×”×’×•×“×œ */
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px; /* ×¨×“×™×•×¡ ×¤×™× ×•×ª ×’×“×•×œ ×™×•×ª×¨ */
        font-size: 16px; /* ×’×•×“×œ ×˜×§×¡×˜ ×’×“×•×œ ×™×•×ª×¨ */
        box-sizing: border-box;
      }

      button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 12px 24px; /* ×©×™× ×™× ×• ××ª ×”×¨×™×•×•×— */
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 18px; /* ×’×•×“×œ ×›×¤×ª×•×¨×™× ×’×“×•×œ ×™×•×ª×¨ */
        margin: 5px 2px;
        cursor: pointer;
        border-radius: 8px; /* ×”×’×“×œ×ª ×¨×“×™×•×¡ ×”×›×¤×ª×•×¨×™× */
      }
      button:hover {
        background-color: #0056b3;
      }

      select {
        width: 100%;
        padding: 12px; /* ×”×’×“×œ× ×• ××ª ×”×’×•×“×œ */
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px; /* ×¨×“×™×•×¡ ×¤×™× ×•×ª ×’×“×•×œ ×™×•×ª×¨ */
        font-size: 18px; /* ×’×•×“×œ ×˜×§×¡×˜ ×’×“×•×œ ×™×•×ª×¨ */
      }

      /* ×¢×™×¦×•×‘ ×”×›×¤×ª×•×¨×™× ×œ×¨×“×™×• */
      input[type="radio"] {
        margin: 10px;
        transform: scale(1.5); /* ×”×’×“×œ×ª ×›×¤×ª×•×¨×™ ×”×¨×“×™×• */
      }

      label[for="quantityOption"],
      label[for="sizeOption"] {
        font-size: 25px; /* ×’×•×“×œ ×¤×•× ×˜ ×’×“×•×œ ×™×•×ª×¨ ×œ×ª×•×•×™×•×ª */
        font-weight: bold;
        margin-right: 10px;
      }

      label[for="noneOption"] {
        font-size: 13px; /* ×’×•×“×œ ×¤×•× ×˜ ×’×“×•×œ ×™×•×ª×¨ ×œ×ª×•×•×™×•×ª */
        font-weight: bold;
        margin-right: 10px;
      }

      #summary {
        margin-top: 0px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
        white-space: pre-line; /* ×©××™×¨×ª ×¤×•×¨××˜ ×›××• ×‘×”×•×“×¢×ª ×˜×§×¡×˜ */
        line-height: 0.8; /* ×§×‘×™×¢×ª ×¨×™×•×•×— ×‘×™×Ÿ ×©×•×¨×•×ª */
      }

      .category-title {
        font-weight: bold;
        margin-top: 0px;
        color: #007bff;
        text-decoration: underline;
      }
      ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
        font-weight: bold;
        font-size: 16px;
      }
      li {
        padding: 5px;
        margin-bottom: 2px;
        border-bottom: 1px solid #ddd;
      }
      #copyButton {
        margin-top: 0px;
        /* text-align: center;
      justify-content: center;
      align-items: center;
      display: flex; */
        background-color: #28a745;
      }
      #copyButton:hover {
        background-color: #218838;
      }
      .delete-btn {
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 5px 10px;
        margin-right: 10px;
        cursor: pointer;
        border-radius: 3px;
      }

      @media (max-width: 600px) {
        .delete-btn {
          margin-right: 2px;
        }
      }
      .delete-btn:hover {
        background-color: #c82333;
      }
      li {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* ×ª×•×¦××•×ª ×—×™×¤×•×© ×¢×™×¦×•×‘ */
      ul#searchResults {
        list-style-type: none;
        padding: 0;
        background-color: #fff;
        max-height: 150px;
        overflow-y: auto;
        border: 1px solid #ccc;
        display: block;
      }

      ul#searchResults li {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      ul#searchResults li:hover {
        background-color: #f1f1f1;
      }

      /* ×¢×™×¦×•×‘ ×›×¤×ª×•×¨ ×”×¢×ª×§×ª ××§"×˜ */
      ul#searchResults li button {
        padding: 5px 10px;
        font-size: 0.8em;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
      }

      ul#searchResults li button:hover {
        background-color: #0056b3;
      }

      .notification {
        display: none;
        position: fixed;
        /* bottom: 20px; */
        bottom: 40%;
        left: 50%;
        transform: translateX(-50%);
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        border: 1px solid #c3e6cb;
        border-radius: 5px;
        box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
        z-index: 99999;
        font-size: 16px;
        font-weight: bold;
      }

      .external-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
      }

      .external-links img {
        border: 2px solid #ddd;
        border-radius: 8px;
        transition: transform 0.3s ease;
      }

      .external-links img:hover {
        transform: scale(1.1);
      }

      /* ×ª×¤×¨×™×˜ ×ª×—×ª×•×Ÿ */
      #tacton {
        margin-top: 80px;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #333;
        color: #fff;
        text-align: center;
        padding: 10px 0;
        font-family: Arial, sans-serif;
        font-size: 18px;
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
        z-index: 1000;
      }

      .item-actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .product-code {
        color: #666;
        font-size: 0.9em;
      }

      li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px;
        margin-bottom: 2px;
        border-bottom: 1px solid #ddd;
      }

      #breadTypeDiv {
        margin: 10px 0;
      }

      #breadType {
        width: 100%;
        padding: 12px;
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 16px;

        box-sizing: border-box;
      }

      /* General styles for radio buttons */
      .radio-container {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.8); /* Light transparent background */
        border-radius: 10px; /* Rounded corners */
        padding: 10px; /* Padding around the content */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        transition: background 0.3s; /* Smooth background transition */
        cursor: pointer; /* Change cursor to pointer */
      }

      .radio-container:hover {
        background: rgba(255, 255, 255, 1); /* Solid background on hover */
        cursor: pointer;
      }

      .radio-container.selected {
        background: rgba(
          0,
          123,
          255,
          0.2
        ); /* Light blue background for selected state */
        cursor: pointer;
        text-align: center;
        align-items: center;
      }

      .radio-container input[type="radio"] {
        display: none; /* Hide the default radio button */
        cursor: pointer;
      }

      .radio-container label {
        margin-left: 10px; /* Space between radio button and label */
        font-size: 25px; /* Font size for labels */
        cursor: pointer;
      }

      /* Styles for input boxes */
      .input-box {
        width: 150px;
        margin-left: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 10px; /* Rounded corners */
        font-size: 20px;
        font-weight: bold;
        background: rgba(255, 255, 255, 0.8); /* Light transparent background */
        transition: border-color 0.3s, background 0.3s; /* Smooth transition */
        /* cursor: pointer; */
      }

      .input-box:focus {
        border-color: #007bff; /* Change border color on focus */
        outline: none; /* Remove default outline */
        background: rgba(255, 255, 255, 1); /* Solid background on focus */
        /* cursor: pointer; */
      }

      /* ×¡×’× ×•×Ÿ ×›×¤×ª×•×¨ ×”×¢×¨×™×›×” */
      .edit-btn {
        background-color: #ffc107;
        color: white;
        border: none;
        padding: 5px 10px;
        margin-right: 5px;
        cursor: pointer;
        border-radius: 3px;
        font-size: 14px;
        height: 28px;
        line-height: 1;
        display: inline-flex;
        align-items: center;
      }
      @media (max-width: 600px) {
        .edit-btn {
          max-width: 80%; /* ×§×‘×¢ ×¨×•×—×‘ ××§×¡×™××œ×™ ×§×˜×Ÿ ×™×•×ª×¨ ×‘××¡×›×™× ×§×˜× ×™× */
          font-size: 10px; /* ×”×§×˜×Ÿ ××ª ×’×•×“×œ ×”×˜×§×¡×˜ */
        }
      }

      .edit-btn .material-icons {
        font-size: 14px;
        vertical-align: middle;
      }

      /* ×¢×“×›×•×Ÿ ×œ×¡×’× ×•×Ÿ ×”×¤×•×¤××¤ */
      .edit-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 15px;
        border-radius: 10px;
        width: 60%;
        max-width: 300px;
        direction: rtl;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1001;
      }

      .edit-popup textarea {
        width: 85%;
        height: 45px;
        margin: 10px 0;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-family: "Rubik", sans-serif;
        font-size: 18px;
        resize: vertical;
        direction: rtl;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        transition: border-color 0.2s, box-shadow 0.2s;
        position: relative;
        z-index: 1002;
        min-height: 45px;
        max-height: 120px;
      }

      .edit-popup textarea:focus {
        border-color: #007bff;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05),
          0 0 0 2px rgba(0, 123, 255, 0.25);
        outline: none;
      }

      .edit-popup h3 {
        margin: 0 0 15px 0;
        color: #333;
        text-align: right;
        font-size: 14px;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 8px;
      }

      .popup-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 12px;
      }

      .popup-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        font-size: 13px;
        transition: background-color 0.2s;
        position: relative;
        z-index: 1002;
      }

      .save-btn {
        background-color: #28a745;
        color: white;
      }

      .save-btn:hover {
        background-color: #218838;
      }

      .cancel-btn {
        background-color: #dc3545;
        color: white;
      }

      .cancel-btn:hover {
        background-color: #c82333;
      }

      /* ×¨×§×¢ ×›×”×” ×›×©×”×¤×•×¤××¤ ×¤×ª×•×— */
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3);
        z-index: 1000;
      }

      .date-time-container {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        gap: 50px; /* ×¨×•×•×— ×‘×™×Ÿ ×”×ª×™×‘×•×ª */
        align-items: center;
        text-align: center;
        border: 3px solid #ada5a5;
        padding-right: 30px;
      }
      @media (max-width: 600px) {
        .date-time-container {
          gap: 5px;
          /* width: 200px; */
          border: 1px solid #ada5a5;
          padding-right: 10px;
        }
      }

      .date-time-label {
        display: flex;
        align-items: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
      }
      @media (max-width: 600px) {
        .date-time-label {
          width: 140px;
        }
      }
      .date-time-label2 {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        flex-direction: column; /* ×ª×•×•×™×ª ××¢×œ ×”×ª×™×‘×” */
        align-items: center;
        text-align: center;
        width: 190px;
      }
      @media (max-width: 600px) {
        .date-time-label2 {
          width: 140px;
        }
      }

      .date-time-label3 {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        flex-direction: column; /* ×ª×•×•×™×ª ××¢×œ ×”×ª×™×‘×” */
        align-items: center;
        text-align: center;
        width: 120px;
      }
      @media (max-width: 600px) {
        .date-time-label3 {
          width: 120px;
        }
      }

      .date-time-input {
        flex-direction: column;
        width: 140px; /* ×’×•×“×œ ×”×ª×™×‘×” */
        padding: 5px; /* ×¨×™×¤×•×“ ×¤× ×™××™ */
        font-size: 24px; /* ×’×•×“×œ ×˜×§×¡×˜ */
        margin-top: 5px; /* ×¨×•×•×— ×‘×™×Ÿ ×”×ª×•×•×™×ª ×œ×ª×™×‘×” */
        align-items: center;
        text-align: center;
      }
      @media (max-width: 600px) {
        .date-time-input {
          max-width: 100%; /* ×§×‘×¢ ×¨×•×—×‘ ××§×¡×™××œ×™ ×§×˜×Ÿ ×™×•×ª×¨ ×‘××¡×›×™× ×§×˜× ×™× */
          font-size: 14px;
          /* width: 80px; */
        }
      }
/* ×›×¤×•×¨ × ×§×” ×—×™×¤×•×© ×¢×™×¦×•×‘ */
      #clearButton {
        width: 200px;
      }
     
/* ×¢×™×¦×•×‘ ×›×¤×ª×•×¨×™× ×©×œ ×”×ª×—×œ×ª ×”×–×× ×” ×—×“×©×” ×•×¡× ×›×¨×•×Ÿ ×•×©××™×¨×” ×œ×¢× ×Ÿ */
      .syncProductsBtn {
        background-color:#28a745; color:#fff;
      }
      @media (max-width: 600px) {
        .syncProductsBtn {
          max-width: 110px; /* ×§×‘×¢ ×¨×•×—×‘ ××§×¡×™××œ×™ ×§×˜×Ÿ ×™×•×ª×¨ ×‘××¡×›×™× ×§×˜× ×™× */
          font-size: 14px;
          font-weight: bold;

        }
      }
      /* ×©××•×¨ ×”×–×× ×” ×‘×¢× ×Ÿ */
      .ProductsBtn2323 {
        background-color:#1c6fdd; color:#fff;
            }
      @media (max-width: 600px) {
        .ProductsBtn2323 {
          max-width: 130px;
          font-size: 14px;
          font-weight: bold;

        }
      }
/* ×”×ª×—×œ ×”×–×× ×” ×—×“×©×” */
      .ProductsBtn8787878 {
        background-color:#de5252; color:#fff;
                 }
      @media (max-width: 600px) {
        .ProductsBtn8787878 {
          max-width: 110px;
          font-size: 14px;
          font-weight: bold;
        }
      }


      .date-time-label1 {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        flex-direction: column; /* ×ª×•×•×™×ª ××¢×œ ×”×ª×™×‘×” */
        align-items: center;
        text-align: center;
        width: 140px;
      }
      @media (max-width: 600px) {
        .date-time-input {
          width: 40px;
        }
      }

      /* ×”×¡×ª×¨×ª ×”×§×˜×’×•×¨×™×” ×›×•×œ×” ×›×©×”×¨×©×™××” ×¨×™×§×” */
      /* <!-- ×”×¡×ª×¨×ª ×§×˜×’×•×¨×™×•×ª ×¨×™×§×•×ª --> */
      #warehouse:has(ul:empty),
      #amar:has(ul:empty),
      #online:has(ul:empty),
      #bakery:has(ul:empty),
      #kitchenProducts:has(ul:empty),
      #sushi:has(ul:empty) {
        display: none;
      }

      .product-quantity-container {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        gap: 50px; /* ×¨×•×•×— ×‘×™×Ÿ ×”×ª×•×•×™×•×ª */
        align-items: center;
        text-align: center;
      }
      @media (max-width: 600px) {
        .product-quantity-container {
          gap: 10px;
        }
      }

      .product-label {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        flex-direction: column; /* ×ª×•×•×™×ª ××¢×œ ×”×ª×™×‘×” */
        align-items: center;
        text-align: center;
        width: 160px;
        margin-right: 40px;
        /* margin: 100px; */
      }
      @media (max-width: 600px) {
        .product-label {
          width: 110px;
          margin-right: 20px;
        }
      }

      .product-code-input {
        width: 120px; /* ×§×‘×¢ ××ª ×”×¨×•×—×‘ ×©×œ ×ª×™×‘×ª ×”×§×œ×˜ */
        padding: 5px; /* ×¨×™×¤×•×“ ×¤× ×™××™ */
        text-align: center; /* ××¨×›×– ××ª ×”×˜×§×¡×˜ ×‘×ª×™×‘×” */
        align-items: center;
        font-size: 16px; /* ×’×•×“×œ ×˜×§×¡×˜ */
        background-color: #c1232324;
      }

      .quantity-label {
        display: flex; /* ×”×©×ª××© ×‘-flexbox */
        flex-direction: column; /* ×ª×•×•×™×ª ××¢×œ ×”×ª×™×‘×” */
        align-items: center; /* ××¨×›×– ××ª ×”×ª×•×›×Ÿ */
        /* width: 330px; */
        width: 230px;
        text-align: center; /* ××¨×›×– ××ª ×”×˜×§×¡×˜ ×‘×ª×™×‘×” */
        font-size: 16px; /* ×’×•×“×œ ×˜×§×¡×˜ */
        margin-right: 100px;
      }
      @media (max-width: 600px) {
        .quantity-label {
          width: 190px;
          margin-right: 40px;
        }
      }

      .product-code-input,
      .quantity-input {
        width: 120px; /* ×§×‘×¢ ××ª ×”×¨×•×—×‘ ×©×œ ×ª×™×‘×ª ×”×§×œ×˜ */
        padding: 5px; /* ×¨×™×¤×•×“ ×¤× ×™××™ */
        text-align: center; /* ××¨×›×– ××ª ×”×˜×§×¡×˜ ×‘×ª×™×‘×” */
        font-size: 16px; /* ×’×•×“×œ ×˜×§×¡×˜ */
      }

      @media (max-width: 600px) {
        .date-time-label2 {
          width: 90px;
        }
      }
    </style>

    <!-- ×”×•×¡×£ ×‘×—×œ×§ ×©×œ ×”-style -->
    <style>
      /* ... ×”×¡×’× ×•× ×•×ª ×”×§×™×™××™× ... */

      #pasteButton {
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 44px;
        height: 44px;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      #pasteButton:hover {
        background-color: #0056b3;
      }

      #pasteButton .material-icons {
        font-size: 20px;
        color: white;
      }

      @media (max-width: 600px) {
        #pasteButton {
          min-width: 36px;
          height: 36px;
        }

        #pasteButton .material-icons {
          font-size: 18px;
        }
      }

      .wa-preview {
        background: linear-gradient(135deg, #eaffd0 60%, #c6f7b2 100%);
        border: 1.5px solid #b2e59e;
        border-radius: 16px;
        box-shadow: 0 2px 12px 0 #b2e59e33;
        padding: 14px 18px;
        font-size: 1.13em;
        font-family: "Varela Round", "Rubik", "Segoe UI", Arial, sans-serif;
        color: #1a4d1a;
        /* font-weight: 700; */
        margin-bottom: 18px;
        margin-top: 8px;
        min-height: 44px;
        max-height: 220px;
        overflow-y: auto;
        transition: box-shadow 0.2s;
      }
      .wa-preview:focus {
        box-shadow: 0 4px 18px 0 #b2e59e66;
        outline: none;
      }
    </style>
  </head>
      <body>
    <!-- Toast notifications container -->
    <div id="notifications-container"></div>

    <!-- ×¢×™×’×•×œ ×˜×¢×™× ×” ×œ×©×¨×ª -->
  <div id="serverWakeupOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(255,255,255,0.85);z-index:9999;align-items:center;justify-content:center;flex-direction:column;">
    <div style="width:70px;height:70px;border:8px solid #eee;border-top:8px solid #007bff;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px;"></div>
    <div style="font-size:1.3em;color:#007bff;font-weight:bold;">×”×©×¨×ª ×‘×”×¤×¢×œ×”...<br>×× × ×”××ª×Ÿ</div>
  </div>
  <style>
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
    #serverWakeupOverlay { display: flex; }
  </style>
  <style>
    /* Mobile: restore natural page scrolling and avoid background-attachment issues */
    @media (max-width: 900px) {
      html, body { height: auto; min-height: 100vh; overflow: auto; overflow-x: hidden; }
      body {
        display: block;           /* break flex that may lock viewport */
        -webkit-overflow-scrolling: touch;
        background-attachment: scroll; /* fixed background can block scroll on mobile */
        padding: 0;               /* remove outer padding that causes side gaps */
      }
      .container { max-width: 100vw; width: 100vw; margin: 0; border-radius: 0; box-sizing: border-box; }
    }
  </style>
<script>
  window.API_BASE_URL='https://nsion-chdash-api-1.onrender.com';
// --- Wake up server logic (dynamic API base) ---
const SERVER_URL = (typeof config !== 'undefined' && typeof config.getApiBaseUrl === 'function')
  ? config.getApiBaseUrl()
  : (window.API_BASE_URL || window.location.origin);
let serverAwake = false;
let wakeupInterval = null;

function showWakeupOverlay(show) {
  const overlay = document.getElementById('serverWakeupOverlay');
  if (overlay) overlay.style.display = show ? 'flex' : 'none';
}

async function wakeUpServer(showLoader = true) {
  if (showLoader) showWakeupOverlay(true);
  try {
    const res = await fetch(SERVER_URL + '/api/stats', { cache: 'reload' });
    if (res.ok) {
      serverAwake = true;
      showWakeupOverlay(false);
      return true;
    }
  } catch (e) {}
  serverAwake = false;
  if (showLoader) setTimeout(() => wakeUpServer(true), 2000);
  return false;
}

// ×›×œ 4 ×“×§×•×ª ×¤×™× ×’ ×œ×©×¨×ª
function startServerKeepAlive() {
  if (wakeupInterval) clearInterval(wakeupInterval);
  wakeupInterval = setInterval(() => wakeUpServer(false), 240000);
}

// ×”×¤×¢×œ×ª ×”×©×¨×ª ×‘×˜×¢×™× ×” ×¨××©×•× ×™×ª
document.addEventListener('DOMContentLoaded', () => {
  wakeUpServer(true).then(() => {
    startServerKeepAlive();
    // ×‘×•×˜×œ: ××™×Ÿ ×¨×¢× ×•×Ÿ ××•×¦×¨×™× ××•×˜×•××˜×™ ×‘×˜×¢×™× ×ª ×”×“×£
  });
});
</script>
    <div class="container">
      <!-- ×”×•×¡×£ ××ª ×”×§×•×“ ×”×–×” ××ª×—×ª ×œ×›×•×ª×¨×ª ×”×¨××©×™×ª -->
      <div class="external-links">
        <a href="https://www.goldys.co.il/" target="_blank">
          <img
            src="×œ×•×’×• ×’×•×œ×“×™×¡ ×¨×’×™×œ.png"
            title="×’×•×œ×“×™×¡ ××ª×¨ ×¨×’×™×œ"
            alt="×§×™×©×•×¨ 1"
            width="100"
            height="100"
          />
        </a>
        <a href="https://www.goldys.co.il/holidays" target="_blank">
          <img
            src="×’×•×œ×“×™×¡ ×—×’×™×-×œ×•×’×•.jpg"
            title="×’×•×œ×“×™×¡ ×—×’×™×"
            alt="×§×™×©×•×¨ 2"
            width="100"
            height="100"
          />
        </a>
      </div>


      <h1>× ×™×”×•×œ ×”×–×× ×•×ª</h1>

      <!-- ×›×¤×ª×•×¨ × ×™×”×•×œ ××•×¦×¨×™× (××•×¡×ª×¨ ×›×‘×¨×™×¨×ª ××—×“×œ) -->
      <div style="text-align: center; margin: 20px 0;">
        <button 
          id="product-management-btn"
          onclick="openProductManagement()" 
          
          onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,123,255,0.4)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,123,255,0.3)'"
        >
          ğŸ›ï¸ × ×™×”×•×œ ××•×¦×¨×™×
        </button>

        <button 
          id="orders-management-btn"
          onclick="openOrdersManagement()" 
          onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(40,167,69,0.4)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(40,167,69,0.3)'"
        >
          ğŸ“‹ ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª
        </button>

      </div>

      <!-- Google Sign-In Section -->
      <div id="authSection" style="text-align: center; margin: 10px 0; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
        <div id="loginSection">
          <h3>×”×ª×—×‘×¨×•×ª ×œ×©×œ×™×—×ª ×”×•×“×¢×•×ª WhatsApp</h3>
          <p>×¨×§ ××©×ª××©×™× ××•×¨×©×™× ×™×›×•×œ×™× ×œ×©×œ×•×— ×”×•×“×¢×•×ª ×œ×§×‘×•×¦×•×ª WhatsApp</p>
          <div id="g_id_onload"
               data-client_id="530661972828-l9qgtsui9d3aj40pbdnn6rvv15fr82kf.apps.googleusercontent.com"
               data-callback="handleCredentialResponse"
               data-auto_prompt="false">
          </div>
          <div class="g_id_signin"
               data-type="standard"
               data-size="large"
               data-theme="outline"
               data-text="sign_in_with"
               data-shape="rectangular"
               data-logo_alignment="left">
          </div>
        </div>

        <div id="userSection" style="display: none;">
          <h2>×‘×¨×•×š ×”×‘×!</h2>
          <p id="userEmail"></p>
          <button onclick="signOut()" style="background-color: #dc3545; margin-top: 0px;">
            ×”×ª× ×ª×§
          </button>
        </div>

        <div id="unauthorizedSection" style="display: none;">
          <h2 style="color: #dc3545;">×’×™×©×” ××•×’×‘×œ×ª</h2>
          <p>×”××™×™×œ ×©×œ×š ××™× ×• ××•×¨×©×” ×œ×©×œ×•×— ×”×•×“×¢×•×ª WhatsApp</p>
          <p>××ª×” ×™×›×•×œ ×œ×¦×¤×•×ª ×‘××ª×¨ ××š ×œ× ×œ×©×œ×•×— ×”×•×“×¢×•×ª</p>
          <button onclick="signOut()" style="background-color: #6c757d;">
            ×”×ª× ×ª×§
          </button>
        </div>
      </div>



            <!-- ×©××¨ ×”×§×•×“ ×©×œ×š ×××©×™×š ×›××Ÿ -->
      <div id="mainContent">
        <div>
          <!-- ×›×•×ª×¨×ª ×œ×ª×™×‘×ª ×”×—×™×¤×•×© -->
          <h3>×ª×™×‘×ª ×—×™×¤×•×© ××•×¦×¨/××§"×˜</h3>

          <!-- ×›×¤×ª×•×¨ ×¡× ×›×¨×•×Ÿ ××•×¦×¨×™× -->
<script>
// ×›×¤×ª×•×¨ ×¡× ×›×¨×•×Ÿ ××•×¦×¨×™×
function syncProducts() {
  if (window.productsLoader && typeof window.productsLoader.refreshData === 'function') {
    window.productsLoader.refreshData().then(() => {
      const msg = document.getElementById('syncProductsMsg');
      if (msg) {
        try {
          const stats = (window.productsLoader && typeof window.productsLoader.getStats === 'function')
            ? window.productsLoader.getStats()
            : { totalProducts: Object.keys(window.productsLoader?.products || {}).length, totalCategories: Object.keys(window.productsLoader?.categories || {}).length };
          const now = new Date();
          const timeStr = now.toLocaleTimeString('he-IL', { hour: '2-digit', minute: '2-digit' });
          msg.textContent = `×”××•×¦×¨×™× ×¡×•× ×›×¨× ×• ×‘×”×¦×œ×—×”! (${stats.totalProducts} ××•×¦×¨×™×, ${stats.totalCategories} ×§×˜×’×•×¨×™×•×ª, ${timeStr})`;
        } catch (e) {
          // ×‘××§×¨×” ×©×œ ×©×’×™××” × ×¦×™×’ ××ª ×”×”×•×“×¢×” ×”×‘×¡×™×¡×™×ª
          msg.textContent = '×”××•×¦×¨×™× ×¡×•× ×›×¨× ×• ×‘×”×¦×œ×—×”!';
        }
        msg.style.display = 'inline';
        setTimeout(() => { msg.style.display = 'none'; }, 2000);
      }
    });
  } else {
    alert('××¢×¨×›×ª ×”××•×¦×¨×™× ×œ× × ×˜×¢× ×”.');
  }
}
</script>

        <!-- ×”×•×“×¢×ª ×”×¢×ª×§×” ×©×ª×•×¤×™×¢ ×‘×—×œ×§ ×”×¢×œ×™×•×Ÿ -->
        <div id="copyMessage">×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!</div>

        <!-- ×ª×™×‘×ª ×”×—×™×¤×•×© -->
        <div style="display: flex; gap: 10px; align-items: center">
          <input
            type="text"
            id="searchInput"
            placeholder="×”×›× ×¡ ××§×˜ ××• ×©× ××•×¦×¨"
            oninput="searchProduct()"
          />
          <button id="clearButton" onclick="clearSearch()">× ×§×” ×—×™×¤×•×©</button>
        </div>

        <!-- ×ª×•×¦××•×ª ×—×™×¤×•×© -->
        <ul id="searchResults"></ul>

        <br /><br/>

        <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap">

          <button class="ProductsBtn8787878" onclick="newOrder()"> ×”×ª×—×œ ×”×–×× ×” ×—×“×©×” </button>
          <button class="syncProductsBtn" onclick="syncProducts()">ğŸ”„ ×¡× ×›×¨×•×Ÿ ××•×¦×¨×™×</button>
          <button class="ProductsBtn2323" onclick="saveCurrentOrderToCloud()"> â˜ï¸ ×©××•×¨ ×”×–×× ×” ×‘×¢× ×Ÿ </button>

          <span id="syncProductsMsg" style="display:none; color:#28a745; font-weight:bold;">×”××•×¦×¨×™× ×¡×•× ×›×¨× ×• ×‘×”×¦×œ×—×”!</span>

        </div>
        <!-- ×”×•×¡×£ ××ª ×–×” ××ª×—×ª ×œ×›×¤×ª×•×¨ "×”×–×× ×” ×—×“×©×”" -->
        <div
          id="orderNotification"
          class="notification order-notification"
          style="display: none; background-color: #ff0000; color: #010911"
        >
          ×”×”×–×× ×” ××•×¤×¡×” ×‘×”×¦×œ×—×”!
        </div>

        <br /><br />

        <!-- ×”× ×— ××ª ×ª×™×‘×•×ª ×”×ª××¨×™×š, ×”×©×¢×” ×•××¡×¤×¨ ×”×”×–×× ×” ×‘××•×ª×” ×©×•×¨×” ×¢× ×ª×•×•×™×•×ª -->
        <div class="date-time-container">
          <div class="date-time-label2">
            <label for="orderNumber">××¡×¤×¨ ×”×–×× ×”:</label>
            <input type="text" id="orderNumber" class="date-time-input" />
          </div>

          <div class="date-time-label">
            <label for="orderDate">×ª××¨×™×š:</label>
            <input type="date" id="orderDate" class="date-time-input" />
          </div>
        <div class="date-time-label3">
          <label for="orderTimeMasked">×©×¢×”:</label>
          <input type="hidden" id="orderTime" />
          <input type="text" id="orderTimeMasked" class="date-time-input" list="timeOptions" inputmode="numeric" placeholder="HH:MM" maxlength="5" autocomplete="off" pattern="^(?:[01]\\d|2[0-3]):[0-5]\\d$" title="×”×›× ×¡ ×©×¢×” ×‘×¤×•×¨××˜ 24 ×©×¢×•×ª, ×œ××©×œ 15:30" />
          <datalist id="timeOptions"></datalist>
        </div>



        <!-- <div class="date-time-label3">
          <label for="orderTime">×©×¢×”:</label>
          <input type="time" id="orderTime" class="date-time-input" lang="he-IL" />
        </div> -->
        </div>

        <br />
        <!-- ×”× ×— ××ª ×ª×™×‘×ª ××§"×˜ ××•×¦×¨ ×•×›××•×ª ×‘××•×ª×” ×©×•×¨×” ×¢× ×ª×•×•×™×•×ª -->
        <!-- ×ª×™×‘×ª ×”××§"×˜ ×¢× ×›×¤×ª×•×¨ ×”×”×“×‘×§×” -->
        <div class="product-quantity-container">
          <div class="product-label">
            <label for="productCode">××§"×˜ ××•×¦×¨:</label>
            <div style="display: flex; align-items: center">
              <input type="text" id="productCode" class="product-code-input" />
              <button
                id="pasteButton"
                onclick="pasteFromClipboard()"
                style="
                  padding: 20px;
                  border-radius: 4px;
                  background-color: #007bff;
                "
                title="×”×“×‘×§ ××”×œ×•×—"
              >
                <span class="material-icons">content_paste</span>
              </button>
            </div>
          </div>
          <div class="quantity-label">
            <label for="productQuantity">×›××•×ª ×™×—×™'/××’×©×™×:</label>
            <div style="display: flex; align-items: center">
              <button type="button" id="decreaseButton">-</button>
              <input
                type="number"
                id="productQuantity"
                value="1"
                min="1"
                class="quantity-input"
              />
              <button type="button" id="increaseButton">+</button>
            </div>
          </div>
        </div>

        <!-- ×”×•×¡×¤×ª ×©×“×” ×‘×—×™×¨×ª ×¡×•×’ ×œ×—× ×œ×‘×™×¡×™× -->
        <div id="breadTypeDiv" style="display: none">
          <label for="breadType">×¡×•×’ ×œ×—×:</label>
          <select id="breadType">
            <!-- <option value="">×‘×—×¨</option> -->
            <!-- ×‘×¨×™×¨×ª ××—×“×œ ×¨×™×§×” -->
            <option value="×‘×™×¡ ×©×•××©×•×">×‘×™×¡ ×©×•××©×•×</option>
            <option value="×‘×™×¡ ×‘×¨×™×•×© ××œ×‘×Ÿ">×‘×™×¡ ×‘×¨×™×•×© ××œ×‘×Ÿ</option>
            <!-- <option value="×‘×™×¡ ×‘×¨×™×•×©">×‘×™×¡ ×‘×¨×™×•×©</option> -->
            <option value="×‘×™×¡ ×§××— ××œ×">×‘×™×¡ ×§××— ××œ×</option>
            <option value="×‘×™×¡ ×“×’× ×™×">×‘×™×¡ ×“×’× ×™×</option>
            <option value="×‘×™×¡ ×¤×¨×’">×‘×™×¡ ×¤×¨×’</option>
            <option value="×‘×™×¡ ×©×—×•×¨">×‘×™×¡ ×©×—×•×¨ (××‘×¥ ××—××¦×ª)</option>
            <option value="×‘×™×¡ ××“×•×-×¡×œ×§">×‘×™×¡ ××“×•×-×¡×œ×§</option>
          </select>
        </div>

        <label for="note">×”×¢×¨×•×ª:</label>
        <input type="text" id="productNote" placeholder="×”×–×Ÿ ×”×¢×¨×•×ª ×›××Ÿ" />

        <label for="productChoice">×‘×—×¨ ×¡×•×’ ×¤×¨×™×˜:</label>
        <br /><br />
        <div style="display: flex; align-items: center; gap: 20px">
          <div class="radio-container">
            <input
              type="radio"
              id="quantityOption"
              name="productChoice"
              value="quantity"
              checked
              onchange="updateSelectedRadio()"
            />
            <label for="quantityOption">×œ×¤×™ ×›××•×ª</label>
          </div>

          <div class="radio-container">
            <input
              type="radio"
              id="sizeOption"
              name="productChoice"
              value="size"
              onchange="updateSelectedRadio()"
            />
            <label for="sizeOption">×œ×¤×™ ×’×•×“×œ</label>
          </div>

          <div class="radio-container">
            <input
              type="radio"
              id="noneOption"
              name="productChoice"
              value="none"
              onchange="toggleQuantitySize(); updateSelectedRadio()"
            />
            <label for="noneOption">×œ×œ× ×’×•×“×œ/×›××•×ª</label>
          </div>
        </div>
        <br /><br />
        <!-- ×©×“×” ×¢×‘×•×¨ ×›××•×ª -->
        <div
          id="quantityDiv"
          style="
            align-items: center;
            gap: 50px;
            margin-top: 10px;
            font-weight: bold;
          "
        >
          <label for="unitQuantity">×›××•×ª:</label>
          <br />
          <input
            type="number"
            id="unitQuantity"
            value="20"
            style="width: 150px"
            class="input-box"
          />
          <select id="unitType" class="input-box">
            <option value="×™×—×™'">×™×—×™'</option>
            <option value="×›×•×¡×•×ª">×›×•×¡×•×ª</option>
          </select>
        </div>
        <!-- ×©×“×” ×¢×‘×•×¨ ×’×•×“×œ -->
        <div id="sizeDiv" style="display: none; margin-top: 10px">
          <label for="productSize">×’×•×“×œ:</label>
          <select id="productSize" class="input-box">
            <option value="medium">×‘×™× ×•× ×™</option>
            <option value="large">×’×“×•×œ</option>
          </select>
        </div>
        <br />
        <button aria-label="×”×•×¡×£ ×œ×¡×™×›×•×" onclick="addProduct()">
          ×”×•×¡×£ ×œ×¡×™×›×•×
        </button>
      </div>
      <div>
        <label for="temperature">×‘×—×¨ ××¦×‘ ×—×/×§×¨:</label>
        <select id="temperature" name="temperature">
          <option value="">×‘×—×¨</option>
          <!-- ×‘×¨×™×¨×ª ××—×“×œ ×¨×™×§×” -->
          <option value="×—×">×—×</option>
          <option value="×§×¨">×§×¨</option>
        </select>
      </div>
      <br />

      <!-- ×”×•×¡×£ ××ª ×–×” ×‘××§×•× ×”××ª××™× ×‘×˜×•×¤×¡ ×©×œ×š -->
      <!-- <div>
  <label>
    <input type="radio" name="temperature" id="hotOption"> ×—×
  </label>
  <label>
    <input type="radio" name="temperature" id="coldOption"> ×§×¨
  </label>
</div> -->
      <div id="summary">
        <h2>×¡×™×›×•× ×”×–×× ×”</h2>
        <p id="orderInfo"></p>
        <div id="kitchen">
          <div class="category-title">××˜×‘×—:</div>
          <ul id="kitchenList"></ul>
        </div>
        <div id="bakery">
          <div class="category-title">×§×•× ×“×™×˜×•×¨×™×”:</div>
          <ul id="bakeryList"></ul>
        </div>
        <div id="online">
          <div class="category-title">××•× ×œ×™×™×Ÿ:</div>
          <ul id="onlineList"></ul>
        </div>
        <div id="warehouse">
          <div class="category-title">××—×¡×Ÿ:</div>
          <ul id="warehouseList"></ul>
        </div>
        <!-- ×”×•×¡×¤×” ××—×¨×™ ×©××¨ ×”×§×˜×’×•×¨×™×•×ª -->
        <div id="amar">
          <div class="category-title">×§×•× ×“×™×˜×•×¨×™×™×ª ×¢××¨:</div>
          <ul id="amarList"></ul>
          <div
            id="amarSummaryDisplay"
          ></div>
        </div>
        <div id="sushi">
          <div class="category-title">×¡×•×©×™:</div>
          <ul id="sushiList"></ul>
        </div>
        <div id="kitchenProducts">
          <div class="category-title">××•×¦×¨×™ ××˜×‘×—:</div>
          <ul id="kitchenProductsList"></ul>
        </div>
        <div class="hot-cold-row">
          <strong class="category-title">××¦×‘ ×—×/×§×¨:</strong>
          <span id="notesSummary"></span>
        </div>
      </div>

      <div id="order-summary" style="display: none;"></div>
      <!-- ×œ×™×“ ×”×›×¤×ª×•×¨×™× ×”×§×™×™××™× -->
      <!-- <button id="copyButton" onclick="copySummary()">×”×¢×ª×§ ×¡×™×›×•× ×”×–×× ×”</button> -->
      <!-- <button id="whatsappButton" onclick="openWhatsAppModal()">×©×œ×™×—×ª ×•×”×¢×ª×§×” ×¡×™×›×•× ×›×œ×œ×™</button> -->
      <div class="summary-buttons-grid">

        <button onclick="smartSortByTemperature()" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);">
          ğŸ”„<br>×¡×™×“×•×¨ ×—×›×<br>×œ×¤×™ ×—×-×§×¨
        </button>
        <button id="whatsappGeneralButton" onclick="openWhatsAppGeneralModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br> ×›×œ×œ×™
        </button>
        <button id="whatsappKitchenProductsButton" onclick="openWhatsAppKitchenProductsModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br>××•×¦×¨×™ ××˜×‘×—
        </button>
        <button id="whatsappFruitsButton" onclick="openWhatsAppFruitsModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br>×¤×™×¨×•×ª
        </button>
        <button id="whatsappBakeryButton" onclick="openWhatsAppBakeryModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br>×§×•× ×“×™×˜×•×¨×™×”
        </button>
        <button id="whatsappWarehouseButton" onclick="openWhatsAppWarehouseModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br>××—×¡×Ÿ
        </button>
        <button id="whatsappSushiButton" onclick="openWhatsAppSushiModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br>×¡×•×©×™
        </button>
        <button id="whatsappAmarButton" onclick="openWhatsAppAmarModal()">
          <span class="wa-icon">whatsapp</span>
          ×©×œ×™×—×ª ×¡×™×›×•×<br>×§×•× ×“×™×˜×•×¨×™×™×ª ×¢××¨
        </button>
       
       
      </div>


      <div id="tacton">
        ×”××ª×¨ × ×‘× ×” ×•×¢×•×¦×‘ ×¢×œ ×™×“×™ ××•×™×©×™ ×‘ | mchb0556706325@gmail.com | 0515157166
      </div>
    </div>

    <div id="copy-notification" class="notification">
      <!-- ×”×”×•×“×¢×” ×ª×•×¦×’ ×›××Ÿ -->
    </div>
    <div id="notification" class="notification"></div>

    <!-- ×‘×¡×•×£ ×”×‘×•×“×™, ×œ×¤× ×™ ×”×¡×§×¨×™×¤×˜×™× -->
    <div class="overlay" id="overlay"></div>
    <div class="edit-popup" id="editPopup">
      <h3>×¢×¨×™×›×ª ×¤×¨×™×˜</h3>
      <textarea
        id="editItemText"
        placeholder="×¢×¨×•×š ××ª ×¤×¨×˜×™ ×”×¤×¨×™×˜ ×›××Ÿ"
      ></textarea>
      <div class="popup-buttons">
        <button class="save-btn" onclick="saveEdit()">×©××•×¨</button>
        <button class="cancel-btn" onclick="closeEditPopup()">×‘×™×˜×•×œ</button>
      </div>
    </div>

    <script>
      // ×©××™×¨×” ×¢× Enter ×‘×ª×•×š ×—×œ×•×Ÿ ×”×¢×¨×™×›×”
      (function(){
        try {
          const txt = document.getElementById('editItemText');
          if (txt && !txt._enterBound) {
            txt.addEventListener('keydown', function(e){
              if (e.key === 'Enter' && (e.ctrlKey || e.metaKey || !e.shiftKey)) {
                e.preventDefault();
                try { saveEdit(); } catch {}
              }
            });
            txt._enterBound = true;
          }
        } catch {}
      })();
    </script>

    <!-- WhatsApp Modal -->
    <div id="whatsappModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppModal()">&times;</span>
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ×”×–×× ×” ×œ×•×•××˜×¡××¤</h2>
        <div
          id="waEditable"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppMessage()" class="send-btn">
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copyCurrentSummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- Fruits WhatsApp Modal -->
    <div id="whatsappFruitsModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppFruitsModal()">&times;</span>
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ×¤×™×¨×•×ª ×œ×•×•××˜×¡××¤</h2>
        <div
          id="waEditableFruits"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppFruitsMessage()" class="send-fruits-btn">
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copyFruitSummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppFruitsModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ×”×•×¡×¤×ª ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” -->
    <div id="duplicateMessageModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” ×œ×¤×™×¨×•×ª -->
    <div id="duplicateFruitsModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmFruitsResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateFruitsModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- Bakery WhatsApp Modal -->
    <div id="whatsappBakeryModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppBakeryModal()">&times;</span>
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ×§×•× ×“×™×˜×•×¨×™×” ×œ×•×•××˜×¡××¤</h2>
        <div
          id="waEditableBakery"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppBakeryMessage()" class="send-bakery-btn">
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copyBakerySummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppBakeryModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” ×œ×§×•× ×“×™×˜×•×¨×™×” -->
    <div id="duplicateBakeryModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmBakeryResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateBakeryModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” ×œ×§×•× ×“×™×˜×•×¨×™×” -->
    <div id="duplicateBakeryModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmBakeryResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateBakeryModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>
    <!-- Amar WhatsApp Modal -->
    <div id="whatsappAmarModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppAmarModal()">&times;</span>
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ×§×•× ×“×™×˜×•×¨×™×™×ª ×¢××¨ ×œ×•×•××˜×¡××¤</h2>
        <div
          id="waEditableAmar"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppAmarMessage()" class="send-amar-btn">
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copyAmarSummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppAmarModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” ×œ×¢××¨ -->
    <div id="duplicateAmarModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmAmarResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateAmarModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- Sushi WhatsApp Modal -->
    <div id="whatsappSushiModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppSushiModal()">&times;</span>
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ×¡×•×©×™ ×œ×•×•××˜×¡××¤</h2>
        <div>×©×™××• ×œ×‘ ×–×” ×œ× ××ª×™×™×’ ××ª ××‘×™ ×‘××•×¤×Ÿ ××•×˜×•××˜×™ × × ×œ×ª×™×™×’ ×™×“× ×™ ×‘×§×‘×•×¦×”</div>
        <br />
        <div
          id="waEditableSushi"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppSushiMessage()" class="send-sushi-btn">
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copySushiSummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppSushiModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” ×œ×¡×•×©×™ -->
    <div id="duplicateSushiModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmSushiResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateSushiModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- Warehouse WhatsApp Modal -->
    <div id="whatsappWarehouseModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppWarehouseModal()"
          >&times;</span
        >
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ××—×¡×Ÿ ×œ×•×•××˜×¡××¤</h2>
        <div
          id="waEditableWarehouse"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button
            onclick="sendWhatsAppWarehouseMessage()"
            class="send-warehouse-btn"
          >
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copyWarehouseSummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppWarehouseModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>

    <!-- ××•×“×œ ××™×©×•×¨ ×©×œ×™×—×” ×›×¤×•×œ×” ×œ××—×¡×Ÿ -->
    <div id="duplicateWarehouseModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">âš ï¸</div>
        <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
        <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmWarehouseResend()" class="confirm-btn">
            ×›×Ÿ, ×©×œ×— ×©×•×‘
          </button>
          <button onclick="closeDuplicateWarehouseModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>
<!-- Kitchen Products WhatsApp Modal -->
<div id="whatsappKitchenProductsModal" class="modal" style="display: none">
  <div class="modal-content wa-modal-content">
    <span class="close" onclick="closeWhatsAppKitchenProductsModal()">&times;</span>
    <h2>×©×œ×™×—×ª ×¡×™×›×•× ××•×¦×¨×™ ××˜×‘×— ×œ×•×•××˜×¡××¤</h2>
    <div
      id="waEditableKitchenProducts"
      class="wa-preview wa-editable"
      contenteditable="true"
      spellcheck="false"
    ></div>
    <div class="modal-buttons">
      <button onclick="sendWhatsAppKitchenProductsMessage()" class="send-kitchen-products-btn">
        ×©×œ×— ×œ×•×•××˜×¡××¤
      </button>
      <button onclick="copyKitchenProductsSummary()" class="copy-btn">
        ×”×¢×ª×§ ×¡×™×›×•×
      </button>
      <button class="cancel-btn" onclick="closeWhatsAppKitchenProductsModal()">×‘×™×˜×•×œ</button>
    </div>
  </div>
</div>


<div id="duplicateKitchenProductsModal" class="modal" style="display: none">
  <div class="modal-content confirmation-modal">
    <div class="confirmation-icon">âš ï¸</div>
    <h3>×©×œ×™×—×” ×—×•×–×¨×ª</h3>
    <p>×”×”×•×“×¢×” ×›×‘×¨ × ×©×œ×—×” ×‘×¢×‘×¨. ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×©×œ×•×— ×©×•×‘?</p>
    <div class="confirmation-buttons">
      <button onclick="confirmKitchenProductsResend()" class="confirm-btn">×›×Ÿ, ×©×œ×— ×©×•×‘</button>
      <button onclick="closeDuplicateKitchenProductsModal()" class="cancel-btn">×‘×™×˜×•×œ</button>
    </div>
  </div>
</div>


    <!-- WhatsApp General Modal -->
    <div id="whatsappGeneralModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppGeneralModal()">&times;</span>
        <h2>×©×œ×™×—×ª ×¡×™×›×•× ×”×–×× ×” ×›×œ×œ×™ ×œ×•×•××˜×¡××¤</h2>
        <label for="waDaySelect"><b>×‘×—×¨ ×™×•× ×œ×©×œ×™×—×”</b></label>
        <select id="waDaySelect">
          <option value="×¨××©×•×Ÿ">×™×•× ×¨××©×•×Ÿ</option>
          <option value="×©× ×™">×™×•× ×©× ×™</option>
          <option value="×©×œ×™×©×™">×™×•× ×©×œ×™×©×™</option>
          <option value="×¨×‘×™×¢×™">×™×•× ×¨×‘×™×¢×™</option>
          <option value="×—××™×©×™">×™×•× ×—××™×©×™</option>
          <option value="×©×™×©×™">×™×•× ×©×™×©×™</option>
        </select>
        <div
          id="waEditableGeneral"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button
            onclick="sendWhatsAppGeneralMessage()"
            class="send-general-btn"
          >
            ×©×œ×— ×œ×•×•××˜×¡××¤
          </button>
          <button onclick="copyGeneralSummary()" class="copy-btn">
            ×”×¢×ª×§ ×¡×™×›×•×
          </button>
          <button onclick="closeWhatsAppGeneralModal()" class="cancel-btn">
            ×‘×™×˜×•×œ
          </button>
        </div>
      </div>
    </div>



  </div>
</div> <!-- ×¡×•×£ mainContent -->

    <style>






.summary-buttons-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 10px;
  justify-items: center;
  margin: 10px auto 0 auto;
  width: 100%;
  max-width: 1120px;
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.06);
  padding: 18px 10px 10px 10px;
  direction: rtl;
}

#orders-management-btn{
  background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(40,167,69,0.3);
            transition: all 0.3s ease;
            margin: 10px;
            display: none;}
@media (max-width: 600px) {
  #orders-management-btn {
    max-width: 150px;
    font-size: 15px;
    /* max-height: 100px; */
    /* margin: 5px 0 0 0;
    padding: 5px 0 0 0; */
  }
}


#product-management-btn{
  background: linear-gradient(135deg, #0f17b8 0%, #2c29d4 100%);
            color: rgb(255, 255, 255);
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(40,167,69,0.3);
            transition: all 0.3s ease;
            margin: 10px;
            display: none;}
@media (max-width: 600px) {
  #product-management-btn {
    max-width: 150px;
    font-size: 15px;
    /* max-height: 100px; */
    /* margin: 5px 0 0 0;
    padding: 5px 0 0 0; */
  }
}

.summary-buttons-grid button {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: linear-gradient(90deg, #1126cc 0%, #6170de 100%);
  color: #fff;
  border: none;
  padding: 14px 8px 12px 8px;
  font-size: 1.3em;
  border-radius: 18px;
  font-weight: bold;
  box-shadow: 0 1px 4px rgba(0,0,0,0.07);
  cursor: pointer;
  transition: background 0.18s, transform 0.12s, box-shadow 0.18s;
  min-width: 0;
  width: 80%;
  line-height: 1.2;
  white-space: normal;
  word-break: break-word;
  min-height: 54px;
}

.summary-buttons-grid button:hover {
  background: linear-gradient(90deg, #128c7e 0%, #25d366 100%);
  transform: translateY(-1px) scale(1.03);
  box-shadow: 0 2px 8px rgba(0,0,0,0.13);
}

.summary-buttons-grid .wa-icon {
  font-family: 'Material Icons';
  font-size: 0.3em;
  margin-left: 3px;
  vertical-align: middle;
}
@media (max-width: 600px) {
  .summary-buttons-grid {
    grid-template-columns: 1fr 1fr;
    gap: 7px;
    max-width: 99vw;
    padding: 10px 2px 6px 2px;
  }
  .summary-buttons-grid button {
    font-size: 1.1em;
    padding: 10px 4px;
    min-height: 28px;
  }
}





      /* ×¡×’× ×•× ×•×ª ×§×™×™××™× */
      .wa-modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 16px 12px 12px 12px;
        border: 1px solid #888;
        width: 98%;
        max-width: 420px;
        border-radius: 12px;
        direction: rtl;
        box-sizing: border-box;
      }

      /* ×¡×’× ×•× ×•×ª ×œ××•×“×œ ×”××™×©×•×¨ */
      .confirmation-modal {
        background-color: #ffffff;
        margin: 15% auto;
        padding: 25px;
        border: none;
        width: 90%;
        max-width: 400px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        text-align: center;
        direction: rtl;
      }

      .confirmation-icon {
        font-size: 48px;
        margin-bottom: 15px;
        animation: pulse 2s infinite;
      }

      .confirmation-modal h3 {
        color: #333;
        margin: 0 0 15px 0;
        font-size: 24px;
      }

      .confirmation-modal p {
        color: #666;
        margin: 0 0 25px 0;
        font-size: 16px;
        line-height: 1.5;
      }

      .confirmation-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
      }

      .confirm-btn {
        background-color: #25d366;
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .confirm-btn:hover {
        background-color: #128c7e;
        transform: translateY(-2px);
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      /* ×¡×’× ×•× ×•×ª ×§×™×™××™× × ×•×¡×¤×™× */
      .wa-editable {
        min-height: 180px;
        max-height: 320px;
        overflow-y: auto;
        background: #e1ffc7;
        border-radius: 16px 16px 16px 0;
        border: 1.5px solid #b2e59e;
        padding: 18px 18px 18px 10px;
        margin-bottom: 10px;
        font-family: "Segoe UI", Arial, sans-serif;
        font-size: 17px;
        color: #222;
        direction: rtl;
        text-align: right;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
        white-space: pre-line;
        word-break: break-word;
        outline: none;
      }

      #copyMessage {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        z-index: 99999 !important;
        background: linear-gradient(135deg, #eaffd0 60%, #c6f7b2 100%);
        color: #178a1c;
        font-weight: bold;
        font-size: 1.1em;
        padding: 10px 28px;
        border-radius: 16px;
        box-shadow: 0 2px 12px 0 #b2e59e33;
        min-width: 120px;
        max-width: 90vw;
        text-align: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s, top 0.3s;
      }
      #copyMessage.show {
        opacity: 1;
        pointer-events: auto;
        top: 38px !important;
      }

      .close {
        color: #222;
        float: left;
        font-size: 34px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.2s, transform 0.2s;
        user-select: none;
      }
      .close:hover {
        color: #25d366;
        transform: scale(1.18) rotate(-8deg);
        cursor: pointer;
      }

      .copy-btn {
        background: linear-gradient(90deg, #00c6ff 0%, #0072ff 100%);
        color: #dc0000;
        border: none;
        border-radius: 24px;
        padding: 10px 28px;
        font-size: 18px;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: background 0.2s, transform 0.2s;
        margin: 0 8px;
        outline: none;
      }
      .copy-btn:hover {
        background: linear-gradient(90deg, #0072ff 0%, #00c6ff 100%);
        transform: translateY(-2px) scale(1.04);
      }

      /* ×”×•×“×¢×•×ª ×§×•×¤×¦×•×ª ×ª××™×“ ×‘××¨×›×–, ×¢×™×¦×•×‘ ××•×“×¨× ×™ ×•×™×“×™×“×•×ª×™ */

      /* ×¡×’× ×•×Ÿ ×œ×× ×™××¦×™×™×ª ×”×˜×¢×™× ×” */
      .loading-spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
        margin-left: 8px;
        vertical-align: middle;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* ×¡×’× ×•×Ÿ ×œ×›×¤×ª×•×¨ ××•×©×‘×ª */
      .send-btn:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
        opacity: 0.7;
      }

      /* ×¢×™×¦×•×‘ ××•×“×œ×™× ×©×œ ×•×•××˜×¡××¤ ×•×©×œ×™×—×” ×›×¤×•×œ×” */


      .modal {

        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.685); /* ×¨×§×¢ ×›×”×” */
        display: none;
        align-items: center;
        justify-content: center;
        overflow-y: auto;

      }
      .modal[style*="display: block"] {
        display: flex !important;
      }
      .modal-content,
      .confirmation-modal {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.592);
        padding: 24px 18px 18px 18px;
        max-width: 95vw;
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
        text-align: center;
        direction: rtl;
      }

@media (max-width: 800px) {
  .modal-content {
    max-width: 88vw;
    width: 80vw;
    min-width: 0;
    padding: 14px 4vw 10px 4vw;
    font-size: 1em;
    margin: 10px auto;
    border-radius: 14px;
  }
  .modal {
    padding: 0;
  }
}
      .wa-editable {
        min-height: 120px;
        background: #e1ffc7;
        border-radius: 12px;
        border: 1.5px solid #b2e59e;
        padding: 14px;
        margin-bottom: 12px;
        font-size: 17px;
        color: #222;
        outline: none;
        text-align: right;
      }
      .modal-buttons,
      .confirmation-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 10px;
        flex-wrap: wrap;
      }
      .send-btn,
      .copy-btn,
      .cancel-btn,
      .confirm-btn {
        border: none;
        border-radius: 8px;
        padding: 10px 18px;
        font-size: 16px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s;
      }
      .send-btn,
      .confirm-btn {
        background: #25d366;
        color: #fff;
      }
      .send-btn:hover,
      .confirm-btn:hover {
        background: #128c7e;
      }
      .copy-btn {
        background: #16eb07;
        color: #333;
      }
      .copy-btn:hover {
        background: #00720a;
      }
      .cancel-btn {
        background: #ff4444;
        color: #fff;
      }
      .cancel-btn:hover {
        background: #cc0000;
      }
      .confirmation-icon {
        font-size: 40px;
        margin-bottom: 10px;
      }
      @media (max-width: 600px) {
        .modal-content,
        .confirmation-modal {
          max-width: 98vw;
          padding: 10px 2vw;
        }
        .wa-editable {
          font-size: 15px;
          padding: 10px;
        }
        .send-btn,
        .copy-btn,
        .cancel-btn,
        .confirm-btn {
          font-size: 15px;
          padding: 8px 8px;
        }
      }
    </style>

    <script>
      // ×”×’×“×¨×ª ××©×ª× ×™× ×’×œ×•×‘×œ×™×™× ×‘×ª×—×™×œ×ª ×”×¡×§×¨×™×¤×˜
      window.currentEditItem = null;
      window.currentEditCategory = null;

      // ×˜×™×¤×•×œ ×‘×©×’×™××•×ª JavaScript ×œ× ××˜×•×¤×œ×•×ª
      window.addEventListener('unhandledrejection', function(event) {
        console.warn('Unhandled promise rejection:', event.reason);
        // ×× ×¢ ×”×¦×’×ª ×”×©×’×™××” ×‘×§×•× ×¡×•×œ×” ×©×œ ×”×“×¤×“×¤×Ÿ
        event.preventDefault();
      });

      window.addEventListener('error', function(event) {
        console.warn('JavaScript error:', event.error);
        // ×× ×¢ ×”×¦×’×ª ×”×©×’×™××” ×‘×§×•× ×¡×•×œ×” ×©×œ ×”×“×¤×“×¤×Ÿ
        event.preventDefault();
      });



// ×ª××™×›×” ×‘-Enter ×œ×”×•×¡×¤×ª ××•×¦×¨ ×œ×¡×™×›×•× (×¨×§ ×‘×©×“×•×ª ×”×¨×œ×•×•× ×˜×™×™×)
['productCode', 'productQuantity', 'productNote', 'productSize', 'breadType', 'unitQuantity', 'unitType'].forEach(function(id) {
  var el = document.getElementById(id);
  if (el) {
    el.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        var popupOpen = document.querySelector('.modal[style*="display: block"]');
        if (!popupOpen) {
          addProduct();
        }
      }
    });
  }
});



// ×× ×–×” ××¤×¨×™×¢ ××¤×©×¨ ×œ××—×•×§
document.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    // ×‘×“×•×§ ×©××™×Ÿ ×¤×•×¤××¤ ×¤×ª×•×—
    var popupOpen = document.querySelector('.modal[style*="display: block"]');
    // ×‘×“×•×§ ×©××™×Ÿ ×¤×•×§×•×¡ ×¢×œ ××—×“ ××”×©×“×•×ª (×›×“×™ ×œ× ×œ×”×¤×¢×™×œ ×¤×¢××™×™×)
    var active = document.activeElement;
    var relevantIds = ['productCode', 'productQuantity', 'productNote', 'productSize', 'breadType', 'unitQuantity', 'unitType'];
    if (!popupOpen && !relevantIds.includes(active.id)) {
      // ×‘×“×•×§ ×©×›×œ ×”×©×“×•×ª ×”× ×“×¨×©×™× ××œ××™× (×œ××©×œ productCode ×•×›××•×ª)
      var code = document.getElementById('productCode').value.trim();
      var qty = document.getElementById('productQuantity').value.trim();
      if (code && qty) {
        addProduct();
      }
    }
  }
});
// ×”×•×¡×¤×” ××•×˜×•××˜×™×ª ×œ×¡×™×›×•× ×¨×§ ×›××©×¨ ××“×‘×™×§×™× ××§×´×˜ (paste)


      // × ×ª×•× ×™ ××•×¦×¨×™× ×××•×—×“×™× - ×›×œ ×”××™×“×¢ ×‘××§×•× ××—×“
      window.unifiedProductData = {
        12628: { 
          name: "××’×© ×‘×™×¡ ×˜×•× ×”", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "×™×—×™'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 ×™×—×™", price: 170 },
            { size: "20 ×™×—×™", price: 285 },
          ]
        },
      
       
        415: { 
          name: "××’×© ×§×¨×•××¡×•×Ÿ ×¡×œ×˜ ×˜×•× ×”", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "×™×—×™'",
          predefinedQuantities: [15, 20],
          sizes: [
            { size: "15 ×™×—×™", price: 0 },
            { size: "20 ×™×—×™", price: 0 },
          ]
        },
      };



      function createQuantityDatalist(quantities, currentValue) {
        // ××•×—×§ ×¨×©×™××” ×§×•×“××ª ×× ×§×™×™××ª
        const existingList = document.getElementById("quantityOptionsList");
        if (existingList) {
          existingList.remove();
        }

        // ××•×—×§ ×›×¤×ª×•×¨ ×§×•×“× ×× ×§×™×™×
        const existingButton = document.querySelector(".quantity-toggle-btn");
        if (existingButton) {
          existingButton.remove();
        }

        const quantityInput = document.getElementById("unitQuantity");
        if (!quantityInput) return;

        // ×™×•×¦×¨ ×›×¤×ª×•×¨ ×œ×”×¦×’×ª ××¤×©×¨×•×™×•×ª
        const toggleButton = document.createElement("button");
        toggleButton.type = "button";
        toggleButton.className = "quantity-toggle-btn";
        toggleButton.innerHTML = "â†“â†“";
        toggleButton.style.cssText = `
        position: absolute;
        right: 25px;
        top: 50%;
        transform: translateY(-50%);
        background-color: #c1232324;
        border: none;
        cursor: pointer;
        padding: 0 15px;
        font-size: 14px;
        color: #007bff;
    `;

        // ×™×•×¦×¨ ×¨×©×™××ª ××¤×©×¨×•×™×•×ª
        const optionsList = document.createElement("ul");
        optionsList.id = "quantityOptionsList";
        optionsList.style.cssText = `
        position: absolute;
        list-style: none;
        padding: 5px 0;
        margin: 0;
        background: white;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        z-index: 1000;
        display: none;
        width: 100px;
        right: 25px;
    `;

        // ××•×¡×™×£ ××ª ×›×œ ×”××¤×©×¨×•×™×•×ª ×œ×¨×©×™××” (×œ×œ× ×‘×“×™×§×” ×× ×–×” ×”×¢×¨×š ×”× ×•×›×—×™)
        quantities.forEach((quantity) => {
          const li = document.createElement("li");
          li.textContent = quantity;
          li.style.cssText = `
            padding: 8px 15px;
            cursor: pointer;
            text-align: center;
            ${quantity == currentValue ? "background-color: #f0f0f0;" : ""}
        `;
          li.onmouseover = () => (li.style.backgroundColor = "#f0f0f0");
          li.onmouseout = () =>
            (li.style.backgroundColor =
              quantity == currentValue ? "#f0f0f0" : "white");
          li.onclick = () => {
            quantityInput.value = quantity;
            quantityInput.dispatchEvent(new Event("change"));
            optionsList.style.display = "none";
          };
          optionsList.appendChild(li);
        });

        // ××•×¡×™×£ ××ª ×”×›×¤×ª×•×¨ ×•×”×¨×©×™××”
        quantityInput.parentElement.style.position = "relative";
        quantityInput.parentElement.appendChild(toggleButton);
        quantityInput.parentElement.appendChild(optionsList);

        // ××˜×¤×œ ×‘×œ×—×™×¦×” ×¢×œ ×”×›×¤×ª×•×¨
        toggleButton.onclick = (e) => {
          e.preventDefault();
          optionsList.style.display =
            optionsList.style.display === "none" ? "block" : "none";
        };

        // ××¡×ª×™×¨ ××ª ×”×¨×©×™××” ×‘×œ×—×™×¦×” ××—×•×¥
        document.addEventListener("click", (e) => {
          if (
            !quantityInput.contains(e.target) &&
            !toggleButton.contains(e.target) &&
            !optionsList.contains(e.target)
          ) {
            optionsList.style.display = "none";
          }
        });
      }

      function configureProduct(productCode) {
        console.log("×× ×¡×” ×œ×”×’×“×™×¨ ××•×¦×¨:", productCode);

        const config = window.unifiedProductData[productCode];
        if (!config) {
          console.log("××•×¦×¨ ×œ× ××•×’×“×¨ ×‘×¨×©×™××”, ××©××™×¨ ×”×’×“×¨×•×ª ×‘×¨×™×¨×ª ××—×“×œ");
          const existingList = document.getElementById("quantityOptionsList");
          const existingButton = document.querySelector(".quantity-toggle-btn");
          if (existingList) existingList.remove();
          if (existingButton) existingButton.remove();
          return;
        }

        try {
          if (config.type === "none") {
            const noneRadio = document.getElementById("noneOption");
            if (noneRadio) {
              noneRadio.checked = true;
              noneRadio.dispatchEvent(new Event("change"));
            }
          } else if (config.type === "size") {
            const sizeRadio = document.getElementById("sizeOption");
            if (sizeRadio) {
              sizeRadio.checked = true;
              sizeRadio.dispatchEvent(new Event("change"));

              setTimeout(() => {
                const sizeSelect = document.getElementById("productSize");
                if (sizeSelect) {
                  sizeSelect.value = config.defaultSize;
                  sizeSelect.dispatchEvent(new Event("change"));
                }
              }, 100);
            }
          } else if (config.type === "quantity") {
            const quantityRadio = document.getElementById("quantityOption");
            if (quantityRadio) {
              quantityRadio.checked = true;
              quantityRadio.dispatchEvent(new Event("change"));

              setTimeout(() => {
                const quantityInput = document.getElementById("unitQuantity");
                const unitSelect = document.getElementById("unitType");

                if (quantityInput) {
                  quantityInput.value = config.defaultQuantity;
                  if (config.predefinedQuantities) {
                    createQuantityDatalist(
                      config.predefinedQuantities,
                      config.defaultQuantity
                    );
                  }
                  quantityInput.dispatchEvent(new Event("change"));
                }
                if (unitSelect) {
                  unitSelect.value = config.unit;
                  unitSelect.dispatchEvent(new Event("change"));
                }
              }, 100);
            }
          }
        } catch (error) {
          console.log("×©×’×™××” ×‘×”×’×“×¨×ª ×”××•×¦×¨:", error);
        }
      }

      // ×”×¤×•× ×§×¦×™×” ×©×œ ×”×”×“×‘×§×” - × ××—×§×ª ×›×™ ×™×© ×’×¨×¡×” ×—×“×©×” ×‘×¡×•×£ ×”×§×•×‘×¥

      // ××•×¡×™×¤×™× ××ª ×”×§×•×“ ×”×–×” ×‘×¡×•×£ ×”×§×•×‘×¥
      let timeoutId = null;

      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          // ××‘×˜×œ ×˜×™×™××¨ ×§×•×“× ×× ×§×™×™×
          if (timeoutId) {
            clearTimeout(timeoutId);
          }

          const inputValue = e.target.value.trim();

          // ×‘×“×™×§×” ×©×”×§×œ×˜ ××™× ×• URL
          if (inputValue.startsWith('http://') || inputValue.startsWith('https://')) {
            e.target.value = '';
            showNotification('×œ× × ×™×ª×Ÿ ×œ×”×–×™×Ÿ URL, ×™×© ×œ×”×–×™×Ÿ ×¨×§ ××§"×˜', 'red');
            return;
          }

          // ×× ×”×©×“×” ×¨×™×§ - ×××¤×¡ ××ª ×”×‘×—×™×¨×”
          if (!inputValue) {
            // ××¡××Ÿ ××ª ×›×¤×ª×•×¨ "×œ×¤×™ ×›××•×ª" ×›×‘×¨×™×¨×ª ××—×“×œ
            const quantityRadio = document.getElementById("quantityOption");
            if (quantityRadio) {
              quantityRadio.checked = true;
              quantityRadio.dispatchEvent(new Event("change"));
            }

            // ×× ×§×” ××ª ×”××¤×©×¨×•×™×•×ª ×”×§×™×™××•×ª
            const existingList = document.getElementById("quantityOptionsList");
            const existingButton = document.querySelector(
              ".quantity-toggle-btn"
            );
            const quantityInput = document.getElementById("unitQuantity");

            if (existingList) existingList.remove();
            if (existingButton) existingButton.remove();
            if (quantityInput) quantityInput.value = "";

            document.getElementById("breadTypeDiv").style.display = "none";
            return;
          }

          // ×××©×™×š ×›×¨×’×™×œ ×× ×™×© ×¢×¨×š
          timeoutId = setTimeout(() => {
            const code = e.target.value.trim();
            if (!code) return;
            // ×¡× ×›×¨×•×Ÿ ×ª×™×‘×ª ×”×—×™×¤×•×© ×•×”×¦×’×ª ×ª×•×¦××•×ª
            const si = document.getElementById("searchInput");
            if (si) si.value = code;
            if (typeof window.searchProduct === 'function') {
              window.searchProduct();
            }
            // ×§×•× ×¤×™×’×•×¨×¦×™×” ×¨×§ ×× ×–×” ××§"×˜ ××¡×¤×¨×™ ×©×§×™×™× ×‘××¢×¨×›×ª
            const isNumeric = /^\d+$/.test(code);
            const exists = typeof window.unifiedProductData === 'object' && window.unifiedProductData && window.unifiedProductData[code];
            if (isNumeric && exists && typeof configureProduct === 'function') {
              console.log('× ××¦× ××§"×˜ (×”×§×œ×“×”):', code);
              configureProduct(code);
            }
          }, 500);
        });

      // ×¤×•× ×§×¦×™×™×ª pasteFromClipboard ×”×•×—×œ×¤×” ×‘×’×¨×¡×” ×—×“×©×” ×‘×¡×•×£ ×”×§×•×‘×¥

      document
        .getElementById("increaseButton")
        .addEventListener("click", function () {
          const quantityInput = document.getElementById("productQuantity");
          quantityInput.value = parseInt(quantityInput.value) + 1; // Increase quantity by 1
        });

      document
        .getElementById("decreaseButton")
        .addEventListener("click", function () {
          const quantityInput = document.getElementById("productQuantity");
          const currentValue = parseInt(quantityInput.value);
          if (currentValue > 1) {
            quantityInput.value = currentValue - 1; // Decrease quantity by 1, but not below 1
          }
        });

      function updateSelectedRadio() {
        const radioContainers = document.querySelectorAll(".radio-container");
        radioContainers.forEach((container) => {
          const radio = container.querySelector('input[type="radio"]');
          if (radio.checked) {
            container.classList.add("selected"); // Add selected class if checked
          } else {
            container.classList.remove("selected"); // Remove selected class if not checked
          }
        });
      }

      // Call this function on page load to set the initial state
      updateSelectedRadio();
      // ×˜×¢×™× ×ª ×¤×¨×˜×™ ×”×”×–×× ×” ××“×¤×“×¤×Ÿ ×‘×¢×ª ×¤×ª×™×—×ª ×”×“×£
      document.addEventListener("DOMContentLoaded", () => {
        document
          .getElementById("orderDate")

          .addEventListener("change", saveOrderDetails);
        document
          .getElementById("orderTime")
          .addEventListener("change", saveOrderDetails);
        document
          .getElementById("orderNumber")
          .addEventListener("change", saveOrderDetails);
        displayOrderInfo();
      });

      // ×©××™×¨×ª ×¤×¨×˜×™ ×”×”×–×× ×” ×‘-Local Storage
      function saveOrderDetails() {
        const orderNumber = document.getElementById("orderNumber").value;
        const orderDate = document.getElementById("orderDate").value;
        const orderTime = document.getElementById("orderTime").value;
        const temperature = document.getElementById("temperature").value; // ×©××™×¨×ª ××¦×‘ ×—×/×§×¨
        localStorage.setItem("orderNumber", orderNumber);
        localStorage.setItem("orderDate", orderDate);
        localStorage.setItem("orderTime", orderTime);
        localStorage.setItem("temperature", temperature); // ×©××™×¨×ª ×‘×—×™×¨×” ×©×œ ×—×/×§×¨

        // ×©××™×¨×ª ×¨×©×™××•×ª ×”××•×¦×¨×™×
        ["kitchen", "bakery",  "kitchenProducts", "online", "warehouse"].forEach((category) => {
          const items = Array.from(
            document.getElementById(`${category}List`)?.children || []
          ).map((li) => {
            // ×§×‘×œ×ª ×”×˜×§×¡×˜ ××”××œ×× ×˜ ×”×¨××©×•×Ÿ ××• ××”××œ×× ×˜ ×¢×¦××•
            const child = li.firstElementChild;
            return child ? child.textContent : li.textContent || '';
          });
          localStorage.setItem(`${category}Items`, JSON.stringify(items));
        });

        displayOrderInfo();
      }
      function loadSavedOrder() {
        displayOrderInfo();

        ["kitchen", "bakery",  "kitchenProducts", "online", "amar", "warehouse"].forEach(
          (category) => {
            const items = JSON.parse(
              localStorage.getItem(`${category}Items`) || "[]"
            );
            const list = document.getElementById(`${category}List`);
            list.innerHTML = "";
            items.forEach((item) => {
              const li = document.createElement("li");
              li.innerHTML = `
                        <span>${item}</span>
                        <button class="delete-btn" onclick="removeProduct(this, '${category}')">××—×§</button>
                    `;
              list.appendChild(li);
            });
          }
        );
      }

      function cleanInput(input) {
        return input.trim();
      }

      // ×§×¨×™××” ×œ×¤×•× ×§×¦×™×™×ª ×”×˜×¢×™× ×” ×‘×¢×ª ×˜×¢×™× ×ª ×”×“×£
      document.addEventListener("DOMContentLoaded", loadSavedOrder);

      // ×¢×–×¨: ×©× ×™×•× ××”×ª××¨×™×š
      function getDayOfWeek(dateStr){
        const days=['×¨××©×•×Ÿ','×©× ×™','×©×œ×™×©×™','×¨×‘×™×¢×™','×—××™×©×™','×©×™×©×™','×©×‘×ª'];
        const d=new Date(dateStr); return isNaN(d)?'':days[d.getDay()];
      }

      // ×”×¦×’×ª ×¤×¨×˜×™ ×”×”×–×× ×” ×¢×œ ×”××¡×š
      function displayOrderInfo() {
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderTime = localStorage.getItem("orderTime") || "";
        const temperature = localStorage.getItem("temperature") || ""; // ×”×¦×’×ª ×—×/×§×¨
        const hasDate = Boolean(orderDate);
        const formattedDate = hasDate ? formatDateToDDMMYYYY(orderDate) : "";
        const dayName = hasDate ? getDayOfWeek(orderDate) : "";

        const dateLine = hasDate ? `<strong>×œ×ª××¨×™×š: ${formattedDate}${dayName? ' (×™×•× ' + dayName + ')' : ''}</strong><br>` : "";
        const timeLine = orderTime ? `<strong>×œ: ${orderTime}</strong>` : "";
        document.getElementById("orderInfo").innerHTML = `
          <span class="line"><strong>×”×–×× ×” ××¡: ${orderNumber}</strong></span>
          ${dateLine ? `<span class=\"line\">${dateLine.replace('<br>','')}</span>` : ''}
          ${timeLine ? `<span class=\"line\">${timeLine}</span>` : ''}
        `;

        document.getElementById("notesSummary").textContent = temperature ? `''${temperature}''` : "";
      }

      function extractBreadDetails(text) {
        const matches = text.match(/\((\d+)\s*×™×—×™'\)\s*(×‘×™×¡\s*\w+)/);
        if (matches) {
          return {
            quantity: matches[1],
            breadType: matches[2],
          };
        }
        return null;
      }

      function calculateTotalCorassonQuantity() {
        const allLists = document.querySelectorAll(
          "#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li"
        );
        let totalQuantity = 0;

        allLists.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/\d+/)[0];
            if (productCode === "12626") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*××’×©.*?\((\d+)\s*×™×—×™'/);
              if (match) {
                const trays = parseInt(match[1]);
                const unitsPerTray = parseInt(match[2]);
                totalQuantity += trays * unitsPerTray;
              }
            }
          }
        });

        return totalQuantity;
      }



      function copyFruitSummary() {
    const waEditable = document.getElementById('waEditableFruits');
    const modal = document.getElementById('whatsappFruitsModal');
    // ×× ×”××•×“×œ ×¤×ª×•×— (×›×œ×•××¨, ×”××©×ª××© ×¢×•×¨×š ×™×“× ×™×ª)
    if (modal && waEditable && modal.style.display !== "none") {
        let message = waEditable.innerHTML
            .replace(/<br><br>/g, '\n\n')
            .replace(/<div>/g, '\n')
            .replace(/<br>/g, '\n')
            .replace(/<b>(.*?)<\/b>/g, '*$1*')
            .replace(/<[^>]+>/g, '')
            .replace(/\n{3,}/g, '\n\n')
            .trim();
        if (!message) {
            showNotification('××™×Ÿ ××” ×œ×”×¢×ª×™×§', 'red');
            return;
        }
        navigator.clipboard.writeText(message)
            .then(() => showCopyNotification("×¡×™×›×•× ×¤×™×¨×•×ª ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!"))
            .catch(() => showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×¡×™×›×•× ×¤×™×¨×•×ª.", true));
    } else {
        // ×× ×”××•×“×œ ×œ× ×¤×ª×•×— â€“ ×”×¢×ª×§ ×¡×™×›×•× ××•×˜×•××˜×™ (×›××• ×”×™×•×)
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        const fruitItems = getFruitItems().map((item) => {
            const match = item.match(/(\\d+)\\s+××’×©.*?\\((.*?)\\)/);
            if (match) {
                const [_, quantity, size] = match;
                return `${quantity} ××’×© ×¤×™×¨×•×ª *${size}*`;
            }
            return item;
        });

        const totalFruitTrays = calculateTotalFruitTrays();
        if (totalFruitTrays > 0) {
            fruitItems.push(
                `${totalFruitTrays} ××’×© ×¤×™×¨×•×ª ×”×¢×•× ×” ×‘×›×•×¡×•×ª *5 ×¡×•×’×™× ×©×•× ×™× ×¡×”''×› 15 ×›×•×¡×•×ª ×‘××’×©*`
            );
        }

        if (fruitItems.length > 0) {
            const fruitSummary = `*×œ×™×•× ${orderDay} ×¢×“ ×”×©×¢×”: ${orderTime}*\n\n${fruitItems.join(
                "\n"
            )}\n\n(×”×–×× ×” ××¡' *${orderNumber}*)`;

            navigator.clipboard
                .writeText(fruitSummary.trim())
                .then(() => showCopyNotification("×¡×™×›×•× ×¤×™×¨×•×ª ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!"))
                .catch(() => showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×¡×™×›×•× ×¤×™×¨×•×ª.", true));
        } else {
            showNotification("××™×Ÿ ××’×©×™ ×¤×™×¨×•×ª ×‘×”×–×× ×”.", "red");
        }
    }
  }
      // ×¤×•× ×§×¦×™×” ×—×“×©×” ×œ×—×™×©×•×‘ ×›××•×ª ×”××’×©×™× ×©×œ ×”××§×˜ ×”×—×“×©
      function calculateTotalFruitTrays() {
        const fruitList = document.getElementById("onlineList");
        let totalQuantity = 0;

        Array.from(fruitList.children).forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/××§"×˜: (\d+)/)?.[1];
            if (productCode === "13461") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*××’×©/);
              if (match) {
                totalQuantity += parseInt(match[1]);
              }
            }
          }
        });

        return totalQuantity;
      }

      // ×¤×•× ×§×¦×™×” ×œ×§×‘×œ×ª ×¨×©×™××ª ××’×©×™ ×”×¤×™×¨×•×ª ×‘×¡×™×›×•×
      function getFruitItems() {
        const fruitCodes = ["12113", "12457"]; // ××§"×˜ ×©×œ ××’×©×™ ×”×¤×™×¨×•×ª
        const fruitItems = [];

        const lists = [
          "kitchenList",
          "bakeryList",
          "onlineList",
          "warehouseList",
        ];

        lists.forEach((listId) => {
          const list = document.getElementById(listId);
          if (!list) return;

          Array.from(list.children).forEach((item) => {
            const itemText = item.querySelector(".product-code")?.textContent;
            if (itemText) {
              const code = itemText.match(/××§"×˜: (\d+)/)?.[1];
              if (fruitCodes.includes(code)) {
                fruitItems.push(item.querySelector("span").textContent);
              }
            }
          });
        });
        return fruitItems;
      }

      // ×¤×•× ×§×¦×™×” ×œ×§×‘×œ×ª ×”×™×•× ×‘×©×‘×•×¢ ××ª××¨×™×š
      function getDayOfWeek(dateString) {
        const days = ["×¨××©×•×Ÿ", "×©× ×™", "×©×œ×™×©×™", "×¨×‘×™×¢×™", "×—××™×©×™", "×©×™×©×™", "×©×‘×ª"];
        const date = new Date(dateString);
        return days[date.getDay()];
      }
      function copyWarehouseSummary() {
    const waEditable = document.getElementById('waEditableWarehouse');
    const modal = document.getElementById('whatsappWarehouseModal');
    // ×× ×”××•×“×œ ×¤×ª×•×— (×›×œ×•××¨, ×”××©×ª××© ×¢×•×¨×š ×™×“× ×™×ª)
    if (modal && waEditable && modal.style.display !== "none") {
        let message = waEditable.innerHTML
            .replace(/<br><br>/g, '\n\n')
            .replace(/<div>/g, '\n')
            .replace(/<br>/g, '\n')
            .replace(/<b>(.*?)<\/b>/g, '*$1*')
            .replace(/<[^>]+>/g, '')
            .replace(/\n{3,}/g, '\n\n')
            .trim();
        if (!message) {
            showNotification('××™×Ÿ ××” ×œ×”×¢×ª×™×§', 'red');
            return;
        }
        navigator.clipboard.writeText(message)
            .then(() => showCopyNotification("×¡×™×›×•× ××—×¡×Ÿ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!"))
            .catch(() => showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×¡×™×›×•× ××—×¡×Ÿ.", true));
    } else {
        // ×× ×”××•×“×œ ×œ× ×¤×ª×•×— â€“ ×”×¢×ª×§ ×¡×™×›×•× ××•×˜×•××˜×™ (×›××• ×”×™×•×)
        // ×›××Ÿ ×ª×©×ª××© ×‘×œ×•×’×™×§×” ×”×§×™×™××ª ×©×œ×š ×œ×™×¦×™×¨×ª ×¡×™×›×•× ××—×¡×Ÿ
        const warehouseList = document.getElementById("warehouseList");
        const orderDate = new Date(document.getElementById("orderDate").value);
        const days = ["×¨××©×•×Ÿ", "×©× ×™", "×©×œ×™×©×™", "×¨×‘×™×¢×™", "×—××™×©×™", "×©×™×©×™", "×©×‘×ª"];
        const dayName = days[orderDate.getDay()];
        const orderTime = document.getElementById("orderTime").value;

        let summary = `*×œ×™×•× ${dayName} ×¢×“ ×”×©×¢×”: ${orderTime}*\n×××¨×™\n\n`;
        let pranutTotal = 0;
        let warehouseItemsSummary = [];
        const warehouseItems = Array.from(warehouseList.children);

        warehouseItems.forEach((item) => {
            const productCodeElement = item.querySelector(".product-code");
            const itemText = item.querySelector("span").textContent;
            if (productCodeElement) {
                warehouseItemsSummary.push(
                    itemText.replace(/\(××§"×˜: \d+\)/g, "").trim()
                );
            }
        });

        // ×—×™×©×•×‘ ×›××•×ª ×”×¤×¨× ×•×ª ×××’×© × ×™×’×•×‘ ×œ××ª×§×“××™×
        const kitchenList = document.getElementById("kitchenList");
        const kitchenItems = Array.from(kitchenList.children);
        kitchenItems.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/××§"×˜: (\d+)/)?.[1];
            if (productCode === "12602") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*××’×©/);
              if (match) {
                const trays = parseInt(match[1]);
                pranutTotal += trays * 6; // ×›×œ ××’×© = 6 ×¤×¨× ×•×ª
              }
            }
          }
        });

        if (warehouseItemsSummary.length === 0 && pranutTotal === 0) {
            showNotification("××™×Ÿ ××•×¦×¨×™× ×‘××—×¡×Ÿ.", "red");
            return;
        }

        if (warehouseItemsSummary.length > 0) {
            summary += `${warehouseItemsSummary.join("\n")}\n\n`;
        }
        if (pranutTotal > 0) {
            summary += `${pranutTotal} ×™×—' ×¤×¨× ×” ××™× ×™\n\n`;
        }
        const orderNumber = document.getElementById("orderNumber").value;
        summary += `(×”×–×× ×” ××¡' *${orderNumber}*)`;

        navigator.clipboard
            .writeText(summary.trim())
            .then(() => showCopyNotification("×¡×™×›×•× ××—×¡×Ÿ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!"))
            .catch(() => showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×¡×™×›×•× ××—×¡×Ÿ.", true));
    }
}




      // ×¤×•× ×§×¦×™×” ×œ×¤×ª×™×—×ª ××•×“×œ ×•×•××˜×¡××¤ ×¢×‘×•×¨ ××—×¡×Ÿ
      function openWhatsAppWarehouseModal() {
        const modal = document.getElementById("whatsappWarehouseModal");
        const waEditable = document.getElementById("waEditableWarehouse");

        if (!modal || !waEditable) {
          console.error("Modal elements not found!");
          return;
        }

        const warehouseList = document.getElementById("warehouseList");
        const orderDate = new Date(document.getElementById("orderDate").value);
        const days = ["×¨××©×•×Ÿ", "×©× ×™", "×©×œ×™×©×™", "×¨×‘×™×¢×™", "×—××™×©×™", "×©×™×©×™", "×©×‘×ª"];
        const dayName = days[orderDate.getDay()];
        const orderTime = document.getElementById("orderTime").value;

        // ×”×ª×—×œ×ª ×”×¡×™×›×•×
        let summary = `*×œ×™×•× ${dayName} ×¢×“ ×”×©×¢×”: ${orderTime}*\n×××¨×™\n\n`;

        // ×¡×™×›×•× ×©×œ ×›×œ ×”×›××•×™×•×ª
        let pranutTotal = 0;
        let warehouseItemsSummary = [];

        // ××§×‘×œ ××ª ×›×œ ×”×¤×¨×™×˜×™× ×‘×¨×©×™××ª ×”××—×¡×Ÿ
        const warehouseItems = Array.from(warehouseList.children);

        // ×—×™×©×•×‘ ×”×›××•×™×•×ª ××”××—×¡×Ÿ
        warehouseItems.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          const itemText = item.querySelector("span").textContent;
          if (productCodeElement) {
            warehouseItemsSummary.push(
              itemText.replace(/\(××§"×˜: \d+\)/g, "").trim()
            );
          }
        });

        // ×—×™×©×•×‘ ×›××•×ª ×”×¤×¨× ×•×ª ×××’×© × ×™×’×•×‘ ×œ××ª×§×“××™×
        const kitchenList = document.getElementById("kitchenList");
        const kitchenItems = Array.from(kitchenList.children);
        kitchenItems.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/××§"×˜: (\d+)/)?.[1];
            if (productCode === "12602") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*××’×©/);
              if (match) {
                const trays = parseInt(match[1]);
                pranutTotal += trays * 6; // ×›×œ ××’×© = 6 ×¤×¨× ×•×ª
              }
            }
          }
        });

        // ×‘×“×™×§×” ×× ×™×© ××•×¦×¨×™× ×‘××—×¡×Ÿ ××• ×¤×¨× ×•×ª
        if (warehouseItemsSummary.length === 0 && pranutTotal === 0) {
          showNotification("××™×Ÿ ××•×¦×¨×™× ×‘××—×¡×Ÿ.", "red");
          return;
        }

        // ×”×•×¡×¤×ª ×¤×¨×˜×™ ×”××•×¦×¨×™× ××”××—×¡×Ÿ ×œ×¡×™×›×•×
        if (warehouseItemsSummary.length > 0) {
          summary += `${warehouseItemsSummary.join("\n")}\n\n`;
        }

        // ×”×•×¡×¤×ª ×¡×™×›×•× ×”×¤×¨× ×•×ª ×× ×™×©
        if (pranutTotal > 0) {
          summary += `${pranutTotal} ×™×—' ×¤×¨× ×” ××™× ×™\n\n`;
        }

        // ×”×•×¡×¤×ª ××¡×¤×¨ ×”×”×–×× ×” ×œ×¡×™×›×•×
        const orderNumber = document.getElementById("orderNumber").value;
        summary += `(×”×–×× ×” ××¡' *${orderNumber}*)`;

        // ×”××¨×” ×œ-HTML ×•×”×¦×’×” ×‘××•×“×œ
        const htmlSummary = summary
          .replace(/\*([^*]+)\*/g, "<b>$1</b>")
          .replace(/\n/g, "<br>");

        waEditable.innerHTML = htmlSummary;
        modal.style.display = "block";
        waEditable.focus();

        // ×©××™×¨×ª ×”××™×“×¢ ×¢×œ ×”×¡×™×›×•× ×”× ×•×›×—×™
        window.currentWhatsAppSummary = {
          type: "warehouse",
          text: summary,
          orderNumber: orderNumber,
        };
      }

      function copySushiSummary() {
    const waEditable = document.getElementById('waEditableSushi');
    const modal = document.getElementById('whatsappSushiModal');
    // ×× ×”××•×“×œ ×¤×ª×•×— (×›×œ×•××¨, ×”××©×ª××© ×¢×•×¨×š ×™×“× ×™×ª)
    if (modal && waEditable && modal.style.display !== "none") {
        let message = waEditable.innerHTML
            .replace(/<br><br>/g, '\n\n')
            .replace(/<div>/g, '\n')
            .replace(/<br>/g, '\n')
            .replace(/<b>(.*?)<\/b>/g, '*$1*')
            .replace(/<[^>]+>/g, '')
            .replace(/\n{3,}/g, '\n\n')
            .trim();
        if (!message) {
            showNotification('××™×Ÿ ××” ×œ×”×¢×ª×™×§', 'red');
            return;
        }
        navigator.clipboard.writeText(message)
            .then(() => showCopyNotification("×¡×™×›×•× ×¡×•×©×™ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!"))
            .catch(() => showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×¡×™×›×•× ×¡×•×©×™.", true));
    } else {
        // ×× ×”××•×“×œ ×œ× ×¤×ª×•×— â€“ ×”×¢×ª×§ ×¡×™×›×•× ××•×˜×•××˜×™ (×›××• ×”×™×•×)
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        // ××§×‘×œ ××ª ×›×œ ×¤×¨×™×˜×™ ×”×¡×•×©×™
        const sushiItems = Array.from(
            document.getElementById("sushiList")?.children || []
        ).map((li) => {
            const child = li.firstElementChild;
            const text = child ? child.textContent : li.textContent || '';
            return text.replace(/\(××§"×˜: \d+\)/g, "").trim();
        });

        if (sushiItems.length > 0) {
            const sushiSummary = `×”×™×™ @××‘×™\n
××©××— ×œ×§×‘×œ

${sushiItems.map((item) => `â— ${item}`).join("\n\n")}

×©×™×’×™×¢ ××œ×™×™ *×‘×™×•× ${orderDay}* ×¢×“ ×”×©×¢×”: *${orderTime}*

(×”×–×× ×” ××¡' *${orderNumber}*)`;

            navigator.clipboard
                .writeText(sushiSummary.trim())
                .then(() => showCopyNotification("×¡×™×›×•× ×¡×•×©×™ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!"))
                .catch(() => showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×¡×™×›×•× ×¡×•×©×™.", true));
        } else {
            showNotification("××™×Ÿ ×¤×¨×™×˜×™ ×¡×•×©×™ ×‘×”×–×× ×”.", "red");
        }
    }
}
      // ×¤×•× ×§×¦×™×” ×œ×¤×ª×™×—×ª ××•×“×œ ×•×•××˜×¡××¤ ×¢×‘×•×¨ ×¡×•×©×™
      function openWhatsAppSushiModal() {
        const modal = document.getElementById("whatsappSushiModal");
        const waEditable = document.getElementById("waEditableSushi");

        if (!modal || !waEditable) {
          console.error("Modal elements not found!");
          return;
        }

        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        // ××§×‘×œ ××ª ×›×œ ×¤×¨×™×˜×™ ×”×¡×•×©×™
        const sushiItems = Array.from(
          document.getElementById("sushiList")?.children || []
        ).map((li) => {
            const child = li.firstElementChild;
            const text = child ? child.textContent : li.textContent || '';
            return text.replace(/\(××§"×˜: \d+\)/g, "").trim();
          });

        if (sushiItems.length > 0) {
          const sushiSummary = `×”×™×™ @××‘×™\n
${sushiItems.map((item) => `â— ${item}`).join("\n\n")}

×©×™×’×™×¢ ××œ×™×™ *×‘×™×•× ${orderDay}* ×¢×“ ×”×©×¢×”: *${orderTime}*

(×”×–×× ×” ××¡' *${orderNumber}*)`;

          // ×”××¨×” ×œ-HTML ×•×”×¦×’×” ×‘××•×“×œ
          const htmlSummary = sushiSummary
            .replace(/\*([^*]+)\*/g, "<b>$1</b>")
            .replace(/\n/g, "<br>");

          waEditable.innerHTML = htmlSummary;
          modal.style.display = "block";
          waEditable.focus();

          // ×©××™×¨×ª ×”××™×“×¢ ×¢×œ ×”×¡×™×›×•× ×”× ×•×›×—×™
          window.currentWhatsAppSummary = {
            type: "sushi",
            text: sushiSummary,
            orderNumber: orderNumber,
          };
        } else {
          showNotification("××™×Ÿ ×¤×¨×™×˜×™ ×¡×•×©×™ ×‘×”×–×× ×”.", "red");
        }
      }

      function toggleQuantitySize() {
        const quantityDiv = document.getElementById("quantityDiv");
        const sizeDiv = document.getElementById("sizeDiv");
        const isQuantity = document.getElementById("quantityOption").checked;
        const isSize = document.getElementById("sizeOption").checked;
        const isNone = document.getElementById("noneOption").checked;

        if (isQuantity) {
          quantityDiv.style.display = "block";
          sizeDiv.style.display = "none";
        } else if (isSize) {
          quantityDiv.style.display = "none";
          sizeDiv.style.display = "block";
        } else {
          // isNone
          quantityDiv.style.display = "none";
          sizeDiv.style.display = "none";
        }
      }
      // ×¤×•× ×§×¦×™×” ×œ×¤×•×¨××˜ ×”×ª××¨×™×š DD/MM/YYYY
      function formatDateToDDMMYYYY(dateString) {
        const date = new Date(dateString);
        const day = String(date.getDate()).padStart(2, "0");
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
      }

      // ×¨×©×™××ª ×”××§"×˜×™× ×©×œ ×”×‘×™×¡×™×
      const bisProducts = [
        "12628",
        "12617",
        "12627",
        "16331",
        "12618",
        "12616",
      ];

      // ×¤×•× ×§×¦×™×” ×œ×‘×“×•×§ ×× ×™×© ×¦×•×¨×š ×œ×”×¦×™×’ ××ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
      function checkBisProduct(productCode) {
        const code = String(productCode || '').trim();
        const breadTypeDiv = document.getElementById("breadTypeDiv");
        const breadTypeSelect = document.getElementById("breadType");
        if (!breadTypeDiv) return;
        if (bisProducts.includes(code)) {
          breadTypeDiv.style.display = "block";
          // ×‘×—×¨ ×¢×¨×š ×‘×¨×™×¨×ª ××—×“×œ ×× ×œ× × ×‘×—×¨
          if (breadTypeSelect && breadTypeSelect.selectedIndex < 0) {
            breadTypeSelect.selectedIndex = 0;
          }
        } else {
          breadTypeDiv.style.display = "none";
        }
      }

      // ×”×•×¡×¤×ª ×××–×™×Ÿ ××™×¨×•×¢×™× ×œ×©×“×” ×”××§"×˜
      const productCodeInput = document.getElementById("productCode");

      // ×××–×™×Ÿ ×œ××™×¨×•×¢ input
      productCodeInput.addEventListener("input", function (e) {
        const code = e.target.value.trim(); // ×§×‘×œ×ª ×”×§×œ×˜ ×•×”×¡×¨×ª ×¨×•×•×—×™×
        checkBisProduct(code); // ×‘×“×™×§×ª ×”×¦×’×ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
      });

      // ×××–×™×Ÿ ×œ××™×¨×•×¢ paste
      productCodeInput.addEventListener("paste", function (e) {
        setTimeout(() => {
          const code = e.target.value.trim(); // ×§×‘×œ×ª ×”×§×œ×˜ ×œ××—×¨ ×”×”×“×‘×§×”
          checkBisProduct(code); // ×‘×“×™×§×ª ×”×¦×’×ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
        }, 0); // ×©×™××•×© ×‘-setTimeout ×›×“×™ ×œ×”××ª×™×Ÿ ×œ×”×“×‘×§×”
      });

      // ×”×•×¡×¤×ª ×××–×™×Ÿ ××™×¨×•×¢×™× ×œ×©×“×” ×”××§"×˜
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          checkBisProduct(e.target.value); // ×‘×“×™×§×ª ×”×¦×’×ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
        });

      // ×§×¨×™××” ×œ×¤×•× ×§×¦×™×™×ª checkBisProduct ×‘×¢×ª ×˜×¢×™× ×ª ×”×“×£
      document.addEventListener("DOMContentLoaded", function () {
        checkBisProduct(""); // ×‘×“×•×§ ×× ×™×© ×¦×•×¨×š ×œ×”×¦×™×’ ××ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—× ×¢× ×¢×¨×š ×¨×™×§
      });

      // ×”×•×¡×¤×ª ×××–×™×Ÿ ××™×¨×•×¢×™× ×œ×©×“×” ×”××§"×˜
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          checkBisProduct(e.target.value); // ×‘×“×™×§×ª ×”×¦×’×ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
        });

      // ×¢×“×›×•×Ÿ ×¤×•× ×§×¦×™×™×ª copyProductCode ××”×—×™×¤×•×©
      function copyProductCode() {
        const productCode = document.getElementById("productCode").value; // ×§×‘×œ×ª ×”××§"×˜ ××”×ª×™×‘×”
        navigator.clipboard
          .writeText(productCode)
          .then(() => {
            showNotification("×”××§''×˜ ×”×•×¢×ª×§ ×œ×œ×•×—!", "green");
          })
          .catch((err) => {
            console.error("Failed to copy: ", err);
            showNotification("×œ× ×”×¦×œ×—× ×• ×œ×”×¢×ª×™×§ ×œ×œ×•×—", "red");
          });

        // ×œ× ××“×‘×™×§×™× ××ª ×”××§"×˜ ×œ×ª×™×‘×ª ×”×§×œ×˜
        // ××™×Ÿ ×¦×•×¨×š ×œ×©× ×•×ª ××ª ×ª×™×‘×ª ×”×§×œ×˜
      }

      // ×”×•×¡×¤×ª ×××–×™×Ÿ ××™×¨×•×¢×™× ×œ×©×“×” ×”××§"×˜
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          checkBisProduct(e.target.value); // ×‘×“×™×§×ª ×”×¦×’×ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
        });

      // ×¢×“×›×•×Ÿ ×¤×•× ×§×¦×™×™×ª addProduct
      function addProduct() {
        if (!validateOrderDate()) {
          return;
        }
        const productCode = cleanInput(
          document.getElementById("productCode").value
        );
        const note = document.getElementById("productNote").value;

        // ×”×•×¡×¤×ª ×‘×“×™×§×” ×× ×”××§"×˜ ×§×™×™× ××• ×× ×œ× ×”×•×–×Ÿ ××§"×˜
        if (!productCode || !window.unifiedProductData[productCode]) {
          showNotification("×”××§''×˜ ×œ× × ××¦× ×‘××¢×¨×›×ª", "red");
          return; // ×™×¦×™××” ××”×¤×•× ×§×¦×™×”
        }

        const isQuantity = document.getElementById("quantityOption").checked;
        const isSize = document.getElementById("sizeOption").checked;
        const breadType = document.getElementById("breadType").value;

        let finalNote = note;
        if (bisProducts.includes(productCode)) {
          finalNote =
            (breadType ? `|BREAD_TYPE:${breadType}|` : "") +
            (note ? ` ${note}` : "");
        }

        if (window.unifiedProductData[productCode]) {
          const product = window.unifiedProductData[productCode];
          const trayQuantity = document.getElementById("productQuantity").value;

          let productSummary;
          if (isQuantity) {
            const unitQuantity = document.getElementById("unitQuantity").value;
            const unitType = document.getElementById("unitType").value;
            productSummary = `${trayQuantity} ${
              product.name || ''
            } (${unitQuantity} ${unitType}) ${
              finalNote ? ` ${finalNote}` : ""
            }`;
          } else if (isSize) {
            const productSize = document.getElementById("productSize").value;
            const sizeText = productSize === "medium" ? "×‘×™× ×•× ×™" : "×’×“×•×œ";
            productSummary = `${trayQuantity} ${product.name || ''} (${sizeText}) ${
              finalNote ? ` ${finalNote}` : ""
            }`;
          } else {
            productSummary = `${trayQuantity} ${product.name || ''} ${
              finalNote ? ` ${finalNote}` : ""
            }`;
          }

          const rawSummary = productSummary; // ×¢× BREAD_TYPE
          const displaySummary = productSummary.replace(
            /\|BREAD_TYPE:(×‘×™×¡ (×©×•××©×•×|×‘×¨×™×•×©|×§××— ××œ×|×“×’× ×™×|×¤×¨×’|×©×—×•×¨|××“×•×-×¡×œ×§|×‘×¨×™×•×© ××œ×‘×Ÿ))\|/g,
            " $1"
          );

          const listId = `${product.category}List`;
          const categoryList = document.getElementById(listId);
          
          const listItem = document.createElement("li");
          listItem.innerHTML = `
            <span>${displaySummary}</span>
            <div class="item-actions">
                <span class="product-code">××§"×˜: ${productCode}</span>
                <button type="button" class="edit-btn" onclick="openEditPopup(this, '${product.category}')" title="×¢×¨×•×š ×¤×¨×™×˜">
                    <span class="material-icons">edit</span>
                </button>
                <button class="delete-btn" onclick="removeProduct(this, '${product.category}')">××—×§</button>
            </div>
        `;
          // ×©××•×¨ ××ª ×”×˜×§×¡×˜ ×”×’×•×œ××™ ×‘Ö¾data-attribute
          listItem.setAttribute("data-raw-summary", rawSummary);
          
          // ×”×•×¡×¤×ª ××™×“×¢ ×”×˜××¤×¨×˜×•×¨×” ×× ×§×™×™×
          if (product.temperature) {
            listItem.setAttribute('data-temperature', product.temperature);
          }
          
          categoryList.appendChild(listItem);

          showNotification("× ×•×¡×£ ×‘×”×¦×œ×—×” ×œ×”×–×× ×”!", "blue");
          saveOrderDetails();
          // ×¢×“×›×•×Ÿ ×ª×¦×•×’×ª ×›×¤×ª×•×¨×™ ×”×§×˜×’×•×¨×™×•×ª (×—×©×•×‘ ×œ××•×¦×¨ 19100)
          if (typeof updateCategoryButtonsVisibility === 'function') {
            updateCategoryButtonsVisibility();
          }
          resetFields();

          // ××—×¨×™ ×”×•×¡×¤×” ××•×¦×œ×—×ª: ××¤×¡ ×©×¢×ª ×”×–×× ×” ×›×ª×œ×•×ª ×‘×“×¨×™×©×”? (×œ× × ×“×¨×© ×›××Ÿ)
          // ××¤×¡ ×”×¢×¨×•×ª ×•×‘×—×™×¨×ª ×‘×™×¡ ×›×‘×¨ × ×¢×©×” ×‘-resetFields

          // ×”×•×¡×¤×ª ×§×¨×™××” ×œ×‘×“×•×§ ×× ×™×© ×¦×•×¨×š ×œ×”×¦×™×’ ××ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
          checkBisProduct(productCode); // ×‘×“×™×§×ª ×”×¦×’×ª ×ª×™×‘×ª ×¡×•×’ ×”×œ×—×
        } else {
          showNotification("××™×Ÿ ××¡ ××§×˜ ×›×–×” ×‘××¢×¨×›×ª.", "red");
        }

        saveOrderDetails();
        resetFields();
        setTimeout(() => {
          notification.style.display = "none";
        }, 3000);
      }

      // ×¤×•× ×§×¦×™×” ×—×“×©×” ×œ×”×¡×¨×ª ××•×¦×¨

      function removeProduct(button, category) {
        // ××•×¦××™× ××ª ××œ×× ×˜ ×”-li ×”×§×¨×•×‘ ×‘×™×•×ª×¨ ×œ×›×¤×ª×•×¨ ×”××—×™×§×”
        const listItem = button.closest("li");
        if (!listItem) return;
        
        // ××¦×™××ª ×”×§×˜×’×•×¨×™×” ×”×××™×ª×™×ª ××”×¨×©×™××” ×©×‘×” ×”×¤×¨×™×˜ × ××¦× (×œ××§×¨×” ×©×”×¤×¨×™×˜ × ×’×¨×¨)
        const actualList = listItem.closest('ul');
        let actualCategory = category;
        if (actualList && actualList.id) {
          actualCategory = actualList.id.replace('List', '');
        }
        
        // ××—×™×§×” ××”×¨×©×™××” ×”×××™×ª×™×ª (×œ× ××”×§×˜×’×•×¨×™×” ×©×”×•×¢×‘×¨×” ×œ×›×¤×ª×•×¨)
        if (actualList) {
          actualList.removeChild(listItem);
        } else if (category) {
          // fallback: × ×¡×” ×¢× ×”×§×˜×’×•×¨×™×” ×©×”×•×¢×‘×¨×” (×œ××§×¨×” ×©×œ× ××¦×× ×• ×¨×©×™××”)
          const fallbackList = document.getElementById(`${category}List`);
          if (fallbackList && fallbackList.contains(listItem)) {
            fallbackList.removeChild(listItem);
          }
        }
        
        saveOrderDetails();
        
        // ×¢×“×›×•×Ÿ ×ª×¦×•×’×ª ×›×¤×ª×•×¨×™ ×”×§×˜×’×•×¨×™×•×ª
        if (typeof updateCategoryButtonsVisibility === 'function') {
          updateCategoryButtonsVisibility();
        }
      }

      // ××™×¤×•×¡ ×©×“×•×ª ×œ××—×¨ ×”×•×¡×¤×ª ××•×¦×¨
      function resetFields() {
        document.getElementById("productCode").value = "";
        document.getElementById("productQuantity").value = "1";
        document.getElementById("productNote").value = "";
        document.getElementById("breadTypeDiv").style.display = "none";
        // ×‘×¨×™×¨×ª ××—×“×œ ×œ×‘×™×¡: ×‘×™×¡ ×©×•××©×•×
        const breadTypeEl = document.getElementById("breadType");
        if (breadTypeEl) breadTypeEl.value = "×‘×™×¡ ×©×•××©×•×";

        document.getElementById("searchInput").value = "";
        document.getElementById("searchResults").innerHTML = "";


        // ××™×¤×•×¡ ×•×‘×—×™×¨×ª ××¤×©×¨×•×ª ×”×›××•×ª
        document.getElementById("quantityOption").checked = true;
        document.getElementById("sizeOption").checked = false;
        document.getElementById("noneOption").checked = false;
        // ×”×¦×’×ª ×©×“×” ×”×›××•×ª ×•×”×¡×ª×¨×ª ×©×“×” ×”×’×•×“×œ
        document.getElementById("quantityDiv").style.display = "block";
        document.getElementById("sizeDiv").style.display = "none";
        toggleQuantitySize();

        const existingList = document.getElementById("quantityOptionsList");
        const existingButton = document.querySelector(".quantity-toggle-btn");
        const quantityInput = document.getElementById("unitQuantity");

        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        resetInputStyles();
        updateSelectedRadio();
        // ××™×¤×•×¡ ×¢×¨×›×™ ×”×›××•×ª
        document.getElementById("unitQuantity").value = "20";
        document.getElementById("unitType").value = "×™×—×™'";

        // ××™×¤×•×¡ ×¢×¨×š ×”×’×•×“×œ
        document.getElementById("productSize").value = "medium";
      }

      // ××™×¤×•×¡ ×©×“×•×ª ×§×œ×˜
      function resetInputFields() {
        document.getElementById("orderNumber").value = "";
        document.getElementById("notesSummary").value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("searchInput").value = "";
        document.getElementById("searchResults").innerHTML = "";
        document.getElementById("orderDate").value = "";
        document.getElementById("orderTime").value = "";
        const orderTimeMasked = document.getElementById("orderTimeMasked");
        if (orderTimeMasked) orderTimeMasked.value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("productQuantity").value = 1;
        document.getElementById("unitQuantity").value = 20;
        document.getElementById("productSize").selectedIndex = 0;
        document.getElementById("unitType").value = "×™×—×™'";
        const existingList = document.getElementById("quantityOptionsList");
        const existingButton = document.querySelector(".quantity-toggle-btn");
        const quantityInput = document.getElementById("unitQuantity");

        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        resetInputStyles();
        updateSelectedRadio();
      }

      // ×”×¢×ª×§×ª ×¡×™×›×•× ×”×”×–×× ×” ×œ-WA
      function copySummary() {
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderTime = localStorage.getItem("orderTime") || "";
        const temperature = localStorage.getItem("temperature") || "";
        const formattedDate = orderDate ? formatDateToDDMMYYYY(orderDate) : "";

        // ×‘×“×•×§ ×× ×™×© ××•×¦×¨×™× ×‘×¡×™×›×•× ×”×”×–×× ×”
        const hasProducts = ["kitchen",  "kitchenProducts", "bakery", "online", "warehouse"].some(
          (category) => {
            return (
              document.getElementById(`${category}List`).children.length > 0
            );
          }
        );
        // ×× ××™×Ÿ ××•×¦×¨×™×, ×‘×“×•×§ ×× ×™×© ××•×¦×¨ 19100 ×‘×›×œ ×”×¨×©×™××•×ª
        if (!hasProducts) {
          const allLists = document.querySelectorAll("#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li, #amarList li");
          for (const item of allLists) {
            const codeEl = item.querySelector(".product-code");
            if (codeEl) {
              const productCode = codeEl.textContent.match(/××§"×˜: (\d+)/)?.[1];
              if (productCode === "19100") {
                hasProducts = true;
                break;
              }
            }
          }
        }

        if (!hasProducts) {
          showNotification("××™×Ÿ ××•×¦×¨×™× ×‘×¡×™×›×•× ×”×”×–×× ×”.", "red"); // ×”×•×“×¢×ª ×©×’×™××”
          return; // ×™×¦×™××” ××”×¤×•× ×§×¦×™×” ×× ××™×Ÿ ××•×¦×¨×™×
        }

        let summary = `*×”×–×× ×” ××¡: ${orderNumber}*\n*×ª××¨×™×š: ${formattedDate}*\n*×©×¢×”: ${orderTime}*\n\n`;

        // ×¨×©×™××ª ×”×§×˜×’×•×¨×™×•×ª ×©×™×›×œ×œ×• ×‘×¡×™×›×•× ×”×›×œ×œ×™
        ["kitchen", "bakery",  "kitchenProducts", "online", "warehouse"].forEach((category) => {
          const categoryItems = Array.from(
            document.getElementById(`${category}List`).children
          )
            .map((li) => {
              let text = li.firstElementChild.textContent;
              text = text
                .replace(/\(××§"×˜: \d+\)/g, "")
                .replace(
                  /\|BREAD_TYPE:(×‘×™×¡ (×©×•××©×•×|×‘×¨×™×•×©|×§××— ××œ×|×“×’× ×™×|×¤×¨×’|×©×—×•×¨|××“×•×-×¡×œ×§|×‘×¨×™×•×© ××œ×‘×Ÿ))\|/g,
                  " $1"
                )
                .trim();
              return text;
            })
            .filter((text) => text.trim() !== "");

          // ×× ×–×” ×§×˜×’×•×¨×™×™×ª ×§×•× ×“×™×˜×•×¨×™×”, ×”×•×¡×£ ×’× ××•×¦×¨ 19100 ××›×œ ×”×¨×©×™××•×ª
          if (category === "bakery") {
            const allLists = document.querySelectorAll("#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li, #amarList li");
            allLists.forEach((item) => {
              const codeEl = item.querySelector(".product-code");
              if (codeEl) {
                const productCode = codeEl.textContent.match(/××§"×˜: (\d+)/)?.[1];
                if (productCode === "19100") {
                  let text = item.firstElementChild.textContent;
                  text = text
                    .replace(/\(××§"×˜: \d+\)/g, "")
                    .replace(
                      /\|BREAD_TYPE:(×‘×™×¡ (×©×•××©×•×|×‘×¨×™×•×©|×§××— ××œ×|×“×’× ×™×|×¤×¨×’|×©×—×•×¨|××“×•×-×¡×œ×§|×‘×¨×™×•×© ××œ×‘×Ÿ))\|/g,
                      " $1"
                    )
                    .trim();
                  if (text && !categoryItems.includes(text)) {
                    categoryItems.push(text);
                  }
                }
              }
            });
          }

          if (categoryItems.length > 0) {
            const categoryTitle = getCategoryTitle(category);
            summary += `*${categoryTitle}:*\n${categoryItems.join("\n\n")}\n\n`;
          }
        });
        if (temperature) {
          summary += `*×”×¢×¨×•×ª:* *"${temperature}"*\n`;
        }

        navigator.clipboard
          .writeText(summary.trim())
          .then(() => {
            showCopyNotification("×¡×™×›×•× ×”×”×–×× ×” ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!");
          })
          .catch((err) => {
            console.error("×©×’×™××” ×‘×”×¢×ª×§×”:", err);
            showCopyNotification("×©×’×™××” ×‘×”×¢×ª×§×ª ×”×¡×™×›×•×.", true);
          });
      }

      function showCopyNotification(message, isError = false) {
        const notification = document.getElementById("copy-notification");
        notification.textContent = message;
        notification.style.backgroundColor = isError ? "#f8d7da" : "#d4edda"; // ×©×™× ×•×™ ×¦×‘×¢ ×‘×”×ª×× ×œ×¡×•×’ ×”×”×•×“×¢×”
        notification.style.display = "block";

        setTimeout(function () {
          notification.style.display = "none";
        }, 3000); // ×”×”×•×“×¢×” ×ª×™×¢×œ× ××—×¨×™ 3 ×©× ×™×•×ª
      }

      function getCategoryTitle(category) {
  switch (category) {
    case "kitchen": return "××˜×‘×—";
    case "bakery": return "×§×•× ×“×™×˜×•×¨×™×”";
    case "kitchenProducts": return "××•×¦×¨×™ ××˜×‘×—";
    case "online": return "××•× ×œ×™×™×Ÿ";
    case "warehouse": return "××—×¡×Ÿ";
    default: return category;
  }
}
      // ×”×—×œ×¤×ª ×ª×¦×•×’×ª ×©×“×•×ª ×¢×œ ×¤×™ ×‘×—×™×¨×”
      document
        .getElementById("quantityOption")
        .addEventListener("change", function () {
          document.getElementById("quantityDiv").style.display = "block";
          document.getElementById("sizeDiv").style.display = "none";
        });

      document
        .getElementById("sizeOption")
        .addEventListener("change", function () {
          document.getElementById("sizeDiv").style.display = "block";
          document.getElementById("quantityDiv").style.display = "none";
        });


      // ×¢×“×›×•×Ÿ ×¤×•× ×§×¦×™×™×ª searchProduct
      function searchProduct() {
        const input = document
          .getElementById("searchInput")
          .value.trim().toLowerCase();
        const resultsList = document.getElementById("searchResults");
        
        if (!resultsList) {
          console.error("searchResults ×œ× × ××¦×");
          return;
        }
        
        resultsList.innerHTML = "";

        if (input.length > 0) {
          // ×‘×“×™×§×” ×× ×”××•×¦×¨×™× × ×˜×¢× ×•
          if (!window.unifiedProductData || Object.keys(window.unifiedProductData).length === 0) {
            resultsList.innerHTML = '<div style="text-align: center; padding: 10px; color: #666;">âŒ ××•×¦×¨×™× ×œ× × ×˜×¢× ×•. ×œ×—×¥ "×¡× ×›×¨×•×Ÿ ××•×¦×¨×™×" ×× × ×“×¨×©.</div>';
            return;
          }

          // ×©×™××•×© ×‘-unifiedProductData ×‘××§×•× products
          let filteredProducts = [];
          if (typeof window.unifiedProductData === 'object' && window.unifiedProductData) {
            filteredProducts = Object.entries(window.unifiedProductData).filter(
            ([code, product]) =>
              code.includes(input) ||
              (product.searchName && product.searchName.toLowerCase().includes(input)) ||
                (product.name && product.name.toLowerCase().includes(input))
            );
          }

          // ×× ××™×Ÿ ×ª×•×¦××•×ª, × × ×¡×” ×“×¨×š productsLoader (API)
          if (filteredProducts.length === 0 && window.productsLoader && typeof window.productsLoader.searchProduct === 'function') {
            const apiResults = window.productsLoader.searchProduct(input);
            if (Array.isArray(apiResults) && apiResults.length > 0) {
              filteredProducts = apiResults.map(r => [r.code, r]);
            }
          }

          // ×™×¦×™×¨×ª ×¨×©×™××ª ×ª×•×¦××•×ª
          filteredProducts.forEach(([code, product]) => {
            const li = document.createElement("li");
            const sizesInfo = product.sizes && product.sizes.length > 0
              ? product.sizes.map((sizeObj) => `${sizeObj.size} ${sizeObj.price} ×©"×—`).join(" | ")
              : (product.price ? `${product.price} ×©"×—` : "");
            // ×”×¦×’ name ×× ×§×™×™×, ××—×¨×ª ×¨×™×§
            const displayName = product.name || '';
            const searchNameDisplay = product.searchName && !product.name ? `<div style="font-size:0.8em; color:#666; font-style:italic;">${product.searchName}</div>` : '';
            li.innerHTML = `${displayName} (××§"×˜: ${code})${sizesInfo ? ' - ' + sizesInfo : ''}${searchNameDisplay}`;

            const copyButton = document.createElement("button");
            copyButton.textContent = '×”×¢×ª×§ ××¡ ××§"×˜';
            copyButton.onclick = (e) => {
              e.stopPropagation();
              copyToClipboard(code);
            };

            li.appendChild(copyButton);
            li.onclick = (e) => {
              // ×œ× ×× ×§×™× ××ª ×ª×•×¦××•×ª ×”×—×™×¤×•×© ×›×“×™ ×©×”××©×ª××© ×™×•×›×œ ×œ×”××©×™×š ××™×“
              addToOrder(code, product);
              // ×”×¤×¢×œ×ª ×¤×ª×™×—×ª ×¡×•×’ ×‘×™×¡ ×’× ×‘×‘×—×™×¨×” ××ª×•×¦××•×ª ×”×—×™×¤×•×©, ×œ××—×¨ ×¢×“×›×•×Ÿ ×”-UI
              setTimeout(() => { try { checkBisProduct(code); } catch {} }, 0);
            };
            resultsList.appendChild(li);
          });

          // ×”×•×¡×¤×ª ××•× ×” ×ª×•×¦××•×ª ×‘×ª×—×™×œ×ª ×”×¨×©×™××”
          if (filteredProducts.length > 0) {
            const resultsCounter = document.createElement("div");
            resultsCounter.style.cssText = "font-size: 12px; color: #666; margin-bottom: 5px; text-align: center; padding: 3px; background-color: #f8f9fa; border-radius: 3px;";
            resultsCounter.textContent = `× ××¦××• ${filteredProducts.length} ×ª×•×¦××•×ª`;
            resultsList.insertBefore(resultsCounter, resultsList.firstChild);
          } else {
            // ×× ××™×Ÿ ×ª×•×¦××•×ª, ×”×¦×’ ×”×•×“×¢×” ×‘×¨×•×¨×”
            resultsList.innerHTML = '<div style="text-align: center; padding: 10px; color: #666;">âŒ ××•×¦×¨ ×œ× × ××¦×</div>';
          }
        }
      }

      // ×¤×•× ×§×¦×™×” ×œ×”×•×¡×¤×ª ××•×¦×¨ ×œ×¡×™×›×•×
      function addToOrder(code, product) {
        // ×¨×™×©×•× ×”××§×˜ ×‘×ª×™×‘×ª ×”××§×˜ ×”×™×™×¢×•×“×™×ª
        const productCodeInput = document.getElementById("productCode");

        if (productCodeInput) {
          productCodeInput.value = code;
          // ××–×¨×™× ××ª ××•×ª× ××™×¨×•×¢×™× ×›××• ×”×§×œ×“×”/×”×“×‘×§×” ×™×“× ×™×ª
          try { productCodeInput.dispatchEvent(new Event("input", { bubbles: true })); } catch {}
          try { productCodeInput.dispatchEvent(new Event("change", { bubbles: true })); } catch {}

          // ××¤×¢×™×œ ×§×•× ×¤×™×’×•×¨×¦×™×” ×•×‘×“×™×§×ª ×‘×™×¡ ××—×¨×™ ×©×”-UI ×”×ª×¢×“×›×Ÿ
          if (typeof configureProduct === 'function') {
            setTimeout(() => { try { configureProduct(code); } catch {} }, 0);
          }
          if (typeof checkBisProduct === 'function') {
            setTimeout(() => { try { checkBisProduct(code); } catch {} }, 0);
          }

          // ×”×¦×’×ª ×”×•×“×¢×” ×œ××©×ª××©
          if (typeof showNotification === 'function') {
            showNotification(`×”××§×˜ ${code} × ×¨×©× ×‘×ª×™×‘×”!`, "green");
          }
        }

        // ×œ× ×× ×§×” ××ª ×©×“×” ×”×—×™×¤×•×© ×•×ª×•×¦××•×ª ×”×—×™×¤×•×© - × ×©××¨×™× ×¤×ª×•×—×™×
        // document.getElementById("searchInput").value = "";
        // document.getElementById("searchResults").innerHTML = "";
      }
      function validateOrderDate() {
        const orderDate = document.getElementById("orderDate").value;
        if (!orderDate) {
          showNotification("×× × ×”×›× ×¡ ×ª××¨×™×š ×”×–×× ×”!", "red");
          return false;
        }
        return true;
      }
      function showNotification(message, color) {
        const notification = document.getElementById("notification");
        notification.textContent = message;
        notification.style.color = color;
        notification.style.display = "block";

        setTimeout(() => {
          notification.style.display = "none";
        }, 3000); // ×”×”×•×“×¢×” ×ª×™×¢×œ× ××—×¨×™ 3 ×©× ×™×•×ª
      }

      // ×¤×•× ×§×¦×™×” ×œ× ×™×§×•×™ ×ª×™×‘×ª ×”×—×™×¤×•×©
      function clearSearch() {
        // × ×™×§×•×™ ×”×—×™×¤×•×© ×”×§×™×™×
        const si = document.getElementById("searchInput");
        const sr = document.getElementById("searchResults");
        const pc = document.getElementById("productCode");
        if (si) si.value = "";
        if (sr) sr.innerHTML = "";
        if (pc) pc.value = "";

        // ×× ×§×” ××ª ×”××¤×©×¨×•×™×•×ª ×”×§×™×™××•×ª
        const existingList = document.getElementById("quantityOptionsList");
        const existingButton = document.querySelector(".quantity-toggle-btn");
        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        // ×§×•×“× ××¡××Ÿ ××ª ×›×¤×ª×•×¨ "×œ×¤×™ ×›××•×ª"
        const quantityRadio = document.getElementById("quantityOption");
        if (quantityRadio) {
          quantityRadio.checked = true;
          // ××¤×¢×™×œ ××ª ××™×¨×•×¢ ×”×©×™× ×•×™
          quantityRadio.dispatchEvent(new Event("change"));

          // ×××ª×™×Ÿ ×¨×’×¢ ×§×˜ ×œ×¤× ×™ ×”×’×“×¨×ª ×”×¢×¨×›×™×
          setTimeout(() => {
            // ××’×“×™×¨ ××ª ×‘×¨×™×¨×ª ×”××—×“×œ ×œ-20 ×™×—×™×“×•×ª
            const quantityInput = document.getElementById("unitQuantity");
            const unitSelect = document.getElementById("unitType");
            if (quantityInput) {
              quantityInput.value = "20";
              quantityInput.dispatchEvent(new Event("change"));
            }
            if (unitSelect) {
              unitSelect.value = "×™×—×™'";
              unitSelect.dispatchEvent(new Event("change"));
            }
          }, 100);
        }

        document.getElementById("breadTypeDiv").style.display = "none";
      }
      // ×”×•×¡×¤×ª ×××–×™×Ÿ ××™×¨×•×¢×™× ×œ×©×“×” ×”××§"×˜
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          if (timeoutId) {
            clearTimeout(timeoutId);
          }

          if (!e.target.value.trim()) {
            const existingList = document.getElementById("quantityOptionsList");
            const existingButton = document.querySelector(
              ".quantity-toggle-btn"
            );
            if (existingList) existingList.remove();
            if (existingButton) existingButton.remove();

            // ×§×•×“× ××¡××Ÿ ××ª ×›×¤×ª×•×¨ "×œ×¤×™ ×›××•×ª"
            const quantityRadio = document.getElementById("quantityOption");
            if (quantityRadio) {
              quantityRadio.checked = true;
              quantityRadio.dispatchEvent(new Event("change"));

              // ×××ª×™×Ÿ ×¨×’×¢ ×§×˜ ×œ×¤× ×™ ×”×’×“×¨×ª ×”×¢×¨×›×™×
              setTimeout(() => {
                const quantityInput = document.getElementById("unitQuantity");
                const unitSelect = document.getElementById("unitType");
                if (quantityInput) {
                  quantityInput.value = "20";
                  quantityInput.dispatchEvent(new Event("change"));
                }
                if (unitSelect) {
                  unitSelect.value = "×™×—×™'";
                  unitSelect.dispatchEvent(new Event("change"));
                }
              }, 100);
            }

            document.getElementById("breadTypeDiv").style.display = "none";
            return;
          }

          timeoutId = setTimeout(() => {
            const code = e.target.value.trim();
            if (code) {
              console.log('× ××¦× ××§"×˜ (×”×§×œ×“×”):', code);
              configureProduct(code);
            }
          }, 500);
        });

      // ×¤×•× ×§×¦×™×” ×œ× ×™×§×•×™ ×©×“×” ×”×—×™×¤×•×© ×•×”×¦×’×ª ×”×•×“×¢×”
      function copyToClipboard(code) {
        navigator.clipboard
          .writeText(code)
          .then(() => {
            showCopyMessage(); // ×”×¦×’×ª ×”×•×“×¢×”

            document.getElementById("searchInput").value = "";
            document.getElementById("searchResults").innerHTML = "";
          })
          .catch((err) => {
            alert('×©×’×™××” ×‘×”×¢×ª×§×ª ×”××§"×˜ ×œ×œ×•×—');
          });
      }

      // ×¢×“×›×•×Ÿ ×¤×•× ×§×¦×™×™×ª showCopyMessage
      function showCopyMessage() {
        const messageElement = document.getElementById("copyMessage");
        messageElement.style.display = "block";
        setTimeout(() => {
          messageElement.style.top = "50%";
          messageElement.style.opacity = "1";
        }, 10);

        setTimeout(() => {
          messageElement.style.top = "50";
          messageElement.style.opacity = "0";
          setTimeout(() => {
            messageElement.style.display = "none";
          }, 500);
        }, 2000);
      }

      // ×¤×•× ×§×¦×™×” ×œ×§×‘×œ×ª × ×ª×•× ×™ ×”×”×–×× ×” ×•×œ×™×¦×•×¨ ××ª ×”×¡×™×›×•×
      function generateOrderSummary() {
        const orderItems = getOrderItems(); // ×× ×™×— ×©×™×© ×œ×š ×¤×•× ×§×¦×™×” ×©××” ×©××—×–×™×¨×” ××ª ×¤×¨×˜×™ ×”××•×¦×¨×™× ×‘×”×–×× ×”
        let orderSummary = "";

        // ××•×¡×™×¤×™× ××ª ×›×œ ×¤×¨×˜×™ ×”××•×¦×¨×™×
        orderItems.forEach((item) => {
          orderSummary += `××•×¦×¨: ${item.name}, ××§"×˜: ${item.code}, ×›××•×ª: ${item.quantity}\n`;
        });

        // ×”×•×¡×¤×ª ×”×‘×—×™×¨×” ×©×œ ×—× ××• ×§×¨ ×× × ×‘×—×¨
        const temperature = document.getElementById("temperature").value;
        if (temperature) {
          orderSummary += `×”×¢×¨×•×ª: ${temperature}\n`;
        } else {
          orderSummary += `×”×¢×¨×•×ª: ×œ× × ×‘×—×¨\n`;
        }

        // ×”×¦×’×ª ×”×¡×™×›×•× ×‘×“×£
        document.getElementById("order-summary").innerText = orderSummary;
      }

      // ×›×¤×ª×•×¨ ×”×¢×ª×§×” ×©××¢×ª×™×§ ××ª ×”×¡×™×›×•×
      function copyOrderSummary() {
        const orderSummary = document.getElementById("order-summary").innerText;

        // ×™×¦×™×¨×ª ××œ×× ×˜ ×–×× ×™ ×œ×”×¢×ª×§×ª ×”×˜×§×¡×˜
        const tempInput = document.createElement("input");
        tempInput.value = orderSummary;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);

        alert("×”×¡×™×›×•× ×”×•×¢×ª×§!");
      }

      // ×§×•×¨××™× ×œ×¤×•× ×§×¦×™×™×” ×‘×¢×ª ×©×™× ×•×™ ××¦×‘ ×”×—×•×/×§×•×¨ ××• ×©×™× ×•×™ ×¤×¨×™×˜
      // document
      //   .getElementById("temperature")
      //   .addEventListener("change", generateOrderSummary);

      // ×× ×™×© ×›×¤×ª×•×¨ ×”×¢×ª×§×”
      // document
      //   .getElementById("copy-button")
      //   .addEventListener("click", copyOrderSummary);

      // ×¤×•× ×§×¦×™×” ×©××™×™×¦×¨×ª ××ª ×¡×™×›×•× ×”×”×–×× ×” ×›×•×œ×œ ×—×/×§×¨
      function generateOrderSummary() {
        const orderItems = getOrderItems();
        let orderSummary = "";

        // ×”×•×¡×¤×ª ×¤×¨×˜×™ ×”××•×¦×¨×™× ×‘×”×–×× ×”
        orderItems.forEach((item) => {
          orderSummary += `××•×¦×¨: ${item.name}, ××§"×˜: ${item.code}, ×›××•×ª: ${item.quantity}\n`;
        });

        // ×”×•×¡×¤×ª ×”×¢×¨×” ×¢×œ ××¦×‘ ×—×/×§×¨
        const temperature = document.getElementById("temperature").value;
        if (temperature) {
          orderSummary += `×”×¢×¨×•×ª: ${temperature}\n`;
        } else {
          orderSummary += `×”×¢×¨×•×ª: ×œ× × ×‘×—×¨\n`; // ×× ×œ× × ×‘×—×¨ ××©×”×•, ×›×ª×•×‘ "×œ× × ×‘×—×¨"
        }

        // ×”×¦×’×ª ×¡×™×›×•× ×”×”×–×× ×” ×‘×“×£
        document.getElementById("order-summary").innerText = orderSummary;
      }

      // ×›×¤×ª×•×¨ ×œ×”×¢×ª×§×ª ×¡×™×›×•× ×”×”×–×× ×”
      function copyOrderSummary() {
        const orderSummary = document.getElementById("order-summary").innerText;

        // ×™×¦×™×¨×ª ××œ×× ×˜ input ×–×× ×™ ×œ×”×¢×ª×§×ª ×”×˜×§×¡×˜
        const tempInput = document.createElement("input");
        tempInput.value = orderSummary;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);

        alert("×”×¡×™×›×•× ×”×•×¢×ª×§!");
      }

      // ×¤×•× ×§×¦×™×” ×©××—×–×™×¨×” ××ª ×”××•×¦×¨×™× ×‘×”×–×× ×” (×™×© ×œ×¢×“×›×Ÿ ××ª ×”×¤×•× ×§×¦×™×” ×”×–×• ×œ×¤×™ ××™×š ×©××ª×” ×©×•××¨ ××ª ×¤×¨×˜×™ ×”×”×–×× ×”)
      // function getOrderItems() {
        // ×›××Ÿ ××ª×” ×™×›×•×œ ×œ×©×™× ××ª ×”×“×¨×š ×‘×” ××ª×” ××•×¡×£ ××ª ×¤×¨×˜×™ ×”××•×¦×¨×™×
        // ×œ×“×•×’××”:
      //   return [
      //     { name: "××•×¦×¨ 1", code: '××§"×˜123', quantity: 2 },
      //     { name: "××•×¦×¨ 2", code: '××§"×˜124', quantity: 1 },
      //   ];
      // }

      function resetInputStyles() {
        const radioContainers = document.querySelectorAll(".radio-container");
        radioContainers.forEach((container) => {
          container.classList.remove("selected"); // Remove selected class
        });
        document.getElementById("quantityOption").checked = true; // Reset to default
        updateSelectedRadio(); // Update the visual state
      }

      // ×”×’×“×¨×ª ××©×ª× ×™× ×’×œ×•×‘×œ×™×™×
      var currentEditItem = null;
      var currentEditCategory = null;

      function openEditPopup(button, category) {
        try {
          currentEditItem = button.closest("li");
          if (!currentEditItem) {
            console.error("Could not find list item");
            return;
          }

          currentEditCategory = category;
          const itemSpan = currentEditItem.querySelector("span:first-child");
          if (!itemSpan) {
            console.error("Could not find item text span");
            return;
          }

          const itemText = itemSpan.textContent;
          const editTextArea = document.getElementById("editItemText");
          const overlay = document.getElementById("overlay");
          const popup = document.getElementById("editPopup");

          if (!editTextArea || !overlay || !popup) {
            console.error("Could not find required elements");
            return;
          }

          editTextArea.value = itemText;
          overlay.style.display = "block";
          popup.style.display = "block";

          // ××™×§×•×“ ××•×˜×•××˜×™ ×‘×ª×™×‘×ª ×”×˜×§×¡×˜
          editTextArea.focus();
        } catch (error) {
          console.error("Error in openEditPopup:", error);
          showNotification("×©×’×™××” ×‘×¤×ª×™×—×ª ×—×œ×•×Ÿ ×”×¢×¨×™×›×”", "red");
        }
      }

      function closeEditPopup() {
        document.getElementById("overlay").style.display = "none";
        document.getElementById("editPopup").style.display = "none";
        currentEditItem = null;
        currentEditCategory = null;
      }

      function saveEdit() {
        if (currentEditItem && currentEditCategory) {
          const newText = document.getElementById("editItemText").value;
          currentEditItem.querySelector("span").textContent = newText;

          // × ×™×ª×•×— ×—×›× ×©×œ breadType
          let rawSummary = newText;
          // ×‘×“×•×§ ×× ×™×© ×‘×™×¡×™× ×‘×¤×•×¨××˜: ××’×© ×‘×™×¡ ... (XX ×™×—×™') ×‘×™×¡ YYY
          const bisMatch = newText.match(
            /××’×© ×‘×™×¡.*?\((\d+) ×™×—×™'?\).*?(×‘×™×¡ [^\s]+)/
          );
          if (bisMatch) {
            const breadType = bisMatch[2];
            if (!/\|BREAD_TYPE:/.test(newText)) {
              rawSummary = newText + ` |BREAD_TYPE:${breadType}|`;
            }
          }
          currentEditItem.setAttribute("data-raw-summary", rawSummary);
          saveOrderDetails();
          refreshAmarSummary();
          closeEditPopup();
          showNotification("×”×¤×¨×™×˜ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”!", "green");
        }
      }

      // ×¡×’×™×¨×ª ×”×¤×•×¤××¤ ×‘×œ×—×™×¦×” ×¢×œ ×”××•×‘×¨×œ×™×™
      document
        .getElementById("overlay")
        .addEventListener("click", closeEditPopup);

      // ×”×•×¡×¤×ª ×××–×™×Ÿ ×œ×—×™×¦×” ×¢×œ Escape ×œ×¡×’×™×¨×ª ×”×¤×•×¤××¤
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closeEditPopup();
        }
      });

      document.addEventListener("DOMContentLoaded", function () {
        // ×•×™×“×•× ×©×›×œ ×”××œ×× ×˜×™× ×§×™×™××™×
        const overlay = document.getElementById("overlay");
        const popup = document.getElementById("editPopup");
        const editTextArea = document.getElementById("editItemText");

        if (!overlay || !popup || !editTextArea) {
          console.error("×—×¡×¨×™× ××œ×× ×˜×™× ×—×™×•× ×™×™× ×‘×“×£");
          return;
        }

        // ×”×•×¡×¤×ª ×××–×™× ×™ ××™×¨×•×¢×™×
        overlay.addEventListener("click", closeEditPopup);

        document.addEventListener("keydown", function (event) {
          if (event.key === "Escape") {
            closeEditPopup();
          }
        });

        // ×‘×“×™×§×” ×©×”××•×¦×¨×™× × ×˜×¢× ×• ×›××• ×©×¦×¨×™×š
        console.log("××•×¦×¨×™× × ×˜×¢× ×•:", Object.keys(window.unifiedProductData || {}).length);
        
        // ×•×™×“×•× ×©×”××•×¦×¨×™× ×–××™× ×™× ×œ×—×™×¤×•×©
        if (!window.unifiedProductData || Object.keys(window.unifiedProductData).length === 0) {
          console.warn("unifiedProductData ×œ× × ×˜×¢×Ÿ - ××™×Ÿ ×¨×¢× ×•×Ÿ ××•×˜×•××˜×™");
        }
      });

      // ×”×•×¡×¤×ª ×”×¤×•× ×§×¦×™×” ×”×—×“×©×” ×œ×¤× ×™ copyWarehouseSummary
      function getWarehouseItems() {
        const warehouseList = document.getElementById("warehouseList");
        const kitchenList = document.getElementById("kitchenList");
        let items = [];
        let pranutTotal = 0;

        // ×”×•×¡×¤×ª ×¤×¨×™×˜×™ ××—×¡×Ÿ ×¨×’×™×œ×™×
        Array.from(warehouseList.children).forEach((item) => {
          const itemText = item.querySelector("span").textContent;
          items.push(itemText.replace(/\(××§"×˜: \d+\)/g, "").trim());
        });

        // ×—×™×©×•×‘ ×›××•×ª ×”×¤×¨× ×•×ª ×××’×© × ×™×’×•×‘ ×œ××ª×§×“××™×
        Array.from(kitchenList.children).forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/××§"×˜: (\d+)/)?.[1];
            if (productCode === "12602") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*××’×©/);
              if (match) {
                const trays = parseInt(match[1]);
                pranutTotal += trays * 5; // ×›×œ ××’×© = 5 ×¤×¨× ×•×ª
              }
            }
          }
        });

        // ×”×•×¡×¤×ª ×¤×¨× ×•×ª ×œ×¨×©×™××” ×× ×™×©
        if (pranutTotal > 0) {
          items.push(`${pranutTotal} ×™×—' ×¤×¨× ×” ××™× ×™`);
        }

        return items;
      }

      // ×¤×•× ×§×¦×™×” ×œ×”×“×‘×§×” ××œ×•×— ×”×”×¢×ª×§×” - ××¢×•×“×›× ×ª ×œ×¢×‘×•×“ ×¢× products-loader
      window.pasteFromClipboard = async function() {
        try {
          const text = await navigator.clipboard.readText();
          const cleanCode = text.trim();

          if (text.startsWith('http://') || text.startsWith('https://')) {
            showNotification('×œ× × ×™×ª×Ÿ ×œ×”×“×‘×™×§ URL, ×™×© ×œ×”×“×‘×™×§ ×¨×§ ××§"×˜', 'red');
            return;
          }
          if (!/^\d+$/.test(cleanCode)) {
            showNotification('××§"×˜ ×—×™×™×‘ ×œ×”×›×™×œ ×¨×§ ××¡×¤×¨×™×', 'red');
            return;
          }

          const productCodeInput = document.getElementById("productCode");
          if (productCodeInput) {
            productCodeInput.value = cleanCode;
            
            // ×”×¤×¢×œ×ª ××™×¨×•×¢ input ×›×“×™products-loader ×™×˜×¤×œ ×‘×—×™×¤×•×©
            const inputEvent = new Event('input', { bubbles: true, cancelable: true });
            productCodeInput.dispatchEvent(inputEvent);
            
            // ×’× ×”×¤×¢×œ ××™×¨×•×¢ change ×›×“×™ ×œ×•×•×“× ×©×”××¢×¨×›×ª ××’×™×‘×”
            setTimeout(() => {
              const changeEvent = new Event('change', { bubbles: true, cancelable: true });
              productCodeInput.dispatchEvent(changeEvent);
            }, 50);
            
            // ×”×¤×¢×œ×” ×™×©×™×¨×” ×©×œ handleSearchInput ×‘××§×•× ×œ×”×¡×ª××š ×¢×œ ××™×¨×•×¢×™×
            setTimeout(() => {
              if (window.productsLoader && typeof window.productsLoader.handleSearchInput === 'function') {
                window.productsLoader.handleSearchInput(cleanCode);
              }
            }, 50);
          }
          showNotification('×”×•×“×‘×§ ×‘×”×¦×œ×—×”!', 'green');
        } catch (err) {
          console.error('Failed to read clipboard:', err);
          showNotification('×œ× ×”×¦×œ×—× ×• ×œ×’×©×ª ×œ×œ×•×— ×”×”×¢×ª×§×”', 'red');
        }
      }

      function openWhatsAppFruitsModal() {
        const modal = document.getElementById("whatsappFruitsModal");
        const waEditable = document.getElementById("waEditableFruits");

        if (!modal || !waEditable) {
          console.error("Modal elements not found!");
          return;
        }

        // ×™×¦×™×¨×ª ×¡×™×›×•× ×¤×™×¨×•×ª ×‘×¤×•×¨××˜ ×–×”×” ×œ-copyFruitSummary
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        // ×§×‘×œ×ª ×›×œ ×”×¤×¨×™×˜×™× ×‘×¤×•×¨××˜ ××•×“×’×©
        const fruitItems = getFruitItems().map((item) => {
          const match = item.match(/(\d+)\s+××’×©.*?\((.*?)\)/);
          if (match) {
            const [_, quantity, size] = match;
            return `${quantity} ××’×© ×¤×™×¨×•×ª *${size}*`;
          }
          return item;
        });

        // ×”×•×¡×¤×ª ×¡×™×›×•× ×¢×‘×•×¨ ×”××§×˜ ×”×—×“×©
        const totalFruitTrays = calculateTotalFruitTrays();
        if (totalFruitTrays > 0) {
          fruitItems.push(
            `${totalFruitTrays} ××’×© ×¤×™×¨×•×ª ×”×¢×•× ×” ×‘×›×•×¡×•×ª *5 ×¡×•×’×™× ×©×•× ×™× ×¡×”''×› 15 ×›×•×¡×•×ª ×‘××’×©*`
          );
        }

        if (fruitItems.length > 0) {
          // ×‘× ×” ××ª ×”×¡×™×›×•× ×‘×¤×•×¨××˜ ×•×•××˜×¡××¤ ×¢× ×”×“×’×©×•×ª
          let fruitSummary = `*×œ×™×•× ${orderDay} ×¢×“ ×”×©×¢×”: ${orderTime}*\n\n${fruitItems.join(
            "\n"
          )}\n\n(×”×–×× ×” ××¡' *${orderNumber}*)`;
          // ×”××¨×” ×œ-html: ×›×œ ×˜×§×¡×˜ ×‘×™×Ÿ ×›×•×›×‘×™×•×ª ×™×”×¤×•×š ×œ-<b>
          fruitSummary = fruitSummary.replace(/\*([^*]+)\*/g, "<b>$1</b>");
          waEditable.innerHTML = fruitSummary.trim().replace(/\n/g, "<br>");
          modal.style.display = "block";
          waEditable.focus();
        } else {
          showNotification("××™×Ÿ ×¤×¨×™×˜×™ ×¤×™×¨×•×ª ×‘×”×–×× ×”.", "red");
        }
      }

      // ... existing code ...
      // ×—×™×¤×•×© ××•×˜×•××˜×™ ×‘×ª×™×‘×ª ×”××§"×˜ - ××•×¡×¨ ×›×™ products-loader ××˜×¤×œ ×‘×–×”
      // (function () {
      //   let searchTimeout = null;
      //   const productCodeInput = document.getElementById("productCode");
      //   const searchResults = document.getElementById("searchResults");
      //   const searchInput = document.getElementById("searchInput");

      //   if (!productCodeInput || !searchResults || !searchInput) {
      //     console.warn("×—×œ×§ ××”×©×“×•×ª ×œ× × ××¦××• ×œ×—×™×¤×•×© ××•×˜×•××˜×™");
      //     return;
      //   }

      //   // ×××–×™×Ÿ ×™×—×™×“ ×œ×›×œ ××™×¨×•×¢×™ ×”×§×œ×˜
      //   productCodeInput.addEventListener("input", function (e) {
      //     // ×‘×™×˜×•×œ ×˜×™×™××¨ ×§×•×“× ×× ×§×™×™×
      //     if (searchTimeout) {
      //       clearTimeout(searchTimeout);
      //     }

      //     const code = e.target.value.trim();

      //     // ×× ×”×©×“×” ×¨×™×§ - × ×™×§×•×™ ×ª×•×¦××•×ª
            // products-loader ××˜×¤×œ ×‘×›×œ ×”×—×™×¤×•×© ×¢×›×©×™×•
    </script>

    <script>
      // Time input: 24-hour universal with datalist (typing + pick list)
      document.addEventListener('DOMContentLoaded', function () {
        const hidden = document.getElementById('orderTime'); // canonical storage HH:MM
        const masked = document.getElementById('orderTimeMasked');
        const datalist = document.getElementById('timeOptions');
        if (!hidden || !masked || !datalist) return;

        function formatToHHMM(raw) {
          const digits = String(raw).replace(/\D/g, '').slice(0, 4);
          if (digits.length <= 2) return digits;
          return digits.slice(0, 2) + ':' + digits.slice(2);
        }

        function setHiddenFromValue(v) {
          const ok = /^(?:[01]\d|2[0-3]):[0-5]\d$/.test(v);
          hidden.value = ok ? v : '';
          try { localStorage.setItem('orderTime', hidden.value); } catch {}
        }

        // Build datalist options (every 15 min)
        datalist.innerHTML = '';
        for (let h = 0; h < 24; h++) {
          for (let m = 0; m < 60; m += 15) {
            const hh = String(h).padStart(2, '0');
            const mm = String(m).padStart(2, '0');
            const opt = document.createElement('option');
            opt.value = `${hh}:${mm}`;
            datalist.appendChild(opt);
          }
        }

        // Sync masked -> hidden with formatting/validation
        masked.addEventListener('input', function () {
          masked.value = formatToHHMM(masked.value);
        });
        masked.addEventListener('blur', function () {
          setHiddenFromValue(masked.value.trim());
          masked.value = hidden.value;
        });

        // Initialize from saved value
        const saved = (function(){ try { return localStorage.getItem('orderTime') || ''; } catch { return ''; } })();
        if (saved) {
          masked.value = saved;
          hidden.value = saved;
        }
      });
    </script>

    <!-- Orders Management Modal -->
    <div id="ordersManagementModal" class="modal" style="display: none">
      <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
        <span class="close" onclick="closeOrdersModal()">&times;</span>
        <h2 class="orders-actions555"> ğŸ“‹ ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª</h2>
        
        <!-- ×›×¤×ª×•×¨×™ ×¤×¢×•×œ×” -->
        <div class="orders-actions" style="display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; align-items: center;">
          <input type="text" id="orderSearchInput" placeholder="ğŸ” ×—×¤×© ×œ×¤×™ ××¡×¤×¨ ×”×–×× ×”..." 
            style="flex: 1; min-width: 200px; padding: 8px 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;" 
            onkeyup="filterOrdersByNumber(this.value)">
          <button onclick="refreshOrdersList()" class="btn" style="background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);">
            ğŸ”„ ×¨×¢× ×Ÿ ×¨×©×™××”
          </button>
        </div>

        <!-- ×¨×©×™××ª ×”×–×× ×•×ª -->
        <div class="orders-list-container">
          <h3>ğŸ“œ ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª</h3>
          <div id="ordersList" style="max-height: 400px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
            <div style="text-align: center; padding: 20px; color: #666;">
              ×˜×•×¢×Ÿ ×”×–×× ×•×ª...
            </div>
          </div>
        </div>

        <!-- ×”×•×“×¢×•×ª -->
        <div id="ordersNotification" style="margin-top: 15px;"></div>
      </div>
    </div>

    <!-- Orders Management Script -->
    <script>
      // ×”×’×“×¨×ª ×”×¤×•× ×§×¦×™×” ×”×’×œ×•×‘×œ×™×ª ××™×“ ×‘×ª×—×™×œ×ª ×”×¡×§×¨×™×¤×˜
      window.openOrdersModal = null;
      
      // Order Manager Class
      class OrderManager {
        constructor() {
          this.orders = [];
          this.currentOrder = null;
          this.apiBaseUrl = window.API_BASE_URL || window.location.origin;
        }

        async init() {
          await this.loadOrdersHistory();
          this.updateStats();
        }

        async loadOrdersHistory() {
          console.log('ğŸ“‹ loadOrdersHistory × ×§×¨×');
          
          // ×”×¦×’×ª ××™× ×“×™×§×˜×•×¨ ×˜×¢×™× ×”
          this.showLoadingIndicator();
          
          try {
            const response = await fetch(`${this.apiBaseUrl}/api/orders/history`);
            console.log('ğŸ“¥ ×ª×’×•×‘×ª ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª:', response.status);
            if (response.ok) {
              const data = await response.json();
              console.log('ğŸ“‹ × ×ª×•× ×™ ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª:', data);
              this.orders = data.orders || [];
              console.log('ğŸ“‹ ××¡×¤×¨ ×”×–×× ×•×ª × ×˜×¢× ×•:', this.orders.length);
              this.updateOrdersDisplay();
            } else {
              console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×–×× ×•×ª:', response.status, response.statusText);
              this.showNotification('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×–×× ×•×ª ××”×©×¨×ª', 'error');
            }
          } catch (error) {
            console.error('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×–×× ×•×ª:', error);
            this.showNotification('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×–×× ×•×ª', 'error');
          } finally {
            // ×”×¡×ª×¨×ª ××™× ×“×™×§×˜×•×¨ ×”×˜×¢×™× ×”
            this.hideLoadingIndicator();
          }
        }
        
        showLoadingIndicator() {
          const ordersList = document.getElementById('ordersList');
          if (ordersList) {
            ordersList.innerHTML = `
              <div style="text-align: center; padding: 40px; color: #666;">
                <div style="width: 50px; height: 50px; border: 4px solid #f3f3f3; border-top: 4px solid #007bff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px auto;"></div>
                <div style="font-size: 1.1rem; font-weight: 500;">×˜×•×¢×Ÿ ×”×–×× ×•×ª...</div>
                <div style="font-size: 0.9rem; color: #999; margin-top: 5px;">×× × ×”××ª×Ÿ</div>
              </div>
            `;
          }
        }
        
        hideLoadingIndicator() {
          // ×”××™× ×“×™×§×˜×•×¨ ×™×•×¡×¨ ××•×˜×•××˜×™×ª ×›×©×”×–×× ×•×ª ×™×•×¦×’×•
        }

        updateOrdersDisplay() {
          console.log('ğŸ“‹ updateOrdersDisplay × ×§×¨×');
          const ordersList = document.getElementById('ordersList');
          console.log('ğŸ“‹ ordersList element:', ordersList);
          if (!ordersList) {
            console.error('âŒ ordersList element ×œ× × ××¦×!');
            return;
          }

          if (this.orders.length === 0) {
            console.log('ğŸ“‹ ××™×Ÿ ×”×–×× ×•×ª ×œ×”×¦×’×”');
            ordersList.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">××™×Ÿ ×”×–×× ×•×ª ×–××™× ×•×ª</div>';
            return;
          }

          console.log('ğŸ“‹ ××¦×™×’', this.orders.length, '×”×–×× ×•×ª');
          // ××™×•×Ÿ ×œ×¤×™ ×ª××¨×™×š ×™×¦×™×¨×” (×”×—×“×© ×‘×™×•×ª×¨ ×¨××©×•×Ÿ) - ××” ×©×¤×™×¨×§×ª×™ ××—×¨×•×Ÿ ×™×•×¤×™×¢ ×œ××¢×œ×”
          const sortedOrders = [...this.orders].sort((a, b) => {
            const aDate = new Date(a.data?.createdAt || a.createdAt);
            const bDate = new Date(b.data?.createdAt || b.createdAt);
            return bDate - aDate; // ×”×—×“×© ×‘×™×•×ª×¨ ×¨××©×•×Ÿ
          });
          console.log('ğŸ“‹ ×”×–×× ×•×ª ×××•×™× ×•×ª:', sortedOrders);
          
          // ×—×™×©×•×‘ ××¡×¤×¨ ×¤×¨×™×˜×™× ×œ×›×œ ×”×–×× ×”
          const getTotalItems = (order) => {
            const items = order.data?.items || order.items || {};
            return Object.values(items).reduce((sum, categoryItems) => {
              return sum + (Array.isArray(categoryItems) ? categoryItems.length : 0);
            }, 0);
          };

          ordersList.innerHTML = sortedOrders.map(order => {
            const totalItems = getTotalItems(order);
            return `
            <div class="order-item" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 10px; background: white;">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                  <div>
                    <h4 style="margin: 0; color: #333; font-size: 1.2rem;">
                      ×”×–×× ×” #${order.orderNumber || order.data?.orderNumber || order.id}
                      <span style="font-size: 0.8rem; color: #17a2b8; margin-right: 10px;">
                        (${totalItems} ×¤×¨×™×˜×™×)
                      </span>
                    </h4>
                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">
                      ${order.orderDate || order.data?.orderDate || order.date || order.data?.orderDate || order.createdDate || new Date(order.data?.createdAt || order.createdAt).toLocaleDateString('he-IL')} - ${order.orderTime || order.data?.orderTime || order.time || order.data?.orderTime || order.createdTime || new Date(order.data?.createdAt || order.createdAt).toLocaleTimeString('he-IL')}
                    </p>
                  </div>
                <div style="display: flex; gap: 5px;">
                  <button onclick="viewOrderDetails('${order.id}')" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background: #17a2b8;">
                    ğŸ‘ï¸ ×¦×¤×”
                  </button>
                  <button onclick="restoreOrderToMain('${order.id}')" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background: #28a745;">
                    ğŸ”„ ×©×—×–×¨
                  </button>
                  <button onclick="deleteOrderFromCloud('${order.id}')" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background: #dc3545;">
                    ğŸ—‘ï¸ ××—×§
                  </button>
                </div>
              </div>
            </div>
          `;
          }).join('');
          console.log('ğŸ“‹ HTML × ×•×¦×¨ ×‘×”×¦×œ×—×”');
        }

        countOrderItems(order) {
          if (!order.items) return 0;
          return Object.values(order.items).reduce((total, category) => {
            return total + (Array.isArray(category) ? category.length : 0);
          }, 0);
        }

        updateStats() {
          // ×¨×§ ×× ×”×¡×˜×˜×™×¡×˜×™×§×•×ª ×§×™×™××•×ª ×‘××¡×š
          const totalOrdersStat = document.getElementById('totalOrdersStat');
          const activeOrdersStat = document.getElementById('activeOrdersStat');
          const completedTodayStat = document.getElementById('completedTodayStat');
          
          if (totalOrdersStat && activeOrdersStat && completedTodayStat) {
            const totalOrders = this.orders.length;
            const activeOrders = this.orders.filter(order => order.status !== 'completed').length;
            const today = new Date().toDateString();
            const completedToday = this.orders.filter(order => 
              order.status === 'completed' && 
              new Date(order.updatedAt || order.createdAt).toDateString() === today
            ).length;

            totalOrdersStat.textContent = totalOrders;
            activeOrdersStat.textContent = activeOrders;
            completedTodayStat.textContent = completedToday;
          }
        }

        showNotification(message, type = 'info') {
          const notification = document.getElementById('ordersNotification');
          if (!notification) return;

          notification.innerHTML = `
            <div style="padding: 10px 15px; border-radius: 6px; margin-bottom: 10px;
              background: ${type === 'error' ? '#f8d7da' : type === 'success' ? '#d4edda' : '#d1ecf1'};
              color: ${type === 'error' ? '#721c24' : type === 'success' ? '#155724' : '#0c5460'};
              border: 1px solid ${type === 'error' ? '#f5c6cb' : type === 'success' ? '#c3e6cb' : '#bee5eb'};">
              ${message}
            </div>
          `;

          setTimeout(() => {
            notification.innerHTML = '';
          }, 3000);
        }
      }

      // ×¤×•× ×§×¦×™×•×ª ×’×œ×•×‘×œ×™×•×ª
      let orderManager = null;

      function openOrdersModal() {
        console.log('openOrdersModal × ×§×¨×');
        const modal = document.getElementById('ordersManagementModal');
        console.log('×”××•×“×œ × ××¦×?', !!modal);
        
        if (modal) {
          console.log('×¤×•×ª×— ××ª ×”××•×“×œ');
          modal.style.display = 'block';
          
          // ××™×¤×•×¡ ×©×“×” ×”×—×™×¤×•×© ×‘×¤×ª×™×—×ª ×”××•×“×œ
          const searchInput = document.getElementById('orderSearchInput');
          if (searchInput) {
            searchInput.value = '';
          }
          
          if (!window.orderManager) {
            console.log('×™×•×¦×¨ OrderManager ×—×“×©');
            window.orderManager = new OrderManager();
            window.orderManager.init();
          } else {
            console.log('×˜×•×¢×Ÿ ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª');
            window.orderManager.loadOrdersHistory();
          }
        } else {
          console.error('×”××•×“×œ ordersManagementModal ×œ× × ××¦×');
        }
      }

      // ×”×’×“×¨×ª ×”×¤×•× ×§×¦×™×•×ª ×”×’×œ×•×‘×œ×™×•×ª
      window.openOrdersModal = openOrdersModal;
      window.filterOrdersByNumber = filterOrdersByNumber;

      function closeOrdersModal() {
        const modal = document.getElementById('ordersManagementModal');
        if (modal) {
          modal.style.display = 'none';
        }
        // ××™×¤×•×¡ ×—×™×¤×•×© ×”×™×¡×˜×•×¨×™×™×ª ×”×–×× ×•×ª ×¢× ×¡×’×™×¨×ª ×”×—×œ×•×Ÿ
        const searchInput = document.getElementById('orderSearchInput');
        if (searchInput) {
          searchInput.value = '';
        }
        if (window.orderManager && typeof window.orderManager.updateOrdersDisplay === 'function') {
          try { window.orderManager.updateOrdersDisplay(); } catch {}
        }
      }

      function refreshOrdersList() {
        // ××™×¤×•×¡ ×©×“×” ×”×—×™×¤×•×©
        const searchInput = document.getElementById('orderSearchInput');
        if (searchInput) searchInput.value = '';
        
        // ×¨×™×¢× ×•×Ÿ ×××™×ª×™ ×›××• ×¤×ª×™×—×” ××—×“×©
        if (window.orderManager) {
          try {
            const p = window.orderManager.loadOrdersHistory();
            if (p && typeof p.then === 'function') {
              p.then(() => {
                if (typeof window.orderManager.updateOrdersDisplay === 'function') {
                  window.orderManager.updateOrdersDisplay();
                }
              }).catch(()=>{});
            }
          } catch {}
        }
      }
      
      function filterOrdersByNumber(searchQuery) {
        console.log('ğŸ” ×—×™×¤×•×© ×”×–×× ×•×ª:', searchQuery);
        if (!window.orderManager || !window.orderManager.orders) {
          return;
        }
        
        const manager = window.orderManager;
        const query = searchQuery.trim().toLowerCase();
        
        if (!query) {
          // ×× ××™×Ÿ ×—×™×¤×•×©, ×”×¦×’ ××ª ×›×œ ×”×”×–×× ×•×ª
          manager.updateOrdersDisplay();
          return;
        }
        
        // ×¡×™× ×•×Ÿ ×”×–×× ×•×ª ×œ×¤×™ ××¡×¤×¨ ×”×–×× ×”
        const filteredOrders = manager.orders.filter(order => {
          const orderNumber = (order.orderNumber || order.data?.orderNumber || order.id || '').toString().toLowerCase();
          return orderNumber.includes(query);
        });
        
        console.log(`ğŸ“‹ × ××¦××• ${filteredOrders.length} ×”×–×× ×•×ª ×¢× ×”××¡×¤×¨ "${query}"`);
        
        // ×¢×“×›×•×Ÿ ×”×ª×¦×•×’×” ×¢× ×”×”×–×× ×•×ª ×”××¡×•× × ×•×ª
        const ordersList = document.getElementById('ordersList');
        if (!ordersList) return;
        
        if (filteredOrders.length === 0) {
          ordersList.innerHTML = `
            <div style="text-align: center; padding: 40px; color: #666;">
              <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ”</div>
              <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 10px;">×œ× × ××¦××• ×”×–×× ×•×ª</div>
              <div style="color: #999;">× ×¡×” ××¡×¤×¨ ×”×–×× ×” ××—×¨</div>
            </div>
          `;
          return;
        }
        
        // ××™×•×Ÿ ×œ×¤×™ ×ª××¨×™×š ×™×¦×™×¨×” (×”×—×“×© ×‘×™×•×ª×¨ ×¨××©×•×Ÿ)
        const sortedOrders = [...filteredOrders].sort((a, b) => {
          const aDate = new Date(a.data?.createdAt || a.createdAt);
          const bDate = new Date(b.data?.createdAt || b.createdAt);
          return bDate - aDate;
        });
        
        // ×—×™×©×•×‘ ××¡×¤×¨ ×¤×¨×™×˜×™× ×œ×›×œ ×”×–×× ×”
        const getTotalItems = (order) => {
          const items = order.data?.items || order.items || {};
          return Object.values(items).reduce((sum, categoryItems) => {
            return sum + (Array.isArray(categoryItems) ? categoryItems.length : 0);
          }, 0);
        };
        
        ordersList.innerHTML = sortedOrders.map(order => {
          const totalItems = getTotalItems(order);
          return `
            <div class="order-item" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; margin-bottom: 10px; background: white;">
              <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                <div>
                  <h4 style="margin: 0; color: #333; font-size: 1.2rem;">
                    ×”×–×× ×” #${order.orderNumber || order.data?.orderNumber || order.id}
                    <span style="font-size: 0.8rem; color: #17a2b8; margin-right: 10px;">
                      (${totalItems} ×¤×¨×™×˜×™×)
                    </span>
                  </h4>
                  <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">
                    ${order.orderDate || order.data?.orderDate || order.date || order.data?.orderDate || order.createdDate || new Date(order.data?.createdAt || order.createdAt).toLocaleDateString('he-IL')} - ${order.orderTime || order.data?.orderTime || order.time || order.data?.orderTime || order.createdTime || new Date(order.data?.createdAt || order.createdAt).toLocaleTimeString('he-IL')}
                  </p>
                </div>
              <div style="display: flex; gap: 5px;">
                <button onclick="viewOrderDetails('${order.id}')" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background: #17a2b8;">
                  ğŸ‘ï¸ ×¦×¤×”
                </button>
                <button onclick="restoreOrderToMain('${order.id}')" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background: #28a745;">
                  ğŸ”„ ×©×—×–×¨
                </button>
                <button onclick="deleteOrderFromCloud('${order.id}')" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background: #dc3545;">
                  ğŸ—‘ï¸ ××—×§
                </button>
              </div>
            </div>
          </div>
        `;
        }).join('');
        
        console.log('ğŸ“‹ ×ª×¦×•×’×” ××¡×•× × ×ª ×”×•×¤×¢×œ×”');
      }

      function createNewOrderFromModal() {
        closeOrdersModal();
        newOrder();
      }

          function viewOrderDetails(orderId) {
            console.log('ğŸ” viewOrderDetails × ×§×¨× ×¢× orderId:', orderId);
            const manager = window.orderManager || orderManager;
            console.log('ğŸ“‹ orderManager:', manager);
            if (manager) {
              console.log('ğŸ“‹ orderManager ×§×™×™×, ××—×¤×© ×”×–×× ×”...');
              const order = manager.orders.find(o => o.id === orderId);
              console.log('ğŸ” ×”×–×× ×” ×©× ××¦××”:', order);
              if (order) {
                const orderData = order.data || order;
                console.log('ğŸ“‹ orderData:', orderData);
                
                // ×™×¦×™×¨×ª ××•×“×œ ×™×¤×” ×œ×”×¦×’×ª ×¤×¨×˜×™ ×”×”×–×× ×”
                const modal = document.createElement('div');
                modal.className = 'modal';
                modal.style.display = 'block';
                modal.innerHTML = `
                  <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;" onclick="event.stopPropagation()">
                    <div class="modal-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                      <h2 style="margin: 0; color: white;">ğŸ“‹ ×¤×¨×˜×™ ×”×–×× ×” #${orderData.orderNumber || order.id}</h2>
                      <span class="close" onclick="this.closest('.modal').remove()" style="color: white; font-size: 28px; cursor: pointer;">&times;</span>
                    </div>
                    <div class="modal-body" style="padding: 30px; background: #f8f9fa;">
                      <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h3 style="margin: 0 0 15px 0; color: #333; display: flex; align-items: center;">
                          ğŸ“… ×¤×¨×˜×™ ×”×”×–×× ×”
                        </h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                          <div><strong>××¡×¤×¨ ×”×–×× ×”:</strong> ${orderData.orderNumber || order.id}</div>
                          <div><strong>×ª××¨×™×š:</strong> ${orderData.orderDate || orderData.createdDate || new Date(orderData.createdAt).toLocaleDateString('he-IL')}</div>
                          <div><strong>×©×¢×”:</strong> ${orderData.orderTime || orderData.createdTime || new Date(orderData.createdAt).toLocaleTimeString('he-IL')}</div>
                          <div><strong>×¡×”"×› ×¤×¨×™×˜×™×:</strong> ${orderData.total || 0}</div>
                        </div>
                      </div>
                      
                      <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h3 style="margin: 0 0 15px 0; color: #333; display: flex; align-items: center;">
                          ğŸ›’ ×¤×¨×™×˜×™ ×”×”×–×× ×”
                        </h3>
                        ${Object.entries(orderData.items || {}).map(([category, items]) => {
                          if (Array.isArray(items) && items.length > 0) {
                            const categoryNames = {
                              kitchenProducts: 'ğŸ³ ××•×¦×¨×™ ××˜×‘×—',
                              fruits: 'ğŸ ×¤×™×¨×•×ª',
                              bakery: 'ğŸ¥– ×§×•× ×“×™×˜×•×¨×™×™×”',
                              warehouse: 'ğŸ“¦ ××—×¡×Ÿ',
                              sushi: 'ğŸ£ ×¡×•×©×™',
                              amar: 'ğŸ‚ ×§×•× ×“×™×˜×•×¨×™×™×” ×¢××¨'
                            };
                            return `
                              <div style="margin-bottom: 20px;">
                                <h4 style="margin: 0 0 10px 0; color: #495057; font-size: 1.1rem;">
                                  ${categoryNames[category] || category}
                                </h4>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                                  ${items.map(item => `<div style="margin: 5px 0; padding: 5px; background: white; border-radius: 4px;">â€¢ ${item}</div>`).join('')}
                                </div>
                              </div>
                            `;
                          }
                          return '';
                        }).join('')}
                      </div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-top: 1px solid #dee2e6;">
                      <button onclick="this.closest('.modal').remove()" class="btn" style="background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%); color: white; padding: 10px 30px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                        ×¡×’×•×¨
                      </button>
                    </div>
                  </div>
                `;
                
                document.body.appendChild(modal);
                
                // ×¡×’×™×¨×” ×‘×œ×—×™×¦×” ×¢×œ ×”×¨×§×¢
                modal.addEventListener('click', function(e) {
                  if (e.target === modal) {
                    modal.remove();
                  }
                });
                
              } else {
                console.error('âŒ ×”×–×× ×” ×œ× × ××¦××”!');
                alert('×”×–×× ×” ×œ× × ××¦××”!');
              }
            } else {
              console.error('âŒ orderManager ×œ× ×§×™×™×!');
              alert('×©×’×™××”: orderManager ×œ× ×§×™×™×!');
            }
          }

      function restoreOrderToMain(orderId) {
        console.log('ğŸ”„ restoreOrderToMain × ×§×¨× ×¢× orderId:', orderId);
        const manager = window.orderManager || orderManager;
        console.log('ğŸ“‹ orderManager:', manager);
        if (manager) {
          console.log('ğŸ“‹ orderManager ×§×™×™×, ××—×¤×© ×”×–×× ×”...');
          const order = manager.orders.find(o => o.id === orderId);
          console.log('ğŸ” ×”×–×× ×” ×©× ××¦××”:', order);
          if (order) {
            const orderData = order.data || order;
            console.log('ğŸ“‹ orderData:', orderData);
            console.log('âœ… ××©×—×–×¨ ×”×–×× ×”...');
            // ×©×—×–×•×¨ ×”×”×–×× ×” ×œ×“×£ ×”×¨××©×™
            restoreOrderToMainPage(orderData);
            closeOrdersModal();
          } else {
            console.error('âŒ ×”×–×× ×” ×œ× × ××¦××”!');
            alert('×”×–×× ×” ×œ× × ××¦××”!');
          }
        } else {
          console.error('âŒ orderManager ×œ× ×§×™×™×!');
          alert('×©×’×™××”: orderManager ×œ× ×§×™×™×!');
        }
      }

          function deleteOrderFromCloud(orderId) {
            console.log('ğŸ—‘ï¸ deleteOrderFromCloud × ×§×¨× ×¢× orderId:', orderId);
            const manager = window.orderManager || orderManager;
            console.log('ğŸ“‹ orderManager:', manager);
            if (manager) {
              console.log('ğŸ“‹ orderManager ×§×™×™×, ××—×¤×© ×”×–×× ×”...');
              const order = manager.orders.find(o => o.id === orderId);
              console.log('ğŸ” ×”×–×× ×” ×©× ××¦××”:', order);
              if (order) {
                const orderData = order.data || order;
                console.log('ğŸ“‹ orderData:', orderData);
                
                // ×™×¦×™×¨×ª ××•×“×œ ×™×¤×” ×œ××™×©×•×¨ ××—×™×§×”
                const modal = document.createElement('div');
                modal.className = 'modal';
                modal.style.display = 'block';
                modal.innerHTML = `
                  <div class="modal-content" style="max-width: 500px;" onclick="event.stopPropagation()">
                    <div class="modal-header" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white;">
                      <h2 style="margin: 0; color: white;">ğŸ—‘ï¸ ××—×™×§×ª ×”×–×× ×”</h2>
                      <span class="close" onclick="this.closest('.modal').remove()" style="color: white; font-size: 28px; cursor: pointer;">&times;</span>
                    </div>
                    <div class="modal-body" style="padding: 30px; text-align: center;">
                      <div style="font-size: 48px; margin-bottom: 20px;">âš ï¸</div>
                      <h3 style="margin: 0 0 15px 0; color: #333;">×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”×”×–×× ×”?</h3>
                      <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #dc3545;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: #dc3545;">×”×–×× ×” #${orderData.orderNumber || order.id}</div>
                        <div style="color: #666; margin-top: 5px;">
                          ${orderData.orderDate || orderData.createdDate || new Date(orderData.createdAt).toLocaleDateString('he-IL')} - 
                          ${orderData.orderTime || orderData.createdTime || new Date(orderData.createdAt).toLocaleTimeString('he-IL')}
                        </div>
                      </div>
                      <p style="color: #dc3545; font-weight: bold; margin: 20px 0;">
                        âš ï¸ ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ! ×”×”×–×× ×” ×ª×™××—×§ ×œ×¦××™×ª×•×ª ××”×¢× ×Ÿ.
                      </p>
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center; padding: 20px; background: #f8f9fa; border-top: 1px solid #dee2e6;">
                      <button onclick="this.closest('.modal').remove()" class="btn" style="background: #6c757d; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                        ×‘×™×˜×•×œ
                      </button>
                      <button onclick="confirmDeleteOrder('${orderId}'); this.closest('.modal').remove();" class="btn" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                        ×›×Ÿ, ××—×§
                      </button>
                    </div>
                  </div>
                `;
                
                document.body.appendChild(modal);
                
                // ×¡×’×™×¨×” ×‘×œ×—×™×¦×” ×¢×œ ×”×¨×§×¢
                modal.addEventListener('click', function(e) {
                  if (e.target === modal) {
                    modal.remove();
                  }
                });
                
              } else {
                console.error('âŒ ×”×–×× ×” ×œ× × ××¦××”!');
                alert('×”×–×× ×” ×œ× × ××¦××”!');
              }
            } else {
              console.error('âŒ orderManager ×œ× ×§×™×™×!');
              alert('×©×’×™××”: orderManager ×œ× ×§×™×™×!');
            }
          }
          
          function confirmDeleteOrder(orderId) {
            console.log('âœ… ×”××©×ª××© ××™×©×¨, ××•×—×§ ×”×–×× ×”...');
            const manager = window.orderManager || orderManager;
            // ××—×™×§×ª ×”×”×–×× ×” ××”×¢× ×Ÿ
            fetch(`${window.API_BASE_URL || window.location.origin}/api/orders/delete/${orderId}`, {
              method: 'DELETE'
            })
            .then(response => {
              console.log('ğŸ“¥ ×ª×’×•×‘×ª ××—×™×§×”:', response.status);
              if (response.ok) {
                manager.showNotification('×”×”×–×× ×” × ××—×§×” ×‘×”×¦×œ×—×”!', 'success');
                // ×¨×¢× ×•×Ÿ ×¨×©×™××ª ×”×”×–×× ×•×ª
                setTimeout(() => {
                  manager.loadOrdersHistory();
                }, 1000);
              } else {
                throw new Error('×©×’×™××” ×‘××—×™×§×ª ×”×”×–×× ×”');
              }
            })
            .catch(error => {
              console.error('âŒ ×©×’×™××” ×‘××—×™×§×ª ×”×”×–×× ×”:', error);
              manager.showNotification('×©×’×™××” ×‘××—×™×§×ª ×”×”×–×× ×”', 'error');
            });
          }

          function restoreOrderToMainPage(order) {
        try {
          console.log('ğŸ”„ restoreOrderToMainPage × ×§×¨× ×¢× ×”×–×× ×”:', order);
          
          // ×©×—×–×•×¨ ××¡×¤×¨ ×”×–×× ×”
          if (order.orderNumber) {
            const orderNumberField = document.getElementById('orderNumber');
            if (orderNumberField) {
              orderNumberField.value = order.orderNumber;
            }
          }
          
          // ×©×—×–×•×¨ ×ª××¨×™×š ×”×”×–×× ×” (×œ××ª×™ ×”×–×× ×ª×™, ×œ× ××ª×™ ×¤×™×¨×§×ª×™)
          if (order.orderDate) {
            const orderDateField = document.getElementById('orderDate');
            if (orderDateField) {
              // ×”××¨×ª ×ª××¨×™×š ×œ×¤×•×¨××˜ YYYY-MM-DD ×× × ×“×¨×©
              let dateValue = order.orderDate;
              if (dateValue && !dateValue.includes('-')) {
                // ×× ×”×ª××¨×™×š ×‘×¤×•×¨××˜ DD/MM/YYYY, × ××™×¨ ×œ-YYYY-MM-DD
                const parts = dateValue.split('/');
                if (parts.length === 3) {
                  dateValue = `${parts[2]}-${parts[1].padStart(2, '0')}-${parts[0].padStart(2, '0')}`;
                }
              }
              orderDateField.value = dateValue;
              console.log('ğŸ“… ×ª××¨×™×š ×”×–×× ×” ×©×•×—×–×¨:', dateValue);
            }
          }
          
          // ×©×—×–×•×¨ ×©×¢×ª ×”×”×–×× ×” (×œ××ª×™ ×”×–×× ×ª×™, ×œ× ××ª×™ ×¤×™×¨×§×ª×™)
          if (order.orderTime) {
            const orderTimeField = document.getElementById('orderTime');
            const orderTimeMaskedField = document.getElementById('orderTimeMasked');
            if (orderTimeField) {
              orderTimeField.value = order.orderTime;
            }
            if (orderTimeMaskedField) {
              orderTimeMaskedField.value = order.orderTime;
            }
            console.log('ğŸ• ×©×¢×ª ×”×–×× ×” ×©×•×—×–×¨×”:', order.orderTime);
          }

          // × ×™×§×•×™ ×›×œ ×”×¨×©×™××•×ª ×”×§×™×™××•×ª - ×›×œ ×”×§×˜×’×•×¨×™×•×ª
          const categories = ['kitchen', 'kitchenProducts', 'fruits', 'bakery', 'warehouse', 'sushi', 'amar', 'online'];
          categories.forEach(category => {
            const listId = category === 'kitchenProducts' ? 'kitchenProductsList' : 
                           category === 'online' ? 'onlineList' :
                           category + 'List';
            const list = document.getElementById(listId);
            if (list) list.innerHTML = '';
            console.log(`ğŸ§¹ × ×™×§×•×™ ×¨×©×™××”: ${listId}, × ××¦×:`, !!list);
          });

          // ×”×•×¡×¤×ª ×”×¤×¨×™×˜×™× ×—×–×¨×” ×¢× ×›×œ ×”×¤×¨×˜×™× - HTML ××œ×
          if (order.items) {
            Object.entries(order.items).forEach(([category, items]) => {
              if (Array.isArray(items) && items.length > 0) {
                // ××™×¤×•×™ ×©× ×”×§×˜×’×•×¨×™×” ×œ×©× ×”×¨×©×™××”
                const listId = category === 'kitchenProducts' ? 'kitchenProductsList' : 
                               category === 'online' ? 'onlineList' :
                               category + 'List';
                const list = document.getElementById(listId);
                if (list) {
                  items.forEach(itemHTML => {
                    // ×©×—×–×•×¨ full HTML ×¢× ×›×œ ×”-attributes
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = itemHTML;
                    
                    while (tempDiv.firstChild) {
                      const li = tempDiv.firstChild;
                      list.appendChild(li);
                      console.log('âœ… ×©×—×–×¨ ×¤×¨×™×˜ ×¢× data-raw-summary:', li.getAttribute('data-raw-summary'));
                    }
                  });
                  
                  console.log(`âœ… ×”×—×–×¨×” ${items.length} ×¤×¨×™×˜×™× ×œ×¨×©×™××”: ${listId}`);
                }
              }
            });
            
            // ×”×¤×¢×œ×ª ×¤×•× ×§×¦×™×™×ª ×”-drag and drop ×× ×§×™×™××ª
            if (typeof setupDragAndDrop === 'function') {
              setupDragAndDrop();
            }
          }
          
          // ×¨×¢× ×•×Ÿ ××¢×¨×›×ª ×”-SKU
          if (window.productsLoader && typeof window.productsLoader.replaceProductFunctions === 'function') {
            window.productsLoader.replaceProductFunctions();
          }
          
          // ×”×¤×¢×œ×ª drag and drop ××—×“×©
          if (typeof setupDragAndDrop === 'function') {
            setupDragAndDrop();
          }
          
          // ×¢×“×›×•×Ÿ ×”×ª×¦×•×’×”
          if (typeof updateOrderSummaryDisplay === 'function') {
            updateOrderSummaryDisplay();
          }
          
          // ×¨×¢× ×•×Ÿ ×¡×›×•××™ ×”×–×× ×•×ª ×›×•×œ×œ ×§×•× ×“×™×˜×•×¨×™×™×ª ×¢××¨
          if (typeof refreshAmarSummary === 'function') {
            setTimeout(() => {
              refreshAmarSummary();
            }, 100);
          }
          
          if (typeof displayOrderInfo === 'function') {
            displayOrderInfo();
          }
          // ×œ× ×œ×§×¨×•× ×œ-saveOrderDetails ×›××Ÿ ×›×™ ×–×” ×’×•×¨× ×œ×©×’×™××” ×¢× firstElementChild

          if (window.orderManager) {
            window.orderManager.showNotification('×”×”×–×× ×” ×©×•×—×–×¨×” ×‘×”×¦×œ×—×”!', 'success');
          }
        } catch (error) {
          console.error('×©×’×™××” ×‘×©×—×–×•×¨ ×”×”×–×× ×”:', error);
          if (window.orderManager) {
            window.orderManager.showNotification('×©×’×™××” ×‘×©×—×–×•×¨ ×”×”×–×× ×”', 'error');
          }
        }
      }

      // ×¡×’×™×¨×ª ×”××•×“×œ ×‘×œ×—×™×¦×” ×¢×œ ×”×¨×§×¢
      window.addEventListener('click', function(event) {
        const modal = document.getElementById('ordersManagementModal');
        if (event.target === modal) {
          closeOrdersModal();
        }
      });
    </script>
  </body>
</html>
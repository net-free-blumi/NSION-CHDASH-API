<!DOCTYPE html>
<html dir="rtl" lang="he-il">
  <head>
    <link
      class="icon"
      rel="icon"
      href="לוגו גולדיס רגיל.png"
      type="icon"
      alt="icon"
    />
    <title>ניהול הזמנות ג אונליין</title>
    <script src="script.js"></script>
    <script>window.API_BASE_URL='https://nsion-chdash-api-1.onrender.com';</script>
    <script src="config.js"></script>
    <script src="products-loader.js"></script>
    <link rel="stylesheet" href="style.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- קישור למערכת ניהול מוצרים -->
    <link rel="stylesheet" href="admin.css" />

    <!-- קישור לפונט -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <!-- Google Sign-In API -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <meta
      name="google-site-verification"
      content="dUgCkLcDLymDM3mSiVs6eFf6bx8KvC9XIbzJrhuDITI"
    />

    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <meta
      name="google-site-verification"
      content="dUgCkLcDLymDM3mSiVs6eFf6bx8KvC9XIbzJrhuDITI"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-ZBQVSDD37S"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-ZBQVSDD37S");
    </script>

    <style>
      body {
        font-family: "Rubik", sans-serif;
        display: flex;
        /* flex-direction: column; */
        min-height: 90vh;
        background-color: #f4f4f4;
        align-items: center;
        justify-content: center;
        text-align: center;
        margin: 0;
        background-image: url("Black-logo.jpg");
        background-size: cover;
        background-attachment: fixed;
        padding: 10px; /* מרווח כדי למנוע חיתוך במסכים קטנים */
        text-align: right;
        color: #333;
        align-items: flex-start;
        min-height: 100vh;
      }

      .container {
        max-width: 650px; /* גודל מקסימלי לקונטיינר */
        width: 100%; /* גמישות מלאה */
        padding: 20px; /* ריווח פנימי */
        background-color: white;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); /* צל קטן ליותר עומק */
        border-radius: 10px; /* פינות מעוגלות */
      }
      h1 {
        background-color: #343a40;
        color: #fff;
        padding: 10px;
        border-radius: 5px;
        text-align: center;
      }

      #notesSummary {
        font-weight: bold;
        font-size: large;
        padding: 10px;
      }
      label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
      }

      input[type="text"],
      input[type="date"],
      input[type="time"],
      input[type="number"] {
        width: 100%;
        padding: 12px; /* הגדלנו את הגודל */
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px; /* רדיוס פינות גדול יותר */
        font-size: 16px; /* גודל טקסט גדול יותר */
        box-sizing: border-box;
      }

      button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 12px 24px; /* שינינו את הריווח */
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 18px; /* גודל כפתורים גדול יותר */
        margin: 5px 2px;
        cursor: pointer;
        border-radius: 8px; /* הגדלת רדיוס הכפתורים */
      }
      button:hover {
        background-color: #0056b3;
      }

      select {
        width: 100%;
        padding: 12px; /* הגדלנו את הגודל */
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px; /* רדיוס פינות גדול יותר */
        font-size: 18px; /* גודל טקסט גדול יותר */
      }

      /* עיצוב הכפתורים לרדיו */
      input[type="radio"] {
        margin: 10px;
        transform: scale(1.5); /* הגדלת כפתורי הרדיו */
      }

      label[for="quantityOption"],
      label[for="sizeOption"] {
        font-size: 25px; /* גודל פונט גדול יותר לתוויות */
        font-weight: bold;
        margin-right: 10px;
      }

      label[for="noneOption"] {
        font-size: 13px; /* גודל פונט גדול יותר לתוויות */
        font-weight: bold;
        margin-right: 10px;
      }

      #summary {
        margin-top: 0px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
        white-space: pre-line; /* שמירת פורמט כמו בהודעת טקסט */
        line-height: 0.8; /* קביעת ריווח בין שורות */
      }

      .category-title {
        font-weight: bold;
        margin-top: 0px;
        color: #007bff;
        text-decoration: underline;
      }
      ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
        font-weight: bold;
        font-size: 16px;
      }
      li {
        padding: 5px;
        margin-bottom: 2px;
        border-bottom: 1px solid #ddd;
      }
      #copyButton {
        margin-top: 0px;
        /* text-align: center;
      justify-content: center;
      align-items: center;
      display: flex; */
        background-color: #28a745;
      }
      #copyButton:hover {
        background-color: #218838;
      }
      .delete-btn {
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 5px 10px;
        margin-right: 10px;
        cursor: pointer;
        border-radius: 3px;
      }

      @media (max-width: 600px) {
        .delete-btn {
          margin-right: 2px;
        }
      }
      .delete-btn:hover {
        background-color: #c82333;
      }
      li {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      /* תוצאות חיפוש עיצוב */
      ul#searchResults {
        list-style-type: none;
        padding: 0;
        background-color: #fff;
        max-height: 150px;
        overflow-y: auto;
        border: 1px solid #ccc;
      }

      ul#searchResults li {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      ul#searchResults li:hover {
        background-color: #f1f1f1;
      }

      /* עיצוב כפתור העתקת מק"ט */
      ul#searchResults li button {
        padding: 5px 10px;
        font-size: 0.8em;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
      }

      ul#searchResults li button:hover {
        background-color: #0056b3;
      }

      .notification {
        display: none;
        position: fixed;
        /* bottom: 20px; */
        bottom: 40%;
        left: 50%;
        transform: translateX(-50%);
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        border: 1px solid #c3e6cb;
        border-radius: 5px;
        box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
        z-index: 99999;
        font-size: 16px;
        font-weight: bold;
      }

      .external-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
      }

      .external-links img {
        border: 2px solid #ddd;
        border-radius: 8px;
        transition: transform 0.3s ease;
      }

      .external-links img:hover {
        transform: scale(1.1);
      }

      /* תפריט תחתון */
      #tacton {
        margin-top: 80px;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #333;
        color: #fff;
        text-align: center;
        padding: 10px 0;
        font-family: Arial, sans-serif;
        font-size: 18px;
        box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
        z-index: 1000;
      }

      .item-actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .product-code {
        color: #666;
        font-size: 0.9em;
      }

      li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px;
        margin-bottom: 2px;
        border-bottom: 1px solid #ddd;
      }

      #breadTypeDiv {
        margin: 10px 0;
      }

      #breadType {
        width: 100%;
        padding: 12px;
        margin-top: 5px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 16px;

        box-sizing: border-box;
      }

      /* General styles for radio buttons */
      .radio-container {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.8); /* Light transparent background */
        border-radius: 10px; /* Rounded corners */
        padding: 10px; /* Padding around the content */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        transition: background 0.3s; /* Smooth background transition */
        cursor: pointer; /* Change cursor to pointer */
      }

      .radio-container:hover {
        background: rgba(255, 255, 255, 1); /* Solid background on hover */
        cursor: pointer;
      }

      .radio-container.selected {
        background: rgba(
          0,
          123,
          255,
          0.2
        ); /* Light blue background for selected state */
        cursor: pointer;
        text-align: center;
        align-items: center;
      }

      .radio-container input[type="radio"] {
        display: none; /* Hide the default radio button */
        cursor: pointer;
      }

      .radio-container label {
        margin-left: 10px; /* Space between radio button and label */
        font-size: 25px; /* Font size for labels */
        cursor: pointer;
      }

      /* Styles for input boxes */
      .input-box {
        width: 150px;
        margin-left: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 10px; /* Rounded corners */
        font-size: 20px;
        font-weight: bold;
        background: rgba(255, 255, 255, 0.8); /* Light transparent background */
        transition: border-color 0.3s, background 0.3s; /* Smooth transition */
        /* cursor: pointer; */
      }

      .input-box:focus {
        border-color: #007bff; /* Change border color on focus */
        outline: none; /* Remove default outline */
        background: rgba(255, 255, 255, 1); /* Solid background on focus */
        /* cursor: pointer; */
      }

      /* סגנון כפתור העריכה */
      .edit-btn {
        background-color: #ffc107;
        color: white;
        border: none;
        padding: 5px 10px;
        margin-right: 5px;
        cursor: pointer;
        border-radius: 3px;
        font-size: 14px;
        height: 28px;
        line-height: 1;
        display: inline-flex;
        align-items: center;
      }
      @media (max-width: 600px) {
        .edit-btn {
          max-width: 80%; /* קבע רוחב מקסימלי קטן יותר במסכים קטנים */
          font-size: 10px; /* הקטן את גודל הטקסט */
        }
      }

      .edit-btn .material-icons {
        font-size: 14px;
        vertical-align: middle;
      }

      /* עדכון לסגנון הפופאפ */
      .edit-popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 15px;
        border-radius: 10px;
        width: 60%;
        max-width: 300px;
        direction: rtl;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1001;
      }

      .edit-popup textarea {
        width: 85%;
        height: 45px;
        margin: 10px 0;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-family: "Rubik", sans-serif;
        font-size: 18px;
        resize: vertical;
        direction: rtl;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        transition: border-color 0.2s, box-shadow 0.2s;
        position: relative;
        z-index: 1002;
        min-height: 45px;
        max-height: 120px;
      }

      .edit-popup textarea:focus {
        border-color: #007bff;
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05),
          0 0 0 2px rgba(0, 123, 255, 0.25);
        outline: none;
      }

      .edit-popup h3 {
        margin: 0 0 15px 0;
        color: #333;
        text-align: right;
        font-size: 14px;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 8px;
      }

      .popup-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 12px;
      }

      .popup-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        font-size: 13px;
        transition: background-color 0.2s;
        position: relative;
        z-index: 1002;
      }

      .save-btn {
        background-color: #28a745;
        color: white;
      }

      .save-btn:hover {
        background-color: #218838;
      }

      .cancel-btn {
        background-color: #dc3545;
        color: white;
      }

      .cancel-btn:hover {
        background-color: #c82333;
      }

      /* רקע כהה כשהפופאפ פתוח */
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3);
        z-index: 1000;
      }

      .date-time-container {
        display: flex; /* השתמש ב-flexbox */
        gap: 50px; /* רווח בין התיבות */
        align-items: center;
        text-align: center;
        border: 3px solid #ada5a5;
        padding-right: 30px;
      }
      @media (max-width: 600px) {
        .date-time-container {
          gap: 5px;
          border: 1px solid #ada5a5;
          padding-right: 10px;
        }
      }

      .date-time-label {
        display: flex;
        align-items: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
      }
      @media (max-width: 600px) {
        .date-time-label {
          width: 140px;
        }
      }
      .date-time-label2 {
        display: flex; /* השתמש ב-flexbox */
        flex-direction: column; /* תווית מעל התיבה */
        align-items: center;
        text-align: center;
        width: 190px;
      }
      @media (max-width: 600px) {
        .date-time-label2 {
          width: 140px;
        }
      }

      .date-time-label3 {
        display: flex; /* השתמש ב-flexbox */
        flex-direction: column; /* תווית מעל התיבה */
        align-items: center;
        text-align: center;
        width: auto;
      }
      @media (max-width: 600px) {
        .date-time-label3 {
          width: 100px;
        }
      }

      .date-time-input {
        flex-direction: column;
        width: 140px; /* גודל התיבה */
        padding: 5px; /* ריפוד פנימי */
        font-size: 24px; /* גודל טקסט */
        margin-top: 5px; /* רווח בין התווית לתיבה */
        align-items: center;
        text-align: center;
      }
      @media (max-width: 600px) {
        .date-time-input {
          max-width: 100%; /* קבע רוחב מקסימלי קטן יותר במסכים קטנים */
          font-size: 14px;
          /* width: 80px; */
        }
      }

      .date-time-label1 {
        display: flex; /* השתמש ב-flexbox */
        flex-direction: column; /* תווית מעל התיבה */
        align-items: center;
        text-align: center;
        width: 140px;
      }
      @media (max-width: 600px) {
        .date-time-input {
          width: 40px;
        }
      }

      /* הסתרת הקטגוריה כולה כשהרשימה ריקה */
      /* <!-- הסתרת קטגוריות ריקות --> */
      #warehouse:has(ul:empty),
      #amar:has(ul:empty),
      #online:has(ul:empty),
      #bakery:has(ul:empty),
      #kitchenProducts:has(ul:empty),
      #sushi:has(ul:empty) {
        display: none;
      }

      .product-quantity-container {
        display: flex; /* השתמש ב-flexbox */
        gap: 50px; /* רווח בין התוויות */
        align-items: center;
        text-align: center;
      }
      @media (max-width: 600px) {
        .product-quantity-container {
          gap: 10px;
        }
      }

      .product-label {
        display: flex; /* השתמש ב-flexbox */
        flex-direction: column; /* תווית מעל התיבה */
        align-items: center;
        text-align: center;
        width: 160px;
        margin-right: 40px;
        /* margin: 100px; */
      }
      @media (max-width: 600px) {
        .product-label {
          width: 110px;
          margin-right: 20px;
        }
      }

      .product-code-input {
        width: 120px; /* קבע את הרוחב של תיבת הקלט */
        padding: 5px; /* ריפוד פנימי */
        text-align: center; /* מרכז את הטקסט בתיבה */
        align-items: center;
        font-size: 16px; /* גודל טקסט */
        background-color: #c1232324;
      }

      .quantity-label {
        display: flex; /* השתמש ב-flexbox */
        flex-direction: column; /* תווית מעל התיבה */
        align-items: center; /* מרכז את התוכן */
        /* width: 330px; */
        width: 230px;
        text-align: center; /* מרכז את הטקסט בתיבה */
        font-size: 16px; /* גודל טקסט */
        margin-right: 100px;
      }
      @media (max-width: 600px) {
        .quantity-label {
          width: 190px;
          margin-right: 40px;
        }
      }

      .product-code-input,
      .quantity-input {
        width: 120px; /* קבע את הרוחב של תיבת הקלט */
        padding: 5px; /* ריפוד פנימי */
        text-align: center; /* מרכז את הטקסט בתיבה */
        font-size: 16px; /* גודל טקסט */
      }

      @media (max-width: 600px) {
        .date-time-label2 {
          width: 90px;
        }
      }
    </style>

    <!-- הוסף בחלק של ה-style -->
    <style>
      /* ... הסגנונות הקיימים ... */

      #pasteButton {
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 44px;
        height: 44px;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      #pasteButton:hover {
        background-color: #0056b3;
      }

      #pasteButton .material-icons {
        font-size: 20px;
        color: white;
      }

      @media (max-width: 600px) {
        #pasteButton {
          min-width: 36px;
          height: 36px;
        }

        #pasteButton .material-icons {
          font-size: 18px;
        }
      }

      .wa-preview {
        background: linear-gradient(135deg, #eaffd0 60%, #c6f7b2 100%);
        border: 1.5px solid #b2e59e;
        border-radius: 16px;
        box-shadow: 0 2px 12px 0 #b2e59e33;
        padding: 14px 18px;
        font-size: 1.13em;
        font-family: "Varela Round", "Rubik", "Segoe UI", Arial, sans-serif;
        color: #1a4d1a;
        /* font-weight: 700; */
        margin-bottom: 18px;
        margin-top: 8px;
        min-height: 44px;
        max-height: 220px;
        overflow-y: auto;
        transition: box-shadow 0.2s;
      }
      .wa-preview:focus {
        box-shadow: 0 4px 18px 0 #b2e59e66;
        outline: none;
      }
    </style>
  </head>
  <body>
  <!-- עיגול טעינה לשרת -->
  <div id="serverWakeupOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(255,255,255,0.85);z-index:9999;align-items:center;justify-content:center;flex-direction:column;">
    <div style="width:70px;height:70px;border:8px solid #eee;border-top:8px solid #007bff;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px;"></div>
    <div style="font-size:1.3em;color:#007bff;font-weight:bold;">השרת בהפעלה...<br>אנא המתן</div>
  </div>
  <style>
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
    #serverWakeupOverlay { display: flex; }
  </style>
<script>
  window.API_BASE_URL='https://nsion-chdash-api-1.onrender.com';
// --- Wake up server logic (dynamic API base) ---
const SERVER_URL = (typeof config !== 'undefined' && typeof config.getApiBaseUrl === 'function')
  ? config.getApiBaseUrl()
  : (window.API_BASE_URL || window.location.origin);
let serverAwake = false;
let wakeupInterval = null;

function showWakeupOverlay(show) {
  const overlay = document.getElementById('serverWakeupOverlay');
  if (overlay) overlay.style.display = show ? 'flex' : 'none';
}

async function wakeUpServer(showLoader = true) {
  if (showLoader) showWakeupOverlay(true);
  try {
    const res = await fetch(SERVER_URL + '/api/stats', { cache: 'reload' });
    if (res.ok) {
      serverAwake = true;
      showWakeupOverlay(false);
      return true;
    }
  } catch (e) {}
  serverAwake = false;
  if (showLoader) setTimeout(() => wakeUpServer(true), 2000);
  return false;
}

// כל 4 דקות פינג לשרת
function startServerKeepAlive() {
  if (wakeupInterval) clearInterval(wakeupInterval);
  wakeupInterval = setInterval(() => wakeUpServer(false), 240000);
}

// הפעלת השרת בטעינה ראשונית
document.addEventListener('DOMContentLoaded', () => {
  wakeUpServer(true).then(() => {
    startServerKeepAlive();
    // רענון נתוני מוצרים בעת פתיחת הדף בלבד
    if (window.productsLoader && typeof window.productsLoader.refreshData === 'function') {
      window.productsLoader.refreshData();
    }
  });
});
</script>
    <div class="container">
      <!-- הוסף את הקוד הזה מתחת לכותרת הראשית -->
      <div class="external-links">
        <a href="https://www.goldys.co.il/" target="_blank">
          <img
            src="לוגו גולדיס רגיל.png"
            title="גולדיס אתר רגיל"
            alt="קישור 1"
            width="100"
            height="100"
          />
        </a>
        <a href="https://www.goldys.co.il/holidays" target="_blank">
          <img
            src="גולדיס חגים-לוגו.jpg"
            title="גולדיס חגים"
            alt="קישור 2"
            width="100"
            height="100"
          />
        </a>
      </div>


      <h1>ניהול הזמנות</h1>

      <!-- כפתור ניהול מוצרים (מוסתר כברירת מחדל) -->
      <div style="text-align: center; margin: 20px 0;">
        <button 
          id="product-management-btn"
          onclick="openProductManagement()" 
          style="
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,123,255,0.3);
            transition: all 0.3s ease;
            margin: 10px;
            display: none;
          "
          onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0,123,255,0.4)'"
          onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0,123,255,0.3)'"
        >
          🛍️ ניהול מוצרים
        </button>

      </div>

      <!-- Google Sign-In Section -->
      <div id="authSection" style="text-align: center; margin: 20px 0; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
        <div id="loginSection">
          <h3>התחברות לשליחת הודעות WhatsApp</h3>
          <p>רק משתמשים מורשים יכולים לשלוח הודעות לקבוצות WhatsApp</p>
          <div id="g_id_onload"
               data-client_id="530661972828-l9qgtsui9d3aj40pbdnn6rvv15fr82kf.apps.googleusercontent.com"
               data-callback="handleCredentialResponse"
               data-auto_prompt="false">
          </div>
          <div class="g_id_signin"
               data-type="standard"
               data-size="large"
               data-theme="outline"
               data-text="sign_in_with"
               data-shape="rectangular"
               data-logo_alignment="left">
          </div>
        </div>

        <div id="userSection" style="display: none;">
          <h3>ברוך הבא!</h3>
          <p id="userEmail"></p>
          <button onclick="signOut()" style="background-color: #dc3545; margin-top: 10px;">
            התנתק
          </button>
        </div>

        <div id="unauthorizedSection" style="display: none;">
          <h3 style="color: #dc3545;">גישה מוגבלת</h3>
          <p>המייל שלך אינו מורשה לשלוח הודעות WhatsApp</p>
          <p>אתה יכול לצפות באתר אך לא לשלוח הודעות</p>
          <button onclick="signOut()" style="background-color: #6c757d;">
            התנתק
          </button>
        </div>
      </div>



            <!-- שאר הקוד שלך ממשיך כאן -->
      <div id="mainContent">
        <div>
          <!-- כותרת לתיבת החיפוש -->
          <h3>תיבת חיפוש מוצר/מק"ט</h3>

          <!-- כפתור סנכרון מוצרים -->
          <button id="syncProductsBtn" style="background-color:#28a745; color:#fff; margin-bottom:10px;" onclick="syncProducts()">🔄 סנכרון מוצרים</button>
          <span id="syncProductsMsg" style="display:none; color:#28a745; font-weight:bold; margin-right:10px;">המוצרים סונכרנו בהצלחה!</span>
<script>
// כפתור סנכרון מוצרים
function syncProducts() {
  if (window.productsLoader && typeof window.productsLoader.refreshData === 'function') {
    window.productsLoader.refreshData().then(() => {
      const msg = document.getElementById('syncProductsMsg');
      if (msg) {
        msg.style.display = 'inline';
        setTimeout(() => { msg.style.display = 'none'; }, 2000);
      }
    });
  } else {
    alert('מערכת המוצרים לא נטענה.');
  }
}
</script>

        <!-- הודעת העתקה שתופיע בחלק העליון -->
        <div id="copyMessage">הועתק בהצלחה!</div>

        <!-- תיבת החיפוש -->
        <div style="display: flex; gap: 10px; align-items: center">
          <input
            type="text"
            id="searchInput"
            placeholder="הכנס מקט או שם מוצר"
            oninput="searchProduct()"
          />
          <button id="clearButton" onclick="clearSearch()">נקה חיפוש</button>
        </div>

        <!-- תוצאות חיפוש -->
        <ul id="searchResults"></ul>

        <br /><br />

        <button
          style="background-color: rgba(245, 66, 66, 0.98)"
          onclick="newOrder()"
        >
          התחל הזמנה חדשה
        </button>
        <!-- הוסף את זה מתחת לכפתור "הזמנה חדשה" -->
        <div
          id="orderNotification"
          class="notification order-notification"
          style="display: none; background-color: #ff0000; color: #010911"
        >
          ההזמנה אופסה בהצלחה!
        </div>

        <br /><br /><br />

        <!-- הנח את תיבות התאריך, השעה ומספר ההזמנה באותה שורה עם תוויות -->
        <div class="date-time-container">
          <div class="date-time-label2">
            <label for="orderNumber">מספר הזמנה:</label>
            <input type="text" id="orderNumber" class="date-time-input" />
          </div>

          <div class="date-time-label">
            <label for="orderDate">תאריך:</label>
            <input type="date" id="orderDate" class="date-time-input" />
          </div>
          <div class="date-time-label3">
            <label for="orderTime">שעה:</label>
            <input type="time" id="orderTime" class="date-time-input" />
          </div>
        </div>

        <br />
        <!-- הנח את תיבת מק"ט מוצר וכמות באותה שורה עם תוויות -->
        <!-- תיבת המק"ט עם כפתור ההדבקה -->
        <div class="product-quantity-container">
          <div class="product-label">
            <label for="productCode">מק"ט מוצר:</label>
            <div style="display: flex; align-items: center">
              <input type="text" id="productCode" class="product-code-input" />
              <button
                id="pasteButton"
                onclick="pasteFromClipboard()"
                style="
                  padding: 20px;
                  border-radius: 4px;
                  background-color: #007bff;
                "
                title="הדבק מהלוח"
              >
                <span class="material-icons">content_paste</span>
              </button>
            </div>
          </div>
          <div class="quantity-label">
            <label for="productQuantity">כמות יחי'/מגשים:</label>
            <div style="display: flex; align-items: center">
              <button type="button" id="decreaseButton">-</button>
              <input
                type="number"
                id="productQuantity"
                value="1"
                min="1"
                class="quantity-input"
              />
              <button type="button" id="increaseButton">+</button>
            </div>
          </div>
        </div>

        <!-- הוספת שדה בחירת סוג לחם לביסים -->
        <div id="breadTypeDiv" style="display: none">
          <label for="breadType">סוג לחם:</label>
          <select id="breadType">
            <!-- <option value="">בחר</option> -->
            <!-- ברירת מחדל ריקה -->
            <option value="ביס שומשום">ביס שומשום</option>
            <option value="ביס בריוש מלבן">ביס בריוש מלבן</option>
            <!-- <option value="ביס בריוש">ביס בריוש</option> -->
            <option value="ביס קמח מלא">ביס קמח מלא</option>
            <option value="ביס דגנים">ביס דגנים</option>
            <option value="ביס פרג">ביס פרג</option>
            <option value="ביס שחור">ביס שחור (אבץ מחמצת)</option>
            <option value="ביס אדום-סלק">ביס אדום-סלק</option>
          </select>
        </div>

        <label for="note">הערות:</label>
        <input type="text" id="productNote" placeholder="הזן הערות כאן" />

        <label for="productChoice">בחר סוג פריט:</label>
        <br /><br />
        <div style="display: flex; align-items: center; gap: 20px">
          <div class="radio-container">
            <input
              type="radio"
              id="quantityOption"
              name="productChoice"
              value="quantity"
              checked
              onchange="updateSelectedRadio()"
            />
            <label for="quantityOption">לפי כמות</label>
          </div>

          <div class="radio-container">
            <input
              type="radio"
              id="sizeOption"
              name="productChoice"
              value="size"
              onchange="updateSelectedRadio()"
            />
            <label for="sizeOption">לפי גודל</label>
          </div>

          <div class="radio-container">
            <input
              type="radio"
              id="noneOption"
              name="productChoice"
              value="none"
              onchange="toggleQuantitySize(); updateSelectedRadio()"
            />
            <label for="noneOption">ללא גודל/כמות</label>
          </div>
        </div>
        <br /><br />
        <!-- שדה עבור כמות -->
        <div
          id="quantityDiv"
          style="
            align-items: center;
            gap: 50px;
            margin-top: 10px;
            font-weight: bold;
          "
        >
          <label for="unitQuantity">כמות:</label>
          <br />
          <input
            type="number"
            id="unitQuantity"
            value="20"
            style="width: 150px"
            class="input-box"
          />
          <select id="unitType" class="input-box">
            <option value="יחי'">יחי'</option>
            <option value="כוסות">כוסות</option>
          </select>
        </div>
        <!-- שדה עבור גודל -->
        <div id="sizeDiv" style="display: none; margin-top: 10px">
          <label for="productSize">גודל:</label>
          <select id="productSize" class="input-box">
            <option value="medium">בינוני</option>
            <option value="large">גדול</option>
          </select>
        </div>
        <br />
        <button aria-label="הוסף לסיכום" onclick="addProduct()">
          הוסף לסיכום
        </button>
      </div>
      <div>
        <label for="temperature">בחר מצב חם/קר:</label>
        <select id="temperature" name="temperature">
          <option value="">בחר</option>
          <!-- ברירת מחדל ריקה -->
          <option value="חם">חם</option>
          <option value="קר">קר</option>
        </select>
      </div>
      <br />

      <!-- הוסף את זה במקום המתאים בטופס שלך -->
      <!-- <div>
  <label>
    <input type="radio" name="temperature" id="hotOption"> חם
  </label>
  <label>
    <input type="radio" name="temperature" id="coldOption"> קר
  </label>
</div> -->
      <div id="summary">
        <h2>סיכום הזמנה</h2>
        <p id="orderInfo"></p>
        <div id="kitchen">
          <div class="category-title">מטבח:</div>
          <ul id="kitchenList"></ul>
        </div>
        <div id="bakery">
          <div class="category-title">קונדיטוריה:</div>
          <ul id="bakeryList"></ul>
        </div>
        <div id="online">
          <div class="category-title">אונליין:</div>
          <ul id="onlineList"></ul>
        </div>
        <div id="warehouse">
          <div class="category-title">מחסן:</div>
          <ul id="warehouseList"></ul>
        </div>
        <!-- הוספה אחרי שאר הקטגוריות -->
        <div id="amar">
          <div class="category-title">קונדיטוריית עמר:</div>
          <ul id="amarList"></ul>
          <div
            id="amarSummaryDisplay"
          ></div>
        </div>
        <div id="sushi">
          <div class="category-title">סושי:</div>
          <ul id="sushiList"></ul>
        </div>
        <div id="kitchenProducts">
          <div class="category-title">מוצרי מטבח:</div>
          <ul id="kitchenProductsList"></ul>
        </div>
        <div>
          <strong class="category-title">מצב חם/קר:</strong>
          <span id="notesSummary"></span>
        </div>
      </div>

      <div id="order-summary" style="white-space: pre-line; margin-top: 10px;"></div>
      <!-- ליד הכפתורים הקיימים -->
      <!-- <button id="copyButton" onclick="copySummary()">העתק סיכום הזמנה</button> -->
      <!-- <button id="whatsappButton" onclick="openWhatsAppModal()">שליחת והעתקה סיכום כללי</button> -->
      <div class="summary-buttons-grid">
        <button id="whatsappGeneralButton" onclick="openWhatsAppGeneralModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br> כללי
        </button>
        <button id="whatsappKitchenProductsButton" onclick="openWhatsAppKitchenProductsModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br>מוצרי מטבח
        </button>
        <button id="whatsappFruitsButton" onclick="openWhatsAppFruitsModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br>פירות
        </button>
        <button id="whatsappBakeryButton" onclick="openWhatsAppBakeryModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br>קונדיטוריה
        </button>
        <button id="whatsappWarehouseButton" onclick="openWhatsAppWarehouseModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br>מחסן
        </button>
        <button id="whatsappSushiButton" onclick="openWhatsAppSushiModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br>סושי
        </button>
        <button id="whatsappAmarButton" onclick="openWhatsAppAmarModal()">
          <span class="wa-icon">whatsapp</span>
          שליחת סיכום<br>קונדיטוריית עמר
        </button>
      </div>


      <div id="tacton">
        האתר נבנה ועוצב על ידי מוישי ב | mchb0556706325@gmail.com | 0515157166
      </div>
    </div>

    <div id="copy-notification" class="notification">
      <!-- ההודעה תוצג כאן -->
    </div>
    <div id="notification" class="notification"></div>

    <!-- בסוף הבודי, לפני הסקריפטים -->
    <div class="overlay" id="overlay"></div>
    <div class="edit-popup" id="editPopup">
      <h3>עריכת פריט</h3>
      <textarea
        id="editItemText"
        placeholder="ערוך את פרטי הפריט כאן"
      ></textarea>
      <div class="popup-buttons">
        <button class="save-btn" onclick="saveEdit()">שמור</button>
        <button class="cancel-btn" onclick="closeEditPopup()">ביטול</button>
      </div>
    </div>

    <!-- WhatsApp Modal -->
    <div id="whatsappModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppModal()">&times;</span>
        <h2>שליחת סיכום הזמנה לוואטסאפ</h2>
        <div
          id="waEditable"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppMessage()" class="send-btn">
            שלח לוואטסאפ
          </button>
          <button onclick="copyCurrentSummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- Fruits WhatsApp Modal -->
    <div id="whatsappFruitsModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppFruitsModal()">&times;</span>
        <h2>שליחת סיכום פירות לוואטסאפ</h2>
        <div
          id="waEditableFruits"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppFruitsMessage()" class="send-fruits-btn">
            שלח לוואטסאפ
          </button>
          <button onclick="copyFruitSummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppFruitsModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- הוספת מודל אישור שליחה כפולה -->
    <div id="duplicateMessageModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- מודל אישור שליחה כפולה לפירות -->
    <div id="duplicateFruitsModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmFruitsResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateFruitsModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- Bakery WhatsApp Modal -->
    <div id="whatsappBakeryModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppBakeryModal()">&times;</span>
        <h2>שליחת סיכום קונדיטוריה לוואטסאפ</h2>
        <div
          id="waEditableBakery"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppBakeryMessage()" class="send-bakery-btn">
            שלח לוואטסאפ
          </button>
          <button onclick="copyBakerySummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppBakeryModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- מודל אישור שליחה כפולה לקונדיטוריה -->
    <div id="duplicateBakeryModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmBakeryResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateBakeryModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- מודל אישור שליחה כפולה לקונדיטוריה -->
    <div id="duplicateBakeryModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmBakeryResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateBakeryModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>
    <!-- Amar WhatsApp Modal -->
    <div id="whatsappAmarModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppAmarModal()">&times;</span>
        <h2>שליחת סיכום קונדיטוריית עמר לוואטסאפ</h2>
        <div
          id="waEditableAmar"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppAmarMessage()" class="send-amar-btn">
            שלח לוואטסאפ
          </button>
          <button onclick="copyAmarSummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppAmarModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- מודל אישור שליחה כפולה לעמר -->
    <div id="duplicateAmarModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmAmarResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateAmarModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- Sushi WhatsApp Modal -->
    <div id="whatsappSushiModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppSushiModal()">&times;</span>
        <h2>שליחת סיכום סושי לוואטסאפ</h2>
        <div>שימו לב זה לא מתייג את אבי באופן אוטומטי נא לתייג ידני בקבוצה</div>
        <br />
        <div
          id="waEditableSushi"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button onclick="sendWhatsAppSushiMessage()" class="send-sushi-btn">
            שלח לוואטסאפ
          </button>
          <button onclick="copySushiSummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppSushiModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- מודל אישור שליחה כפולה לסושי -->
    <div id="duplicateSushiModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmSushiResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateSushiModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- Warehouse WhatsApp Modal -->
    <div id="whatsappWarehouseModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppWarehouseModal()"
          >&times;</span
        >
        <h2>שליחת סיכום מחסן לוואטסאפ</h2>
        <div
          id="waEditableWarehouse"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button
            onclick="sendWhatsAppWarehouseMessage()"
            class="send-warehouse-btn"
          >
            שלח לוואטסאפ
          </button>
          <button onclick="copyWarehouseSummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppWarehouseModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>

    <!-- מודל אישור שליחה כפולה למחסן -->
    <div id="duplicateWarehouseModal" class="modal" style="display: none">
      <div class="modal-content confirmation-modal">
        <div class="confirmation-icon">⚠️</div>
        <h3>שליחה חוזרת</h3>
        <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
        <div class="confirmation-buttons">
          <button onclick="confirmWarehouseResend()" class="confirm-btn">
            כן, שלח שוב
          </button>
          <button onclick="closeDuplicateWarehouseModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>


<!-- Kitchen Products WhatsApp Modal -->
<div id="whatsappKitchenProductsModal" class="modal" style="display: none">
  <div class="modal-content wa-modal-content">
    <span class="close" onclick="closeWhatsAppKitchenProductsModal()">&times;</span>
    <h2>שליחת סיכום מוצרי מטבח לוואטסאפ</h2>
    <div
      id="waEditableKitchenProducts"
      class="wa-preview wa-editable"
      contenteditable="true"
      spellcheck="false"
    ></div>
    <div class="modal-buttons">
      <button onclick="sendWhatsAppKitchenProductsMessage()" class="send-kitchen-products-btn">
        שלח לוואטסאפ
      </button>
      <button onclick="copyKitchenProductsSummary()" class="copy-btn">
        העתק סיכום
      </button>
      <button class="cancel-btn" onclick="closeWhatsAppKitchenProductsModal()">ביטול</button>
    </div>
  </div>
</div>


<div id="duplicateKitchenProductsModal" class="modal" style="display: none">
  <div class="modal-content confirmation-modal">
    <div class="confirmation-icon">⚠️</div>
    <h3>שליחה חוזרת</h3>
    <p>ההודעה כבר נשלחה בעבר. האם אתה בטוח שברצונך לשלוח שוב?</p>
    <div class="confirmation-buttons">
      <button onclick="confirmKitchenProductsResend()" class="confirm-btn">כן, שלח שוב</button>
      <button onclick="closeDuplicateKitchenProductsModal()" class="cancel-btn">ביטול</button>
    </div>
  </div>
</div>


    <!-- WhatsApp General Modal -->
    <div id="whatsappGeneralModal" class="modal" style="display: none">
      <div class="modal-content wa-modal-content">
        <span class="close" onclick="closeWhatsAppGeneralModal()">&times;</span>
        <h2>שליחת סיכום הזמנה כללי לוואטסאפ</h2>
        <label for="waDaySelect"><b>בחר יום לשליחה</b></label>
        <select id="waDaySelect">
          <option value="ראשון">יום ראשון</option>
          <option value="שני">יום שני</option>
          <option value="שלישי">יום שלישי</option>
          <option value="רביעי">יום רביעי</option>
          <option value="חמישי">יום חמישי</option>
          <option value="שישי">יום שישי</option>
        </select>
        <div
          id="waEditableGeneral"
          class="wa-preview wa-editable"
          contenteditable="true"
          spellcheck="false"
        ></div>
        <div class="modal-buttons">
          <button
            onclick="sendWhatsAppGeneralMessage()"
            class="send-general-btn"
          >
            שלח לוואטסאפ
          </button>
          <button onclick="copyGeneralSummary()" class="copy-btn">
            העתק סיכום
          </button>
          <button onclick="closeWhatsAppGeneralModal()" class="cancel-btn">
            ביטול
          </button>
        </div>
      </div>
    </div>



  </div>
</div> <!-- סוף mainContent -->

    <style>






.summary-buttons-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 10px;
  justify-items: center;
  margin: 10px auto 0 auto;
  width: 100%;
  max-width: 1120px;
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.06);
  padding: 18px 10px 10px 10px;
  direction: rtl;
}


.summary-buttons-grid button {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  background: linear-gradient(90deg, #1126cc 0%, #6170de 100%);
  color: #fff;
  border: none;
  padding: 14px 8px 12px 8px;
  font-size: 1.3em;
  border-radius: 18px;
  font-weight: bold;
  box-shadow: 0 1px 4px rgba(0,0,0,0.07);
  cursor: pointer;
  transition: background 0.18s, transform 0.12s, box-shadow 0.18s;
  min-width: 0;
  width: 80%;
  line-height: 1.2;
  white-space: normal;
  word-break: break-word;
  min-height: 54px;
}

.summary-buttons-grid button:hover {
  background: linear-gradient(90deg, #128c7e 0%, #25d366 100%);
  transform: translateY(-1px) scale(1.03);
  box-shadow: 0 2px 8px rgba(0,0,0,0.13);
}

.summary-buttons-grid .wa-icon {
  font-family: 'Material Icons';
  font-size: 0.3em;
  margin-left: 3px;
  vertical-align: middle;
}
@media (max-width: 600px) {
  .summary-buttons-grid {
    grid-template-columns: 1fr 1fr;
    gap: 7px;
    max-width: 99vw;
    padding: 10px 2px 6px 2px;
  }
  .summary-buttons-grid button {
    font-size: 1.1em;
    padding: 10px 4px;
    min-height: 28px;
  }
}





      /* סגנונות קיימים */
      .wa-modal-content {
        background-color: #fefefe;
        margin: 5% auto;
        padding: 16px 12px 12px 12px;
        border: 1px solid #888;
        width: 98%;
        max-width: 420px;
        border-radius: 12px;
        direction: rtl;
        box-sizing: border-box;
      }

      /* סגנונות למודל האישור */
      .confirmation-modal {
        background-color: #ffffff;
        margin: 15% auto;
        padding: 25px;
        border: none;
        width: 90%;
        max-width: 400px;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        text-align: center;
        direction: rtl;
      }

      .confirmation-icon {
        font-size: 48px;
        margin-bottom: 15px;
        animation: pulse 2s infinite;
      }

      .confirmation-modal h3 {
        color: #333;
        margin: 0 0 15px 0;
        font-size: 24px;
      }

      .confirmation-modal p {
        color: #666;
        margin: 0 0 25px 0;
        font-size: 16px;
        line-height: 1.5;
      }

      .confirmation-buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
      }

      .confirm-btn {
        background-color: #25d366;
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .confirm-btn:hover {
        background-color: #128c7e;
        transform: translateY(-2px);
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      /* סגנונות קיימים נוספים */
      .wa-editable {
        min-height: 180px;
        max-height: 320px;
        overflow-y: auto;
        background: #e1ffc7;
        border-radius: 16px 16px 16px 0;
        border: 1.5px solid #b2e59e;
        padding: 18px 18px 18px 10px;
        margin-bottom: 10px;
        font-family: "Segoe UI", Arial, sans-serif;
        font-size: 17px;
        color: #222;
        direction: rtl;
        text-align: right;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
        white-space: pre-line;
        word-break: break-word;
        outline: none;
      }

      #copyMessage {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        z-index: 99999 !important;
        background: linear-gradient(135deg, #eaffd0 60%, #c6f7b2 100%);
        color: #178a1c;
        font-weight: bold;
        font-size: 1.1em;
        padding: 10px 28px;
        border-radius: 16px;
        box-shadow: 0 2px 12px 0 #b2e59e33;
        min-width: 120px;
        max-width: 90vw;
        text-align: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s, top 0.3s;
      }
      #copyMessage.show {
        opacity: 1;
        pointer-events: auto;
        top: 38px !important;
      }

      .close {
        color: #222;
        float: left;
        font-size: 34px;
        font-weight: bold;
        cursor: pointer;
        transition: color 0.2s, transform 0.2s;
        user-select: none;
      }
      .close:hover {
        color: #25d366;
        transform: scale(1.18) rotate(-8deg);
        cursor: pointer;
      }

      .copy-btn {
        background: linear-gradient(90deg, #00c6ff 0%, #0072ff 100%);
        color: #dc0000;
        border: none;
        border-radius: 24px;
        padding: 10px 28px;
        font-size: 18px;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: background 0.2s, transform 0.2s;
        margin: 0 8px;
        outline: none;
      }
      .copy-btn:hover {
        background: linear-gradient(90deg, #0072ff 0%, #00c6ff 100%);
        transform: translateY(-2px) scale(1.04);
      }

      /* הודעות קופצות תמיד במרכז, עיצוב מודרני וידידותי */

      /* סגנון לאנימציית הטעינה */
      .loading-spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
        margin-left: 8px;
        vertical-align: middle;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* סגנון לכפתור מושבת */
      .send-btn:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
        opacity: 0.7;
      }

      /* עיצוב מודלים של וואטסאפ ושליחה כפולה */


      .modal {

        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.685); /* רקע כהה */
        display: none;
        align-items: center;
        justify-content: center;
        overflow-y: auto;

      }
      .modal[style*="display: block"] {
        display: flex !important;
      }
      .modal-content,
      .confirmation-modal {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.592);
        padding: 24px 18px 18px 18px;
        max-width: 95vw;
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
        text-align: center;
        direction: rtl;
      }

@media (max-width: 800px) {
  .modal-content {
    max-width: 88vw;
    width: 80vw;
    min-width: 0;
    padding: 14px 4vw 10px 4vw;
    font-size: 1em;
    margin: 10px auto;
    border-radius: 14px;
  }
  .modal {
    padding: 0;
  }
}
      .wa-editable {
        min-height: 120px;
        background: #e1ffc7;
        border-radius: 12px;
        border: 1.5px solid #b2e59e;
        padding: 14px;
        margin-bottom: 12px;
        font-size: 17px;
        color: #222;
        outline: none;
        text-align: right;
      }
      .modal-buttons,
      .confirmation-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 10px;
        flex-wrap: wrap;
      }
      .send-btn,
      .copy-btn,
      .cancel-btn,
      .confirm-btn {
        border: none;
        border-radius: 8px;
        padding: 10px 18px;
        font-size: 16px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s;
      }
      .send-btn,
      .confirm-btn {
        background: #25d366;
        color: #fff;
      }
      .send-btn:hover,
      .confirm-btn:hover {
        background: #128c7e;
      }
      .copy-btn {
        background: #16eb07;
        color: #333;
      }
      .copy-btn:hover {
        background: #00720a;
      }
      .cancel-btn {
        background: #ff4444;
        color: #fff;
      }
      .cancel-btn:hover {
        background: #cc0000;
      }
      .confirmation-icon {
        font-size: 40px;
        margin-bottom: 10px;
      }
      @media (max-width: 600px) {
        .modal-content,
        .confirmation-modal {
          max-width: 98vw;
          padding: 10px 2vw;
        }
        .wa-editable {
          font-size: 15px;
          padding: 10px;
        }
        .send-btn,
        .copy-btn,
        .cancel-btn,
        .confirm-btn {
          font-size: 15px;
          padding: 8px 8px;
        }
      }
    </style>

    <script>
      // הגדרת משתנים גלובליים בתחילת הסקריפט
      window.currentEditItem = null;
      window.currentEditCategory = null;

      // טיפול בשגיאות JavaScript לא מטופלות
      window.addEventListener('unhandledrejection', function(event) {
        console.warn('Unhandled promise rejection:', event.reason);
        // מנע הצגת השגיאה בקונסולה של הדפדפן
        event.preventDefault();
      });

      window.addEventListener('error', function(event) {
        console.warn('JavaScript error:', event.error);
        // מנע הצגת השגיאה בקונסולה של הדפדפן
        event.preventDefault();
      });



// תמיכה ב-Enter להוספת מוצר לסיכום (רק בשדות הרלוונטיים)
['productCode', 'productQuantity', 'productNote', 'productSize', 'breadType', 'unitQuantity', 'unitType'].forEach(function(id) {
  var el = document.getElementById(id);
  if (el) {
    el.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        var popupOpen = document.querySelector('.modal[style*="display: block"]');
        if (!popupOpen) {
          addProduct();
        }
      }
    });
  }
});



// אם זה מפריע אפשר למחוק
document.addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    // בדוק שאין פופאפ פתוח
    var popupOpen = document.querySelector('.modal[style*="display: block"]');
    // בדוק שאין פוקוס על אחד מהשדות (כדי לא להפעיל פעמיים)
    var active = document.activeElement;
    var relevantIds = ['productCode', 'productQuantity', 'productNote', 'productSize', 'breadType', 'unitQuantity', 'unitType'];
    if (!popupOpen && !relevantIds.includes(active.id)) {
      // בדוק שכל השדות הנדרשים מלאים (למשל productCode וכמות)
      var code = document.getElementById('productCode').value.trim();
      var qty = document.getElementById('productQuantity').value.trim();
      if (code && qty) {
        addProduct();
      }
    }
  }
});
// הוספה אוטומטית לסיכום רק כאשר מדביקים מק״ט (paste)


      // נתוני מוצרים מאוחדים - כל המידע במקום אחד
      window.unifiedProductData = {
        12628: { 
          name: "מגש ביס טונה", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 170 },
            { size: "20 יחי", price: 285 },
          ]
        },
        12617: { 
          name: "מגש ביס בריוש ושניצל", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 24,
          unit: "יחי'",
          predefinedQuantities: [12, 24],
          sizes: [
            { size: "12 יחי", price: 216 },
            { size: "24 יחי", price: 432 },
          ]
        },
        12627: { 
          name: "מגש ביס סלט ביצים וירקות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 24,
          unit: "יחי'",
          predefinedQuantities: [12, 24],
          sizes: [
            { size: "12 יחי", price: 135 },
            { size: "24 יחי", price: 270 },
          ]
        },
        16331: { 
          name: "מגש ביס סלט אבוקדו וביצה", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 168 },
            { size: "20 יחי", price: 280 },
          ]
        },
        12618: { 
          name: "מגש ביס חזה הודו מעושן", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 216 },
            { size: "20 יחי", price: 360 },
          ]
        },
        12616: { 
          name: "מגש ביס במילוי אסאדו", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 240 },
            { size: "20 יחי", price: 400 },
          ]
        },
        12626: { 
          name: "מגש סמוק סלמון בקרואסון", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [9, 15],
          sizes: [
            { size: "9 יחי", price: 162 },
            { size: "15 יחי", price: 265 },
          ]
        },
        12408: {
          name: "מגש מקלות גריסני בסמוק סלמון ורוטב דיז׳ון",
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [{ size: "גדול", price: 148 }]
                },
        12409: { 
          name: "מגש סביח בג'בטה", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [15],
          sizes: [
            { size: "15 יחי", price: 180 },
          ]
        },
        12622: { 
          name: "מגש פוקאצ'ות הבית + מטבלים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [{ size: "גדול", price: 115 }]
        },
        12602: { 
          name: "מגש ניגוב למתקדמים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 149 },
          ]
        },
        12624: { 
          name: "מגש מאפי בוקר טריים של הבייקרי", 
          category: "amar",
          type: "quantity",
          defaultQuantity: 9,
          unit: "יחי'",
          predefinedQuantities: [9],
          sizes: [
            { size: "9 יחי'", price: 139 }
          ]
        },
        99110: { 
          name: "חלת חתן", 
          category: "amar",
          type: "none",
          sizes: [
            { size: "גדול", price: 100 },
          ]
        },

        42102: { 
          name: "פיצות", 
          category: "amar",
          type: "none",
          sizes: [
            { size: "אסאדו", price: 88 },
          ]
        },
        11708: { 
          name: "ביס קוקטייל מזונות", 
          category: "amar",
          type: "none",
          sizes: [
            { size: "ליחידה ", price: 2.5 },
          ]
        },
        22461: { 
          name: "בולקעס", 
          searchName: "(לחמניה המוציא) בולקעס", 
          category: "amar",
          type: "none",
          sizes: [
            { size: "ליחידה ", price: 4 },
          ]
        },
        11706: { 
          name: "בולקעס", 
          searchName: "(לחמניה המוציא) בולקעס", 
          category: "amar",
          type: "none",
          sizes: [
            { size: "ליחידה ", price: 4 },
          ]
        },
        19120: { 
          name: "מגש מיני רוגלך שוקולד", 
          category: "online",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "בינוני", price: 95 },
            { size: "גדול", price: 135 },
          ]
        },
        19110: { 
          name: "מגש מיני בורקס תפו'א", 
          category: "online",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "בינוני", price: 95 },
            { size: "גדול", price: 135 },
          ]
        },

        12907: { 
          name: "מגש mix בשרים בעישון שלנו", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 375 },
            { size: "בינוני", price: 240 },
          ]
        },
        12620: { 
          name: "מגש ממולאים מטוגנים + רטבים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [{ size: "גדול", price: 125 }]
        },
        12330: { 
          name: "מגש קבבוני טלה", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 270 },
            { size: "בינוני", price: 185 },
          ]
        },
        12418: {
          name: "מגש שיפודי סאטה פרגית בטמפורת חמאת בוטנים",
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [20],
          izes: [{ size: "20 יחי", price: 425 }]
        },
        12405: { 
          name: "מגש מיני קיש ירקות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 יחי", price: 115 },
            { size: "15 יחי", price: 175 },
          ]
        },
        12450: { 
          name: "מגש ירקות חתוכים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 135 },
            { size: "בינוני", price: 95 },
          ]
        },
        12404: { 
          name: "מגש דגים מעושנים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 295 },
            { size: "בינוני", price: 195 },
          ]
        },
        12406: {
          name: "מגש מיני מאפה ירקות בסגנון סצ'ואן",
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 148 },
            { size: "20 יחי", price: 260 },
          ]
        },
        12407: { 
          name: "מגש אצבעות דג לבן בבצק בירה", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 205 },
            { size: "בינוני", price: 118 },
          ]
        },
        12451: { 
          name: "מגש אנטיפסטי של ירקות העונה", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "בינוני", price: 95 },
            { size: "גדול", price: 135 },
          ]
        },
        12605: { 
          name: "מגש מיני פסטיה במילוי עוף מוקפץ", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 178 },
            { size: "20 יחי", price: 300 },
          ]
                },
        12621: { 
          name: "מגש שניצלונים בטמפורה", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 299 },
            { size: "בינוני", price: 189 },
          ]
        },
        12464: { 
          name: "מגש שיפודי אנטיפסטי", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 יחי", price: 125 },
            { size: "15 יחי", price: 190 },
          ]
        },
        12463: { 
          name: "מגש סלט פירות ופקאן בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 105 },
            { size: "15 כוסות", price: 162 },
          ]
        },
        12456: {
          name: "מגש סלט עשבי תיבול וחמוציות בכוסות",
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 105 },
            { size: "15 כוסות", price: 162 },
          ]
        },
        12461: { 
          name: "מגש סלט בורגול חגיגי בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12462: { 
          name: "מגש ירקות מוחמצים בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12453: { 
          name: "מגש סלט קיסר וקרוטונים בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12460: {
          name: "מגש סלט כרוב צבעוני בכוסות",
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12800: { 
          name: "מגש סלט בורמזי בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12455: { 
          name: "מגש סלט פסטה בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12802: { 
          name: "מגש סלט קינואה בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        12801: { 
          name: "מגש סלט שורשים בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },

        12619: { 
          name: "מגש רוסטביף מהמעשנה", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "בינוני", price: 215 },
            { size: "גדול", price: 315 },
          ]
        },
        12452: { 
          name: "מגש סלט קטניות בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },

        1245299: {
          name: "ליטר סלט קטניות במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1246399: {
          name: "ליטר סלט פירות ופקאן במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1285099: {
          name: "ליטר סלט אדמה במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },

        1245699: {
          name: "ליטר סלט עשבי תיבול וחמוציות במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1246199: {
          name: "ליטר סלט בורגול חגיגי במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1246299: {
          name: "ליטר ירקות מוחמצים במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1245399: {
          name: "ליטר סלט קיסר וקרוטונים במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1246099: {
          name: "ליטר סלט כרוב צבעוני במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1280099: {
          name: "ליטר סלט בורמזי במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1245599: {
          name: "ליטר סלט פסטה במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1280299: {
          name: "ליטר סלט קינואה במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        1280199: {
          name: "ליטר סלט שורשים במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        4310199: {
          name: "ליטר סלט ירקות ישראלי במרוכז. *רוטב חובה!!*",
          category: "kitchen",
          type: "none",
          sizes: []
        },
        22443: { 
          name: "ליטר מרק ירקות כתומים", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11119: { 
          name: "ליטר חומוס", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11143: { 
          name: "ליטר טחינה אסלית", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11127: { 
          name: "ליטר חציל מטוגן בתחמיץ", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10634: { 
          name: "ליטר צ'יפס", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        23164: { 
          name: "ליטר מטבוחה פיקנטית", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11149: { 
          name: "ליטר מטבוחה פיקנטית", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11130: { 
          name: "ליטר חציל ממי", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },

        4310101: { 
          name: "מגש סלט ירקות ישראלי בכוסות", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: []
        },

        10807: { 
          name: "תבנית ענקית לקידוש קוגל תפו''א", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10811: { 
          name: "תבנית ענקית לקידוש קוגל ירושלמי", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11122: { 
          name: "ליטר חמוצים מנפיס", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10801: { 
          name: "ליטר טשולנט בשרי", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10803: { 
          name: "ליטר טשולנט מלכים", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10800: { 
          name: "ליטר טשולנט פרווה", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10628: { 
          name: "ליטר קוביות אנטיפסטי", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10603: { 
          name: "ליטר אורז פטריות ובצל", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10602: { 
          name: "ליטר אורז מקלובה", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11158: { 
          name: "ליטר סלט גולדיס המלכים", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10417: { 
          name: "פילה נסיכת הנילוס חריימה", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10204: { 
          name: "ליטר אסאדו ברוטב פלפלת", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10412: { 
          name: "פילה מושט חריימה", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10605: { 
          name: "ליטר אורז בטטה וצ'ילי מתוק", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10415: {
          name: "פילה אמנון מטוגן בציפוי בצק בירה",
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11170: { 
          name: "ליטר פלפל צבעוני בתחמיץ", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },

        10408: { 
          name: "פילה סלמון בחרדל ודבש", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10321: { 
          name: "פרגית על האש", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10324: { 
          name: "שיפוד פרגית על האש", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10201: { 
          name: "צלי כתף עגל בבישול קדירה", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        22443: { 
          name: "ליטר תפו''א ובטטה", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        11137: { 
          name: "ליטר חציל קלוי במיונז", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        22500: { 
          name: "ליטר עוף סיני מוקפץ", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },
        10318: { 
          name: "ליטר עוף סיני מוקפץ", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },

        11167: { 
          name: "סלק אדום עם בצלים טריים", 
          category: "kitchenProducts",
          type: "none",
          sizes: []
        },


        // בייקרי
        12493: { 
          name: "מגש mix טארטלטים", 
          category: "bakery",
          type: "quantity",
          defaultQuantity: 24,
          unit: "יחי'",
          predefinedQuantities: [24],
          sizes: [
            { size: "24 יחי", price: 216 },
          ]
        },
        12480: { 
          name: "מגש אקלר צרפתי", 
          category: "bakery",
          type: "quantity",
          defaultQuantity: 12,
          unit: "יחי'",
          predefinedQuantities: [12, 20],
          sizes: [
            { size: "12 יחי", price: 118 },
            { size: "20 יחי", price: 196 },
          ]
        },

        12486: { 
          name: "מגש מיני לימונשלי", 
          category: "bakery",
          type: "quantity",
         defaultQuantity: 21,
         unit: "כוסות",
         predefinedQuantities: [21, 35],
          sizes: [
            { size: "21 כוסות", price: 189 },
            { size: "35 כוסות", price: 315 },
          ]
        },
        12484: { 
          name: "מגש מיני טריקולו", 
          category: "bakery",
          type: "quantity",
         defaultQuantity: 21,
         unit: "כוסות",
         predefinedQuantities: [21, 35],
          sizes: [
            { size: "21 כוסות", price: 189 },
            { size: "35 כוסות", price: 315 },
          ]
        },
        12481: { 
          name: "מגש טראפלס חלומי", 
          category: "bakery",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 220 },
          ]
        },
        12487: { 
          name: "מגש מיני מוס אוריאו", 
          category: "bakery",
          type: "quantity",
         defaultQuantity: 21,
         unit: "כוסות",
         predefinedQuantities: [21, 35],
          sizes: [
            { size: "21 כוסות", price: 189 },
            { size: "35 כוסות", price: 315 },
          ]
        },
        12482: { 
          name: "מגש mix אקלרים", 
          category: "bakery",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 235 },
          ]
        },
        12488: { 
          name: "מגש מיני מוס שוקולד", 
          category: "bakery",
          type: "quantity",
         defaultQuantity: 21,
         unit: "כוסות",
         predefinedQuantities: [21, 35],
          sizes: [
            { size: "21 כוסות", price: 189 },
            { size: "35 כוסות", price: 315 },
          ]
        },
        12483: { 
          name: "מגש מיני טירמיסו", 
          category: "bakery",
          type: "quantity",
         defaultQuantity: 21,
         unit: "כוסות",
         predefinedQuantities: [21, 35],
          sizes: [
            { size: "21 כוסות", price: 189 },
            { size: "35 כוסות", price: 315 },
          ]
        },
        12601: { 
          name: "מגש mix מיני כוסות מוס", 
          category: "bakery",
          type: "quantity",
          defaultQuantity: 35,
          unit: "כוסות",
          predefinedQuantities: [35,],
          sizes: [
            { size: "35 כוסות", price: 420 },
          ]
        },
        12489: { 
          name: "מגש קינדר בטארטלט", 
          category: "bakery",
          type: "quantity",
          defaultQuantity: 24,
          unit: "יחי'",
          predefinedQuantities: [18, 24],
          sizes: [
            { size: "18 יחי", price: 252 },
            { size: "24 יחי", price: 324 },
          ]
        },
        12490: { 
          name: "מגש מקרונים מצרפת", 
          category: "bakery",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 192 },
          ]
        },
        // אונליין
        12457: { 
          name: "מגש אירוח פירות העונה", 
          category: "online",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 205 },
            { size: "בינוני", price: 139 },
          ]
        },
        12113: { 
          name: "מגש פירות עונה טריים", 
          category: "online",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 205 },
            { size: "בינוני", price: 139 },
          ]
        },
        12491: {
          name: "מגש בראוניז",
          category: "bakery",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 152 },
          ]
        },
        12494: {
          name: "מגש עוגיות של הבייקרי",
          category: "bakery",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "בינוני", price: 165 },
            { size: "גדול", price: 264 },
          ]
        },
        12612: {
          name: "מגש עוגות בחושות",
          category: "bakery",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "בינוני", price: 95 },
            { size: "גדול", price: 155 },
          ]
        },
        12127: { 
          name: "מגש כוסות צבעוני", 
          category: "bakery",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 149 },
          ]
        },
        12600: { 
          name: "מגש חיתוכיות של הבייקרי", 
          category: "bakery",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 225 },
          ]
        },
        13461: {
          name: "מגש פירות העונה בכוסות 5 סוגים שונים סה''כ 15 כוסות",
          category: "online",
          type: "none",
          sizes: [
            { size: "15 כוסות", price: 200 },
          ]
        },
        // מחסן
        12459: { 
          name: "מגש פירות יבשים", 
          category: "warehouse",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 160 },
          ]
        },

  11170: { 
    name: "ליטר פלפל צבעוני בתחמיץ", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  99109: { 
    name: "חלת חתן", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "גדול", price: 100 }
    ]
  },

  100: { 
    name: "שאר ההזמנה...", 
    category: "online",
    type: "none",
  },
  0: { 
    name: "", 
    searchName: "ריק מטבח", 
    category: "kitchen",
    type: "none",
  },
  1: { 
    name: "", 
    searchName: "ריק קונדיטורייה", 
    category: "bakery",
    type: "none",
  },
  2: { 
    name: "", 
    searchName: "ריק אונליין", 
    category: "online",
    type: "none",
  },
  3: { 
    name: "", 
    searchName: "ריק מחסן", 
    category: "warehouse",
    type: "none",
  },
  4: { 
    name: "", 
    searchName: "ריק סושי", 
    category: "sushi",
    type: "none",
  },
  5: { 
    name: "", 
    searchName: "ריק קונדיטוריית עמר", 
    category: "amar",
    type: "none",
  },
  6: { 
    name: "", 
    searchName: "ריק מטבח מוסטפה", 
    category: "kitchenProducts",
    type: "none",
  },
  11621: { 
    name: "טארט לימון גדול", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 88 }
    ]
  },
  11403: { 
    name: "עוגת פררו רושה", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 150 }
    ]
  },
  11655: { 
    name: "עוגת מוס פיסטוק חגיגית", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 120 }
    ]
  },
  11654: { 
    name: "עוגת מוס שוקולד בלגי", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 120 }
    ]
  },
  11563: { 
    name: "עוגת יום הולדת כמו בשנות ה90", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 120 }
    ]
  },
  11656: { 
    name: "עוגת שכבות שוקולד", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 140 }
    ]
  },
  11620: { 
    name: "טארט שוקולד גדול", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 88 }
    ]
  },
  11558: { 
    name: "טארט תפוחי עץ גדול", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 88 }
    ]
  },
  11557: { 
    name: "טארט פקאן גדול", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 88 }
    ]
  },
  11709: { 
    name: "לחמנית ביס בריוש", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  117083: { 
    name: "לחמנית ביס שומשום", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11700: { 
    name: "חלה של הבייקרי", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  46202: { 
    name: "כוס מוס לימונשלי", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  46203: { 
    name: "כוס מוס אוראו", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  46204: { 
    name: "כוס מוס שוקולד", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  46209: { 
    name: "כוס מוס טירמיסו", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10: { 
    name: "בקבוק קולה גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  11: { 
    name: "בקבוק קוקה קולה גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  12: { 
    name: "בקבוק קוקה קולה זירו גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  13: { 
    name: "בקבוק פפסי גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  14: { 
    name: "בקבוק פפסי מקס גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  15: { 
    name: "בקבוק 7 אפ גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  16: { 
    name: "בקבוק מירינדה גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  17: { 
    name: "בקבוק סודה גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  18: { 
    name: "בקבוק מים גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  19: { 
    name: "בקבוק פפסי גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  20: { 
    name: "בקבוק מים קטן", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  21: { 
    name: "בקבוק 7 אפ זירו גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  22: { 
    name: "בקבוק ג'מפ תות בננה גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  23: { 
    name: "בקבוק ג'מפ תפוזים גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  24: { 
    name: "בקבוק ג'מפ ענבים גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  25: { 
    name: "בקבוק ג'מפ אשכוליות גדול", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 10 }
    ]
  },
  31: { 
    name: "קערות לסלט", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  32: { 
    name: "כפות הגשה", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  33: { 
    name: "צלחות", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  34: { 
    name: "כוסות", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  35: { 
    name: "כפות", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  36: { 
    name: "מזלגות", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  462099: { 
    name: "כוס מוס טריקולו", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  18970: { 
    name: "קישקע פרווה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11100: { 
    name: "ליטר סלט ביצים במיונז", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "לליטר'", price: 0 }
    ]
  },
  10806: { 
    name: "אינגליש קייק קוגל תפו''א", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10809: { 
    name: "אינגליש קייק קוגל ירושלמי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10921: { 
    name: "ליטר מרק מינסטרונה איטלקי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  22530: { 
    name: "ליטר פרחי ברוקולי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10639: { 
    name: "ליטר פרחי ברוקולי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10640: { 
    name: "ליטר פרחי כרובית קלויים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10343: { 
    name: "קריספוני עגל בציפוי פיסטוק", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10609: { 
    name: "ליטר ספגטי ברוטב עגבניות", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10614: { 
    name: "ליטר פסטה מוקפצת בירקות", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11157: { 
    name: "ליטר גואקמולי אבוקדו", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11152: { 
    name: "ליטר מעדן אבוקדו ביתי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11144: { 
    name: "ליטר טחינה ירוקה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10629: { 
    name: "ליטר צימעס", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10500: { 
    name: "ליטר כבד קצוץ הדגל", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10501: { 
    name: "ליטר כבד קצוץ צרפתי מתקתק", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10503: { 
    name: "ליטר כבד צלוי ברוטב יין", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10504: { 
    name: "ליטר קונפי כבדי עוף", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10502: { 
    name: "ליטר כבד עוף צלוי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11123: { 
    name: "ליטר ממרח חציל בטעם כבד", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11172: { 
    name: "ליטר קישואים בטעם כבד", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  112203: { 
    name: "ליטר כבד עוף ברוטב יין", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10616: { 
    name: "ליטר פארפל פתיתים של חסידים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10953: { 
    name: "ליטר ארבעס", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10954: { 
    name: "ליטר בובעס", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10400: { 
    name: "פילה סלמוןן חריימה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10405: { 
    name: "פילה סלמון חריימה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10402: { 
    name: "פילה סלמון צ'ימיצ'ורי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10403: { 
    name: "פילה סלמון ברוטב טריאקי וג'ינג'ר", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10404: { 
    name: "פילה סלמון ברוטב צ'ילי והדרים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10406: { 
    name: "פילה סלמון חמוץ מתוק", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10409: { 
    name: "פילה סלמון עשבים טריים ולימונים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  12424: { 
    name: "ישיבות במשרד", 
    category: "kitchen",
    type: "none",
    sizes: [
            { size: "10 איש", price: 759 },
            { size: "15 איש", price: 1218 },
          ]
  },
  12615: { 
    name: "חגיגה לחובבי בשר", 
    category: "kitchen",
    type: "none",
    sizes: [
            { size: "12 איש", price: 1514 },
            { size: "18 איש", price: 2543 },
          ]
  },
  12417: { 
    name: "מגש כדורי עוף פריכים בציפוי פנקו יפני ורטבים", 
    category: "kitchen",
    type: "size",
    defaultSize: "large",  
      sizes: [
      { size: "בינוני", price: 195 },
      { size: "גדול", price: 269 }
    ]
  },
  10701: { 
    name: "פלפל ממולא של בית", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11168: { 
    name: "ליטר סלט ערבי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10310: { 
    name: "ליטר שניצלונים בטמפורה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11707: { 
    name: "לחמניה מזונות", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10821: { 
    name: "פשטידת בצל אישית", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10822: { 
    name: "פשטידת פטריות אישית", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10823: { 
    name: "פשטידת קישואים אישית", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10820: { 
    name: "פשטידת תפוחי עץ אישית", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11751: { 
    name: "לחם דגנים אובלי", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11754: { 
    name: "לחם כפרי צרפתי", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11105: { 
    name: "ליטר גזר מרוקאי אסלי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10623: { 
    name: "ליטר שעועית שלמה מוקפצת עם פטריות שמפניון", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  22467: { 
    name: "סופלה שוקולד", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10350: { 
    name: "חזה עוף בטעמי המזרח הרחוק", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10320: { 
    name: "פרגית בגריל", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10327: { 
    name: "מוסקה יוונית בשרית", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10702: { 
    name: "מוסקה יוונית פרווה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11160: { 
    name: "ליטר טבולה עם ירקות עונה ופטרוזיליה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11111: { 
    name: "ליטר פסטו עשבי תיבול", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10315: { 
    name: "רבע עוף ברוטב סצ'ואן", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  19100: { 
    name: "מגש מיני מאפים מתוקים (25 יחי') מ 5 סוגים", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "גדול", price: 125 }
    ]
  },
  11552: { 
    name: "פרנות לוהטות מהטאבון", 
    category: "warehouse",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11146: { 
    name: "ליטר קולסלאו", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11101: { 
    name: "כרעיים עוף בגריל", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10307: { 
    name: "שניצל עוף קלאסי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  22415: { 
    name: "שניצל עוף קלאסי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  22517: { 
    name: "ליטר אורז תאילנדי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  111603: { 
    name: "מאפה פילו במילוי עוף מוקפץ", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  33302: { 
    name: "מוסקה פרווה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  111201: { 
    name: "חזה עוף בגריל", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10301: { 
    name: "חזה עוף על האש", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11164: { 
    name: "ליטר חריין-חזרת", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10425: { 
    name: "קלופס וויט פיש אמריקאי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10421: { 
    name: "קלופס גפילטע פיש קלאסי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11102: { 
    name: "ליטר סלט ביצים ובצל מטוגן", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11108: { 
    name: "ליטר טאמאטע דיפ", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11147: { 
    name: "ליטר ליפתן תפ''ע", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10900: { 
    name: "ליטר מרק עוף של סבתא", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  22448: { 
    name: "ליטר מרק עוף של סבתא", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10950: { 
    name: "ליטר אטריות למרק", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10920: { 
    name: "ליטר מרק גולש", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10903: { 
    name: "ליטר מרק ירקות עשיר", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10921: { 
    name: "ליטר מרק מינסטרונה איטלקי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11135: { 
    name: "ליטר חציל סצ'ואן", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11161: { 
    name: "ליטר סלט טונה קלאסי במיונז", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10206: { 
    name: "בקר פראנץ רוסט ברוטב יין", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10641: { 
    name: "ליטר סירות בטטה ורוזמרין", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  14021: { 
    name: "שטרודל תפוחים אישי", 
    category: "bakery",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11151: { 
    name: "ליטר סלט מלפפונים ובצל", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11179: { 
    name: "ליטר סלט תפו''א כמו של פעם", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11160: { 
    name: "ליטר סלט טבולה טרי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11710: { 
    name: "חלה מקמח מלא", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11703: { 
    name: "חלה מקמח כוסמין", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11704: { 
    name: "חצי חלה", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11701: { 
    name: "חלה בריוש מתוקה", 
    category: "amar",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  33302: { 
    name: "מוסקה פרווה", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  11103: { 
    name: "ליטר גזר מתוק עם קוביות אננס", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11114: { 
    name: "ליטר סלט וולדרוף", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10704: { 
    name: "מאפה ירקות מוקפצים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10305: { 
    name: "עוף קייב במילוי בשר עגל", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  10304: { 
    name: "שיפוד חזה עוף על האש", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליחי'", price: 0 }
    ]
  },
  312011: { 
    name: "ליטר תפו''א כתום", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  316061: { 
    name: "ליטר אנטיפסטי ירקות קלויים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10600: { 
    name: "ליטר אורז לבן", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  11134: { 
    name: "ליטר חציל מרוקאי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  22510: { 
    name: "ליטר תפו''א כתום", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10632: { 
    name: "ליטר תפו''א צהוב", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10309: { 
    name: "ליטר שניצלונים", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10319: { 
    name: "ליטר מעורב ירושלמי", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10620: { 
    name: "ליטר קוסקוס", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  10621: { 
    name: "ליטר ירקות לקוסקוס", 
    category: "kitchenProducts",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  1910499: { 
    name: "ליטר סלט עוף אסייתי במרוכז. *רוטב חובה!!*", 
    category: "kitchen",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  1930099: { 
    name: "ליטר סלט כרוב אסייתי במרוכז. *רוטב חובה!!*", 
    category: "kitchen",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },
  1930199: { 
    name: "ליטר סלט בטטה במייפל במרוכז. *רוטב חובה!!*", 
    category: "kitchen",
    type: "none",
    sizes: [
      { size: "ליטר", price: 0 }
    ]
  },

        30: { 
          name: "חד''פ רגיל סכו''ם צלחת כוס", 
          category: "warehouse",
          type: "none",
          sizes: [
            { size: "סכ''ום", price: 3 },
          ]
        },
        39: { 
          name: "חד''פ יוקרתי סכו''ם צלחת כוס", 
          category: "warehouse",
          type: "none",
          sizes: [
            { size: "סכ''ום", price: 3 },
          ]
        },
        // סושי

        40105: { 
          searchName: "מגש סושי קומבינציה ספייסי",
          name: "מגש קומבינציה ספייסי", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "24 יחי", price: 189 },
          ]
        },
        40106: { 
          searchName: "מגש סושי קומבינציה קריספי",
          name: "מגש קומבינציה קריספי", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "24 יחי", price: 203 },
          ]
        },
        40101: { 
          searchName:"מגש סושי מסיבה גם וגם",
          name: "מגש מסיבה גם וגם", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "96 יחי", price: 539 },
          ]
        },
        40103: { 
          searchName:  "מגש סושי קומבינציה Special גולד'יס",
          name: "מגש קומבינציה Special גולד'יס", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "40 יחי + 4 סנדוויץ", price: 343 },
          ]
        },
        40102: { 
          searchName:"מגש סושי מסיבה צמחוני",
          name: "מגש מסיבה צמחוני", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "96 יחי", price: 483 },
          ]
        },
        40100: { 
          searchName: "מגש סושי מסיבה דגים",
          name: "מגש מסיבה דגים", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "96 יחי", price: 559 },
          ]
        },
        40108: { 
          searchName: "מגש סושי קומבינציה סלמון",
          name: "מגש קומבינציה סלמון", 
          category: "sushi",
          type: "none",
          sizes: [
            { size: "24 יחי + סושי סנדוויץ", price: 294 },
          ]
        },
        19302: { 
          name: "מגש פיתה שווארמה כרובית", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [15],
          sizes: [
            { size: "15 יחי", price: 0 },
          ]
        },
        19300: { 
          name: "מגש סלט כרוב אסייתי", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        19103: { 
          name: "מגש מיני מאפים מתוקים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 240 },
          ]
        },
        19104: { 
          name: "מגש סלט עוף אסייתי", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 180 },
            { size: "15 כוסות", price: 270 },
          ]
        },
        19105: { 
          name: "מגש פוקאצ'ינות", 
          category: "kitchen",
          type: "none",
          sizes: [
            { size: "גדול", price: 139 },
          ]
        },
        19101: { 
          name: "מגש ביס רוסטביף ניו יורק", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 20,
          unit: "יחי'",
          predefinedQuantities: [20],
          sizes: [
            { size: "20 יחי", price: 380 },
          ]
        },
        19102: { 
          name: "מגש ביס פרגית אסייתי", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [15],
          sizes: [
            { size: "15 יחי", price: 280 },
          ]
        },
        19301: { 
          name: "מגש סלט בטטה במייפל", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },
        13473: { 
          name: "מגש בורקס פינוקים", 
          category: "kitchen",
          type: "size",
          defaultSize: "large",
          sizes: [
            { size: "גדול", price: 186 },
          ]
        },
        13475: {
          name: "מגש חצילים מזן בלאדי על חם מעושן",
          category: "kitchen",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 149 },
          ]
        },
        13476: { 
          name: "מגש קרפצ'ו סלקים עונתי", 
          category: "kitchen",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 149 },
          ]
        },
        13474: { 
          name: "מגש קרפצ'ו סלמון מעושן", 
          category: "kitchen",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 185 },
          ]
        },
        13478: { 
          name: "מגש טורטיית סביח", 
          category: "kitchen",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 186 },
          ]
        },
        13477: { 
          name: "מגש טורטייה של אנטיפסטי", 
          category: "kitchen",
          type: "size",
          defaultSize: "medium",
          sizes: [
            { size: "בינוני", price: 186 },
          ]
        },
        12850: { 
          name: "מגש סלט אדמה", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "כוסות",
          predefinedQuantities: [10, 15],
          sizes: [
            { size: "10 כוסות", price: 115 },
            { size: "15 כוסות", price: 172 },
          ]
        },

        410: { 
          name: "מגש קרואסון סלט ביצים", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [15, 20],
          sizes: [
            { size: "15 יחי", price: 0 },
            { size: "20 יחי", price: 0 },
          ]
        },
        415: { 
          name: "מגש קרואסון סלט טונה", 
          category: "kitchen",
          type: "quantity",
          defaultQuantity: 15,
          unit: "יחי'",
          predefinedQuantities: [15, 20],
          sizes: [
            { size: "15 יחי", price: 0 },
            { size: "20 יחי", price: 0 },
          ]
        },
      };



      function createQuantityDatalist(quantities, currentValue) {
        // מוחק רשימה קודמת אם קיימת
        const existingList = document.getElementById("quantityOptionsList");
        if (existingList) {
          existingList.remove();
        }

        // מוחק כפתור קודם אם קיים
        const existingButton = document.querySelector(".quantity-toggle-btn");
        if (existingButton) {
          existingButton.remove();
        }

        const quantityInput = document.getElementById("unitQuantity");
        if (!quantityInput) return;

        // יוצר כפתור להצגת אפשרויות
        const toggleButton = document.createElement("button");
        toggleButton.type = "button";
        toggleButton.className = "quantity-toggle-btn";
        toggleButton.innerHTML = "↓↓";
        toggleButton.style.cssText = `
        position: absolute;
        right: 25px;
        top: 50%;
        transform: translateY(-50%);
        background-color: #c1232324;
        border: none;
        cursor: pointer;
        padding: 0 15px;
        font-size: 14px;
        color: #007bff;
    `;

        // יוצר רשימת אפשרויות
        const optionsList = document.createElement("ul");
        optionsList.id = "quantityOptionsList";
        optionsList.style.cssText = `
        position: absolute;
        list-style: none;
        padding: 5px 0;
        margin: 0;
        background: white;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        z-index: 1000;
        display: none;
        width: 100px;
        right: 25px;
    `;

        // מוסיף את כל האפשרויות לרשימה (ללא בדיקה אם זה הערך הנוכחי)
        quantities.forEach((quantity) => {
          const li = document.createElement("li");
          li.textContent = quantity;
          li.style.cssText = `
            padding: 8px 15px;
            cursor: pointer;
            text-align: center;
            ${quantity == currentValue ? "background-color: #f0f0f0;" : ""}
        `;
          li.onmouseover = () => (li.style.backgroundColor = "#f0f0f0");
          li.onmouseout = () =>
            (li.style.backgroundColor =
              quantity == currentValue ? "#f0f0f0" : "white");
          li.onclick = () => {
            quantityInput.value = quantity;
            quantityInput.dispatchEvent(new Event("change"));
            optionsList.style.display = "none";
          };
          optionsList.appendChild(li);
        });

        // מוסיף את הכפתור והרשימה
        quantityInput.parentElement.style.position = "relative";
        quantityInput.parentElement.appendChild(toggleButton);
        quantityInput.parentElement.appendChild(optionsList);

        // מטפל בלחיצה על הכפתור
        toggleButton.onclick = (e) => {
          e.preventDefault();
          optionsList.style.display =
            optionsList.style.display === "none" ? "block" : "none";
        };

        // מסתיר את הרשימה בלחיצה מחוץ
        document.addEventListener("click", (e) => {
          if (
            !quantityInput.contains(e.target) &&
            !toggleButton.contains(e.target) &&
            !optionsList.contains(e.target)
          ) {
            optionsList.style.display = "none";
          }
        });
      }

      function configureProduct(productCode) {
        console.log("מנסה להגדיר מוצר:", productCode);

        const config = window.unifiedProductData[productCode];
        if (!config) {
          console.log("מוצר לא מוגדר ברשימה, משאיר הגדרות ברירת מחדל");
          const existingList = document.getElementById("quantityOptionsList");
          const existingButton = document.querySelector(".quantity-toggle-btn");
          if (existingList) existingList.remove();
          if (existingButton) existingButton.remove();
          return;
        }

        try {
          if (config.type === "none") {
            const noneRadio = document.getElementById("noneOption");
            if (noneRadio) {
              noneRadio.checked = true;
              noneRadio.dispatchEvent(new Event("change"));
            }
          } else if (config.type === "size") {
            const sizeRadio = document.getElementById("sizeOption");
            if (sizeRadio) {
              sizeRadio.checked = true;
              sizeRadio.dispatchEvent(new Event("change"));

              setTimeout(() => {
                const sizeSelect = document.getElementById("productSize");
                if (sizeSelect) {
                  sizeSelect.value = config.defaultSize;
                  sizeSelect.dispatchEvent(new Event("change"));
                }
              }, 100);
            }
          } else if (config.type === "quantity") {
            const quantityRadio = document.getElementById("quantityOption");
            if (quantityRadio) {
              quantityRadio.checked = true;
              quantityRadio.dispatchEvent(new Event("change"));

              setTimeout(() => {
                const quantityInput = document.getElementById("unitQuantity");
                const unitSelect = document.getElementById("unitType");

                if (quantityInput) {
                  quantityInput.value = config.defaultQuantity;
                  if (config.predefinedQuantities) {
                    createQuantityDatalist(
                      config.predefinedQuantities,
                      config.defaultQuantity
                    );
                  }
                  quantityInput.dispatchEvent(new Event("change"));
                }
                if (unitSelect) {
                  unitSelect.value = config.unit;
                  unitSelect.dispatchEvent(new Event("change"));
                }
              }, 100);
            }
          }
        } catch (error) {
          console.log("שגיאה בהגדרת המוצר:", error);
        }
      }

      // הפונקציה של ההדבקה נשארת אותה דבר
      const originalPasteFunction = window.pasteFromClipboard;
      window.pasteFromClipboard = async function () {
        if (originalPasteFunction) {
          await originalPasteFunction();
        }

        setTimeout(() => {
          const searchInput = document.querySelector('input[type="text"]');
          if (searchInput && searchInput.value) {
            const code = searchInput.value.trim();
            console.log('נמצא מק"ט:', code);
            configureProduct(code);
          }
        }, 200);
      };

      // מוסיפים את הקוד הזה בסוף הקובץ
      let timeoutId = null;

      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          // מבטל טיימר קודם אם קיים
          if (timeoutId) {
            clearTimeout(timeoutId);
          }

          const inputValue = e.target.value.trim();

          // בדיקה שהקלט אינו URL
          if (inputValue.startsWith('http://') || inputValue.startsWith('https://')) {
            e.target.value = '';
            showNotification('לא ניתן להזין URL, יש להזין רק מק"ט', 'red');
            return;
          }

          // אם השדה ריק - מאפס את הבחירה
          if (!inputValue) {
            // מסמן את כפתור "לפי כמות" כברירת מחדל
            const quantityRadio = document.getElementById("quantityOption");
            if (quantityRadio) {
              quantityRadio.checked = true;
              quantityRadio.dispatchEvent(new Event("change"));
            }

            // מנקה את האפשרויות הקיימות
            const existingList = document.getElementById("quantityOptionsList");
            const existingButton = document.querySelector(
              ".quantity-toggle-btn"
            );
            const quantityInput = document.getElementById("unitQuantity");

            if (existingList) existingList.remove();
            if (existingButton) existingButton.remove();
            if (quantityInput) quantityInput.value = "";

            document.getElementById("breadTypeDiv").style.display = "none";
            return;
          }

          // ממשיך כרגיל אם יש ערך
          timeoutId = setTimeout(() => {
            const code = e.target.value.trim();
            if (!code) return;
            // סנכרון תיבת החיפוש והצגת תוצאות
            const si = document.getElementById("searchInput");
            if (si) si.value = code;
            if (typeof window.searchProduct === 'function') {
              window.searchProduct();
            }
            // קונפיגורציה רק אם זה מק"ט מספרי שקיים במערכת
            const isNumeric = /^\d+$/.test(code);
            const exists = typeof window.unifiedProductData === 'object' && window.unifiedProductData && window.unifiedProductData[code];
            if (isNumeric && exists && typeof configureProduct === 'function') {
              console.log('נמצא מק"ט (הקלדה):', code);
              configureProduct(code);
            }
          }, 500);
        });

      // מעדכנים את פונקציית pasteFromClipboard
      window.pasteFromClipboard = async function () {
        try {
          const text = await navigator.clipboard.readText();

          // בדיקה שהטקסט אינו URL
          if (text.startsWith('http://') || text.startsWith('https://')) {
            showNotification('לא ניתן להדביק URL, יש להדביק רק מק"ט', 'red');
            return;
          }

          const searchInput = document.getElementById("searchInput");
          const productCodeInput = document.getElementById("productCode");

          // בדיקה שהטקסט מכיל רק מספרים (מק"ט תקין)
          const cleanCode = text.trim();
          if (!/^\d+$/.test(cleanCode)) {
            showNotification('מק"ט חייב להכיל רק מספרים', 'red');
            return;
          }

          if (searchInput) searchInput.value = cleanCode;
          if (productCodeInput) productCodeInput.value = cleanCode;

          // הפעלת החיפוש
          if (typeof searchProduct === 'function') {
            searchProduct();
          }

          // בדיקה אם זה מק"ט של ביסים
          if (typeof checkBisProduct === 'function') {
            checkBisProduct(cleanCode);
          }

          // הגדרת המוצר
          if (typeof configureProduct === 'function') {
            configureProduct(cleanCode);
          }

          showNotification('הודבק בהצלחה!', 'green');
        } catch (err) {
          console.error('Failed to read clipboard:', err);
          showNotification('לא הצלחנו לגשת ללוח ההעתקה', 'red');
        }
      };

      document
        .getElementById("increaseButton")
        .addEventListener("click", function () {
          const quantityInput = document.getElementById("productQuantity");
          quantityInput.value = parseInt(quantityInput.value) + 1; // Increase quantity by 1
        });

      document
        .getElementById("decreaseButton")
        .addEventListener("click", function () {
          const quantityInput = document.getElementById("productQuantity");
          const currentValue = parseInt(quantityInput.value);
          if (currentValue > 1) {
            quantityInput.value = currentValue - 1; // Decrease quantity by 1, but not below 1
          }
        });

      function updateSelectedRadio() {
        const radioContainers = document.querySelectorAll(".radio-container");
        radioContainers.forEach((container) => {
          const radio = container.querySelector('input[type="radio"]');
          if (radio.checked) {
            container.classList.add("selected"); // Add selected class if checked
          } else {
            container.classList.remove("selected"); // Remove selected class if not checked
          }
        });
      }

      // Call this function on page load to set the initial state
      updateSelectedRadio();
      // טעינת פרטי ההזמנה מדפדפן בעת פתיחת הדף
      document.addEventListener("DOMContentLoaded", () => {
        document
          .getElementById("orderDate")

          .addEventListener("change", saveOrderDetails);
        document
          .getElementById("orderTime")
          .addEventListener("change", saveOrderDetails);
        document
          .getElementById("orderNumber")
          .addEventListener("change", saveOrderDetails);
        displayOrderInfo();
      });

      // שמירת פרטי ההזמנה ב-Local Storage
      function saveOrderDetails() {
        const orderNumber = document.getElementById("orderNumber").value;
        const orderDate = document.getElementById("orderDate").value;
        const orderTime = document.getElementById("orderTime").value;
        const temperature = document.getElementById("temperature").value; // שמירת מצב חם/קר
        localStorage.setItem("orderNumber", orderNumber);
        localStorage.setItem("orderDate", orderDate);
        localStorage.setItem("orderTime", orderTime);
        localStorage.setItem("temperature", temperature); // שמירת בחירה של חם/קר

        // שמירת רשימות המוצרים
        ["kitchen", "bakery",  "kitchenProducts", "online", "warehouse"].forEach((category) => {
          const items = Array.from(
            document.getElementById(`${category}List`).children
          ).map((li) => li.firstElementChild.textContent);
          localStorage.setItem(`${category}Items`, JSON.stringify(items));
        });

        displayOrderInfo();
      }
      function loadSavedOrder() {
        displayOrderInfo();

        ["kitchen", "bakery",  "kitchenProducts", "online", "amar", "warehouse"].forEach(
          (category) => {
            const items = JSON.parse(
              localStorage.getItem(`${category}Items`) || "[]"
            );
            const list = document.getElementById(`${category}List`);
            list.innerHTML = "";
            items.forEach((item) => {
              const li = document.createElement("li");
              li.innerHTML = `
                        <span>${item}</span>
                        <button class="delete-btn" onclick="removeProduct(this, '${category}')">מחק</button>
                    `;
              list.appendChild(li);
            });
          }
        );
      }

      function cleanInput(input) {
        return input.trim();
      }

      // קריאה לפונקציית הטעינה בעת טעינת הדף
      document.addEventListener("DOMContentLoaded", loadSavedOrder);

      // הצגת פרטי ההזמנה על המסך
      function displayOrderInfo() {
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderTime = localStorage.getItem("orderTime") || "";
        const temperature = localStorage.getItem("temperature") || ""; // הצגת חם/קר
        const formattedDate = orderDate
          ? formatDateToDDMMYYYY(orderDate)
          : "תאריך לא תקין";
        document.getElementById(
          "orderInfo"
        ).innerHTML = `<strong>הזמנה מס: ${orderNumber}</strong><br>
                <strong>לתאריך: ${formattedDate}</strong><br>
                <strong>לשעה: ${orderTime}</strong>`;

        document.getElementById("notesSummary").textContent = temperature
          ? `''${temperature}''`
          : "";
      }

      function extractBreadDetails(text) {
        const matches = text.match(/\((\d+)\s*יחי'\)\s*(ביס\s*\w+)/);
        if (matches) {
          return {
            quantity: matches[1],
            breadType: matches[2],
          };
        }
        return null;
      }

      function calculateTotalCorassonQuantity() {
        const allLists = document.querySelectorAll(
          "#kitchenList li, #bakeryList li, #onlineList li, #warehouseList li"
        );
        let totalQuantity = 0;

        allLists.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode = productCodeElement.textContent.match(/\d+/)[0];
            if (productCode === "12626") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*מגש.*?\((\d+)\s*יחי'/);
              if (match) {
                const trays = parseInt(match[1]);
                const unitsPerTray = parseInt(match[2]);
                totalQuantity += trays * unitsPerTray;
              }
            }
          }
        });

        return totalQuantity;
      }



      function copyFruitSummary() {
    const waEditable = document.getElementById('waEditableFruits');
    const modal = document.getElementById('whatsappFruitsModal');
    // אם המודל פתוח (כלומר, המשתמש עורך ידנית)
    if (modal && waEditable && modal.style.display !== "none") {
        let message = waEditable.innerHTML
            .replace(/<br><br>/g, '\n\n')
            .replace(/<div>/g, '\n')
            .replace(/<br>/g, '\n')
            .replace(/<b>(.*?)<\/b>/g, '*$1*')
            .replace(/<[^>]+>/g, '')
            .replace(/\n{3,}/g, '\n\n')
            .trim();
        if (!message) {
            showNotification('אין מה להעתיק', 'red');
            return;
        }
        navigator.clipboard.writeText(message)
            .then(() => showCopyNotification("סיכום פירות הועתק בהצלחה!"))
            .catch(() => showCopyNotification("שגיאה בהעתקת סיכום פירות.", true));
    } else {
        // אם המודל לא פתוח – העתק סיכום אוטומטי (כמו היום)
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        const fruitItems = getFruitItems().map((item) => {
            const match = item.match(/(\\d+)\\s+מגש.*?\\((.*?)\\)/);
            if (match) {
                const [_, quantity, size] = match;
                return `${quantity} מגש פירות *${size}*`;
            }
            return item;
        });

        const totalFruitTrays = calculateTotalFruitTrays();
        if (totalFruitTrays > 0) {
            fruitItems.push(
                `${totalFruitTrays} מגש פירות העונה בכוסות *5 סוגים שונים סה''כ 15 כוסות במגש*`
            );
        }

        if (fruitItems.length > 0) {
            const fruitSummary = `*ליום ${orderDay} עד השעה: ${orderTime}*\n\n${fruitItems.join(
                "\n"
            )}\n\n(הזמנה מס' *${orderNumber}*)`;

            navigator.clipboard
                .writeText(fruitSummary.trim())
                .then(() => showCopyNotification("סיכום פירות הועתק בהצלחה!"))
                .catch(() => showCopyNotification("שגיאה בהעתקת סיכום פירות.", true));
        } else {
            showNotification("אין מגשי פירות בהזמנה.", "red");
        }
    }
  }
      // פונקציה חדשה לחישוב כמות המגשים של המקט החדש
      function calculateTotalFruitTrays() {
        const fruitList = document.getElementById("onlineList");
        let totalQuantity = 0;

        Array.from(fruitList.children).forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "13461") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*מגש/);
              if (match) {
                totalQuantity += parseInt(match[1]);
              }
            }
          }
        });

        return totalQuantity;
      }

      // פונקציה לקבלת רשימת מגשי הפירות בסיכום
      function getFruitItems() {
        const fruitCodes = ["12113", "12457"]; // מק"ט של מגשי הפירות
        const fruitItems = [];

        const lists = [
          "kitchenList",
          "bakeryList",
          "onlineList",
          "warehouseList",
        ];

        lists.forEach((listId) => {
          const list = document.getElementById(listId);
          if (!list) return;

          Array.from(list.children).forEach((item) => {
            const itemText = item.querySelector(".product-code")?.textContent;
            if (itemText) {
              const code = itemText.match(/מק"ט: (\d+)/)?.[1];
              if (fruitCodes.includes(code)) {
                fruitItems.push(item.querySelector("span").textContent);
              }
            }
          });
        });
        return fruitItems;
      }

      // פונקציה לקבלת היום בשבוע מתאריך
      function getDayOfWeek(dateString) {
        const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
        const date = new Date(dateString);
        return days[date.getDay()];
      }
      function copyWarehouseSummary() {
    const waEditable = document.getElementById('waEditableWarehouse');
    const modal = document.getElementById('whatsappWarehouseModal');
    // אם המודל פתוח (כלומר, המשתמש עורך ידנית)
    if (modal && waEditable && modal.style.display !== "none") {
        let message = waEditable.innerHTML
            .replace(/<br><br>/g, '\n\n')
            .replace(/<div>/g, '\n')
            .replace(/<br>/g, '\n')
            .replace(/<b>(.*?)<\/b>/g, '*$1*')
            .replace(/<[^>]+>/g, '')
            .replace(/\n{3,}/g, '\n\n')
            .trim();
        if (!message) {
            showNotification('אין מה להעתיק', 'red');
            return;
        }
        navigator.clipboard.writeText(message)
            .then(() => showCopyNotification("סיכום מחסן הועתק בהצלחה!"))
            .catch(() => showCopyNotification("שגיאה בהעתקת סיכום מחסן.", true));
    } else {
        // אם המודל לא פתוח – העתק סיכום אוטומטי (כמו היום)
        // כאן תשתמש בלוגיקה הקיימת שלך ליצירת סיכום מחסן
        const warehouseList = document.getElementById("warehouseList");
        const orderDate = new Date(document.getElementById("orderDate").value);
        const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
        const dayName = days[orderDate.getDay()];
        const orderTime = document.getElementById("orderTime").value;

        let summary = `*ליום ${dayName} עד השעה: ${orderTime}*\nמארי\n\n`;
        let pranutTotal = 0;
        let warehouseItemsSummary = [];
        const warehouseItems = Array.from(warehouseList.children);

        warehouseItems.forEach((item) => {
            const productCodeElement = item.querySelector(".product-code");
            const itemText = item.querySelector("span").textContent;
            if (productCodeElement) {
                warehouseItemsSummary.push(
                    itemText.replace(/\(מק"ט: \d+\)/g, "").trim()
                );
            }
        });

        // חישוב כמות הפרנות ממגש ניגוב למתקדמים
        const kitchenList = document.getElementById("kitchenList");
        const kitchenItems = Array.from(kitchenList.children);
        kitchenItems.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "12602") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*מגש/);
              if (match) {
                const trays = parseInt(match[1]);
                pranutTotal += trays * 6; // כל מגש = 6 פרנות
              }
            }
          }
        });

        if (warehouseItemsSummary.length === 0 && pranutTotal === 0) {
            showNotification("אין מוצרים במחסן.", "red");
            return;
        }

        if (warehouseItemsSummary.length > 0) {
            summary += `${warehouseItemsSummary.join("\n")}\n\n`;
        }
        if (pranutTotal > 0) {
            summary += `${pranutTotal} יח' פרנה מיני\n\n`;
        }
        const orderNumber = document.getElementById("orderNumber").value;
        summary += `(הזמנה מס' *${orderNumber}*)`;

        navigator.clipboard
            .writeText(summary.trim())
            .then(() => showCopyNotification("סיכום מחסן הועתק בהצלחה!"))
            .catch(() => showCopyNotification("שגיאה בהעתקת סיכום מחסן.", true));
    }
}




      // פונקציה לפתיחת מודל וואטסאפ עבור מחסן
      function openWhatsAppWarehouseModal() {
        const modal = document.getElementById("whatsappWarehouseModal");
        const waEditable = document.getElementById("waEditableWarehouse");

        if (!modal || !waEditable) {
          console.error("Modal elements not found!");
          return;
        }

        const warehouseList = document.getElementById("warehouseList");
        const orderDate = new Date(document.getElementById("orderDate").value);
        const days = ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"];
        const dayName = days[orderDate.getDay()];
        const orderTime = document.getElementById("orderTime").value;

        // התחלת הסיכום
        let summary = `*ליום ${dayName} עד השעה: ${orderTime}*\nמארי\n\n`;

        // סיכום של כל הכמויות
        let pranutTotal = 0;
        let warehouseItemsSummary = [];

        // מקבל את כל הפריטים ברשימת המחסן
        const warehouseItems = Array.from(warehouseList.children);

        // חישוב הכמויות מהמחסן
        warehouseItems.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          const itemText = item.querySelector("span").textContent;
          if (productCodeElement) {
            warehouseItemsSummary.push(
              itemText.replace(/\(מק"ט: \d+\)/g, "").trim()
            );
          }
        });

        // חישוב כמות הפרנות ממגש ניגוב למתקדמים
        const kitchenList = document.getElementById("kitchenList");
        const kitchenItems = Array.from(kitchenList.children);
        kitchenItems.forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "12602") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*מגש/);
              if (match) {
                const trays = parseInt(match[1]);
                pranutTotal += trays * 6; // כל מגש = 6 פרנות
              }
            }
          }
        });

        // בדיקה אם יש מוצרים במחסן או פרנות
        if (warehouseItemsSummary.length === 0 && pranutTotal === 0) {
          showNotification("אין מוצרים במחסן.", "red");
          return;
        }

        // הוספת פרטי המוצרים מהמחסן לסיכום
        if (warehouseItemsSummary.length > 0) {
          summary += `${warehouseItemsSummary.join("\n")}\n\n`;
        }

        // הוספת סיכום הפרנות אם יש
        if (pranutTotal > 0) {
          summary += `${pranutTotal} יח' פרנה מיני\n\n`;
        }

        // הוספת מספר ההזמנה לסיכום
        const orderNumber = document.getElementById("orderNumber").value;
        summary += `(הזמנה מס' *${orderNumber}*)`;

        // המרה ל-HTML והצגה במודל
        const htmlSummary = summary
          .replace(/\*([^*]+)\*/g, "<b>$1</b>")
          .replace(/\n/g, "<br>");

        waEditable.innerHTML = htmlSummary;
        modal.style.display = "block";
        waEditable.focus();

        // שמירת המידע על הסיכום הנוכחי
        window.currentWhatsAppSummary = {
          type: "warehouse",
          text: summary,
          orderNumber: orderNumber,
        };
      }

      function copySushiSummary() {
    const waEditable = document.getElementById('waEditableSushi');
    const modal = document.getElementById('whatsappSushiModal');
    // אם המודל פתוח (כלומר, המשתמש עורך ידנית)
    if (modal && waEditable && modal.style.display !== "none") {
        let message = waEditable.innerHTML
            .replace(/<br><br>/g, '\n\n')
            .replace(/<div>/g, '\n')
            .replace(/<br>/g, '\n')
            .replace(/<b>(.*?)<\/b>/g, '*$1*')
            .replace(/<[^>]+>/g, '')
            .replace(/\n{3,}/g, '\n\n')
            .trim();
        if (!message) {
            showNotification('אין מה להעתיק', 'red');
            return;
        }
        navigator.clipboard.writeText(message)
            .then(() => showCopyNotification("סיכום סושי הועתק בהצלחה!"))
            .catch(() => showCopyNotification("שגיאה בהעתקת סיכום סושי.", true));
    } else {
        // אם המודל לא פתוח – העתק סיכום אוטומטי (כמו היום)
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        // מקבל את כל פריטי הסושי
        const sushiItems = Array.from(
            document.getElementById("sushiList").children
        ).map((li) =>
            li.firstElementChild.textContent.replace(/\(מק"ט: \d+\)/g, "").trim()
        );

        if (sushiItems.length > 0) {
            const sushiSummary = `היי @אבי\n
אשמח לקבל

${sushiItems.map((item) => `● ${item}`).join("\n\n")}

שיגיע אליי *ביום ${orderDay}* עד השעה: *${orderTime}*

(הזמנה מס' *${orderNumber}*)`;

            navigator.clipboard
                .writeText(sushiSummary.trim())
                .then(() => showCopyNotification("סיכום סושי הועתק בהצלחה!"))
                .catch(() => showCopyNotification("שגיאה בהעתקת סיכום סושי.", true));
        } else {
            showNotification("אין פריטי סושי בהזמנה.", "red");
        }
    }
}
      // פונקציה לפתיחת מודל וואטסאפ עבור סושי
      function openWhatsAppSushiModal() {
        const modal = document.getElementById("whatsappSushiModal");
        const waEditable = document.getElementById("waEditableSushi");

        if (!modal || !waEditable) {
          console.error("Modal elements not found!");
          return;
        }

        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        // מקבל את כל פריטי הסושי
        const sushiItems = Array.from(
          document.getElementById("sushiList").children
        ).map((li) =>
          li.firstElementChild.textContent.replace(/\(מק"ט: \d+\)/g, "").trim()
        );

        if (sushiItems.length > 0) {
          const sushiSummary = `היי @אבי\n
${sushiItems.map((item) => `● ${item}`).join("\n\n")}

שיגיע אליי *ביום ${orderDay}* עד השעה: *${orderTime}*

(הזמנה מס' *${orderNumber}*)`;

          // המרה ל-HTML והצגה במודל
          const htmlSummary = sushiSummary
            .replace(/\*([^*]+)\*/g, "<b>$1</b>")
            .replace(/\n/g, "<br>");

          waEditable.innerHTML = htmlSummary;
          modal.style.display = "block";
          waEditable.focus();

          // שמירת המידע על הסיכום הנוכחי
          window.currentWhatsAppSummary = {
            type: "sushi",
            text: sushiSummary,
            orderNumber: orderNumber,
          };
        } else {
          showNotification("אין פריטי סושי בהזמנה.", "red");
        }
      }

      function toggleQuantitySize() {
        const quantityDiv = document.getElementById("quantityDiv");
        const sizeDiv = document.getElementById("sizeDiv");
        const isQuantity = document.getElementById("quantityOption").checked;
        const isSize = document.getElementById("sizeOption").checked;
        const isNone = document.getElementById("noneOption").checked;

        if (isQuantity) {
          quantityDiv.style.display = "block";
          sizeDiv.style.display = "none";
        } else if (isSize) {
          quantityDiv.style.display = "none";
          sizeDiv.style.display = "block";
        } else {
          // isNone
          quantityDiv.style.display = "none";
          sizeDiv.style.display = "none";
        }
      }
      // פונקציה לפורמט התאריך DD/MM/YYYY
      function formatDateToDDMMYYYY(dateString) {
        const date = new Date(dateString);
        const day = String(date.getDate()).padStart(2, "0");
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const year = date.getFullYear();
        return `${day}/${month}/${year}`;
      }

      // רשימת המק"טים של הביסים
      const bisProducts = [
        "12628",
        "12617",
        "12627",
        "16331",
        "12618",
        "12616",
      ];

      // פונקציה לבדוק אם יש צורך להציג את תיבת סוג הלחם
      function checkBisProduct(productCode) {
        const breadTypeDiv = document.getElementById("breadTypeDiv");
        if (bisProducts.includes(productCode)) {
          breadTypeDiv.style.display = "block";
        } else {
          breadTypeDiv.style.display = "none";
        }
      }

      // הוספת מאזין אירועים לשדה המק"ט
      const productCodeInput = document.getElementById("productCode");

      // מאזין לאירוע input
      productCodeInput.addEventListener("input", function (e) {
        const code = e.target.value.trim(); // קבלת הקלט והסרת רווחים
        checkBisProduct(code); // בדיקת הצגת תיבת סוג הלחם
      });

      // מאזין לאירוע paste
      productCodeInput.addEventListener("paste", function (e) {
        setTimeout(() => {
          const code = e.target.value.trim(); // קבלת הקלט לאחר ההדבקה
          checkBisProduct(code); // בדיקת הצגת תיבת סוג הלחם
        }, 0); // שימוש ב-setTimeout כדי להמתין להדבקה
      });

      // הוספת מאזין אירועים לשדה המק"ט
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          checkBisProduct(e.target.value); // בדיקת הצגת תיבת סוג הלחם
        });

      // קריאה לפונקציית checkBisProduct בעת טעינת הדף
      document.addEventListener("DOMContentLoaded", function () {
        checkBisProduct(""); // בדוק אם יש צורך להציג את תיבת סוג הלחם עם ערך ריק
      });

      // הוספת מאזין אירועים לשדה המק"ט
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          checkBisProduct(e.target.value); // בדיקת הצגת תיבת סוג הלחם
        });

      // עדכון פונקציית copyProductCode מהחיפוש
      function copyProductCode() {
        const productCode = document.getElementById("productCode").value; // קבלת המק"ט מהתיבה
        navigator.clipboard
          .writeText(productCode)
          .then(() => {
            showNotification("המק''ט הועתק ללוח!", "green");
          })
          .catch((err) => {
            console.error("Failed to copy: ", err);
            showNotification("לא הצלחנו להעתיק ללוח", "red");
          });

        // לא מדביקים את המק"ט לתיבת הקלט
        // אין צורך לשנות את תיבת הקלט
      }

      // הוספת מאזין אירועים לשדה המק"ט
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          checkBisProduct(e.target.value); // בדיקת הצגת תיבת סוג הלחם
        });

      // עדכון פונקציית addProduct
      function addProduct() {
        if (!validateOrderDate()) {
          return;
        }
        const productCode = cleanInput(
          document.getElementById("productCode").value
        );
        const note = document.getElementById("productNote").value;

        // הוספת בדיקה אם המק"ט קיים או אם לא הוזן מק"ט
        if (!productCode || !window.unifiedProductData[productCode]) {
          showNotification("המק''ט לא נמצא במערכת", "red");
          return; // יציאה מהפונקציה
        }

        const isQuantity = document.getElementById("quantityOption").checked;
        const isSize = document.getElementById("sizeOption").checked;
        const breadType = document.getElementById("breadType").value;

        let finalNote = note;
        if (bisProducts.includes(productCode)) {
          finalNote =
            (breadType ? `|BREAD_TYPE:${breadType}|` : "") +
            (note ? ` ${note}` : "");
        }

        if (window.unifiedProductData[productCode]) {
          const product = window.unifiedProductData[productCode];
          const trayQuantity = document.getElementById("productQuantity").value;

          let productSummary;
          if (isQuantity) {
            const unitQuantity = document.getElementById("unitQuantity").value;
            const unitType = document.getElementById("unitType").value;
            productSummary = `${trayQuantity} ${
              product.name
            } (${unitQuantity} ${unitType}) ${
              finalNote ? ` ${finalNote}` : ""
            }`;
          } else if (isSize) {
            const productSize = document.getElementById("productSize").value;
            const sizeText = productSize === "medium" ? "בינוני" : "גדול";
            productSummary = `${trayQuantity} ${product.name} (${sizeText}) ${
              finalNote ? ` ${finalNote}` : ""
            }`;
          } else {
            productSummary = `${trayQuantity} ${product.name} ${
              finalNote ? ` ${finalNote}` : ""
            }`;
          }

          const rawSummary = productSummary; // עם BREAD_TYPE
          const displaySummary = productSummary.replace(
            /\|BREAD_TYPE:(ביס (שומשום|בריוש|קמח מלא|דגנים|פרג|שחור|אדום-סלק|בריוש מלבן))\|/g,
            " $1"
          );

          const listItem = document.createElement("li");
          listItem.innerHTML = `
            <span>${displaySummary}</span>
            <div class="item-actions">
                <span class="product-code">מק"ט: ${productCode}</span>
                <button type="button" class="edit-btn" onclick="openEditPopup(this, '${product.category}')" title="ערוך פריט">
                    <span class="material-icons">edit</span>
                </button>
                <button class="delete-btn" onclick="removeProduct(this, '${product.category}')">מחק</button>
            </div>
        `;
          // שמור את הטקסט הגולמי ב־data-attribute
          listItem.setAttribute("data-raw-summary", rawSummary);
          const listId = `${product.category}List`;
          document.getElementById(listId).appendChild(listItem);

          showNotification("נוסף בהצלחה להזמנה!", "blue");
          saveOrderDetails();
          resetFields();

          // הוספת קריאה לבדוק אם יש צורך להציג את תיבת סוג הלחם
          checkBisProduct(productCode); // בדיקת הצגת תיבת סוג הלחם
        } else {
          showNotification("אין מס מקט כזה במערכת.", "red");
        }

        saveOrderDetails();
        resetFields();
        setTimeout(() => {
          notification.style.display = "none";
        }, 3000);
      }

      // פונקציה חדשה להסרת מוצר

      function removeProduct(button, category) {
        // מוצאים את אלמנט ה-li הקרוב ביותר לכפתור המחיקה
        const listItem = button.closest("li");
        if (listItem) {
          document.getElementById(`${category}List`).removeChild(listItem);
          saveOrderDetails();
        }
      }

      // איפוס שדות לאחר הוספת מוצר
      function resetFields() {
        document.getElementById("productCode").value = "";
        document.getElementById("productQuantity").value = "1";
        document.getElementById("productNote").value = "";
        document.getElementById("breadTypeDiv").style.display = "none";

        document.getElementById("searchInput").value = "";
        document.getElementById("searchResults").innerHTML = "";


        // איפוס ובחירת אפשרות הכמות
        document.getElementById("quantityOption").checked = true;
        document.getElementById("sizeOption").checked = false;
        document.getElementById("noneOption").checked = false;
        // הצגת שדה הכמות והסתרת שדה הגודל
        document.getElementById("quantityDiv").style.display = "block";
        document.getElementById("sizeDiv").style.display = "none";
        toggleQuantitySize();

        const existingList = document.getElementById("quantityOptionsList");
        const existingButton = document.querySelector(".quantity-toggle-btn");
        const quantityInput = document.getElementById("unitQuantity");

        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        resetInputStyles();
        updateSelectedRadio();
        // איפוס ערכי הכמות
        document.getElementById("unitQuantity").value = "20";
        document.getElementById("unitType").value = "יחי'";

        // איפוס ערך הגודל
        document.getElementById("productSize").value = "medium";
      }

      // איפוס שדות קלט
      function resetInputFields() {
        document.getElementById("orderNumber").value = "";
        document.getElementById("notesSummary").value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("searchInput").value = "";
        document.getElementById("searchResults").innerHTML = "";
        document.getElementById("orderDate").value = "";
        document.getElementById("orderTime").value = "";
        document.getElementById("productCode").value = "";
        document.getElementById("productQuantity").value = 1;
        document.getElementById("unitQuantity").value = 20;
        document.getElementById("productSize").selectedIndex = 0;
        document.getElementById("unitType").value = "יחי'";
        const existingList = document.getElementById("quantityOptionsList");
        const existingButton = document.querySelector(".quantity-toggle-btn");
        const quantityInput = document.getElementById("unitQuantity");

        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        resetInputStyles();
        updateSelectedRadio();
      }

      // העתקת סיכום ההזמנה ל-WA
      function copySummary() {
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderTime = localStorage.getItem("orderTime") || "";
        const temperature = localStorage.getItem("temperature") || "";
        const formattedDate = orderDate ? formatDateToDDMMYYYY(orderDate) : "";

        // בדוק אם יש מוצרים בסיכום ההזמנה
        const hasProducts = ["kitchen",  "kitchenProducts", "bakery", "online", "warehouse"].some(
          (category) => {
            return (
              document.getElementById(`${category}List`).children.length > 0
            );
          }
        );

        if (!hasProducts) {
          showNotification("אין מוצרים בסיכום ההזמנה.", "red"); // הודעת שגיאה
          return; // יציאה מהפונקציה אם אין מוצרים
        }

        let summary = `*הזמנה מס: ${orderNumber}*\n*תאריך: ${formattedDate}*\n*שעה: ${orderTime}*\n\n`;

        // רשימת הקטגוריות שיכללו בסיכום הכללי
        ["kitchen", "bakery",  "kitchenProducts", "online", "warehouse"].forEach((category) => {
          const categoryItems = Array.from(
            document.getElementById(`${category}List`).children
          )
            .map((li) => {
              let text = li.firstElementChild.textContent;
              text = text
                .replace(/\(מק"ט: \d+\)/g, "")
                .replace(
                  /\|BREAD_TYPE:(ביס (שומשום|בריוש|קמח מלא|דגנים|פרג|שחור|אדום-סלק|בריוש מלבן))\|/g,
                  " $1"
                )
                .trim();
              return text;
            })
            .filter((text) => text.trim() !== "");

          if (categoryItems.length > 0) {
            const categoryTitle = getCategoryTitle(category);
            summary += `*${categoryTitle}:*\n${categoryItems.join("\n\n")}\n\n`;
          }
        });
        if (temperature) {
          summary += `*הערות:* *"${temperature}"*\n`;
        }

        navigator.clipboard
          .writeText(summary.trim())
          .then(() => {
            showCopyNotification("סיכום ההזמנה הועתק בהצלחה!");
          })
          .catch((err) => {
            console.error("שגיאה בהעתקה:", err);
            showCopyNotification("שגיאה בהעתקת הסיכום.", true);
          });
      }

      function showCopyNotification(message, isError = false) {
        const notification = document.getElementById("copy-notification");
        notification.textContent = message;
        notification.style.backgroundColor = isError ? "#f8d7da" : "#d4edda"; // שינוי צבע בהתאם לסוג ההודעה
        notification.style.display = "block";

        setTimeout(function () {
          notification.style.display = "none";
        }, 3000); // ההודעה תיעלם אחרי 3 שניות
      }

      function getCategoryTitle(category) {
  switch (category) {
    case "kitchen": return "מטבח";
    case "bakery": return "קונדיטוריה";
    case "kitchenProducts": return "מוצרי מטבח";
    case "online": return "אונליין";
    case "warehouse": return "מחסן";
    default: return category;
  }
}
      // החלפת תצוגת שדות על פי בחירה
      document
        .getElementById("quantityOption")
        .addEventListener("change", function () {
          document.getElementById("quantityDiv").style.display = "block";
          document.getElementById("sizeDiv").style.display = "none";
        });

      document
        .getElementById("sizeOption")
        .addEventListener("change", function () {
          document.getElementById("sizeDiv").style.display = "block";
          document.getElementById("quantityDiv").style.display = "none";
        });


      // עדכון פונקציית searchProduct
      function searchProduct() {
        const input = document
          .getElementById("searchInput")
          .value.trim().toLowerCase();
        const resultsList = document.getElementById("searchResults");
        
        if (!resultsList) {
          console.error("searchResults לא נמצא");
          return;
        }
        
        resultsList.innerHTML = "";

        if (input.length > 0) {
          // בדיקה אם המוצרים נטענו
          if (!window.unifiedProductData || Object.keys(window.unifiedProductData).length === 0) {
            resultsList.innerHTML = '<div style="text-align: center; padding: 10px; color: #666;">⏳ טוען מוצרים...</div>';
            
            // נסיון לטעון מוצרים אם productsLoader זמין
            if (window.productsLoader && typeof window.productsLoader.refreshData === 'function') {
              window.productsLoader.refreshData().then(() => {
                // ניסיון חיפוש חוזר אחרי טעינה
                setTimeout(() => searchProduct(), 500);
              }).catch(() => {
                resultsList.innerHTML = '<div style="text-align: center; padding: 10px; color: #666;">❌ שגיאה בטעינת מוצרים</div>';
              });
            }
            return;
          }

          // שימוש ב-unifiedProductData במקום products
          let filteredProducts = [];
          if (typeof window.unifiedProductData === 'object' && window.unifiedProductData) {
            filteredProducts = Object.entries(window.unifiedProductData).filter(
              ([code, product]) =>
                code.includes(input) ||
                (product.searchName && product.searchName.toLowerCase().includes(input)) ||
                (product.name && product.name.toLowerCase().includes(input))
            );
          }

          // אם אין תוצאות, ננסה דרך productsLoader (API)
          if (filteredProducts.length === 0 && window.productsLoader && typeof window.productsLoader.searchProduct === 'function') {
            const apiResults = window.productsLoader.searchProduct(input);
            if (Array.isArray(apiResults) && apiResults.length > 0) {
              filteredProducts = apiResults.map(r => [r.code, r]);
            }
          }

          // יצירת רשימת תוצאות
          filteredProducts.forEach(([code, product]) => {
            const li = document.createElement("li");
            const sizesInfo = product.sizes && product.sizes.length > 0
              ? product.sizes.map((sizeObj) => `${sizeObj.size} ${sizeObj.price} ש"ח`).join(" | ")
              : (product.price ? `${product.price} ש"ח` : "");
            // הצג searchName אם קיים, אחרת name
            const displayName = product.searchName || product.name || '';
            li.innerHTML = `${displayName} (מק"ט: ${code})${sizesInfo ? ' - ' + sizesInfo : ''}`;

            const copyButton = document.createElement("button");
            copyButton.textContent = 'העתק מס מק"ט';
            copyButton.onclick = (e) => {
              e.stopPropagation();
              copyToClipboard(code);
            };

            li.appendChild(copyButton);
            li.onclick = (e) => {
              // לא מנקים את תוצאות החיפוש כדי שהמשתמש יוכל להמשיך מיד
              addToOrder(code, product);
            };
            resultsList.appendChild(li);
          });

          // הוספת מונה תוצאות בתחילת הרשימה
          if (filteredProducts.length > 0) {
            const resultsCounter = document.createElement("div");
            resultsCounter.style.cssText = "font-size: 12px; color: #666; margin-bottom: 5px; text-align: center; padding: 3px; background-color: #f8f9fa; border-radius: 3px;";
            resultsCounter.textContent = `נמצאו ${filteredProducts.length} תוצאות`;
            resultsList.insertBefore(resultsCounter, resultsList.firstChild);
          } else {
            // אם אין תוצאות, הצג הודעה ברורה
            resultsList.innerHTML = '<div style="text-align: center; padding: 10px; color: #666;">❌ מוצר לא נמצא</div>';
          }
        }
      }

      // פונקציה להוספת מוצר לסיכום
      function addToOrder(code, product) {
        // רישום המקט בתיבת המקט הייעודית
        const productCodeInput = document.getElementById("productCode");

        if (productCodeInput) {
          productCodeInput.value = code;

          // הפעלת configureProduct ישירות
          if (typeof configureProduct === 'function') {
            configureProduct(code);
          }

          // הפעלת checkBisProduct
          if (typeof checkBisProduct === 'function') {
            checkBisProduct(code);
          }

          // הצגת הודעה למשתמש
          if (typeof showNotification === 'function') {
            showNotification(`המקט ${code} נרשם בתיבה!`, "green");
          }
        }

        // לא מנקה את שדה החיפוש ותוצאות החיפוש - נשארים פתוחים
        // document.getElementById("searchInput").value = "";
        // document.getElementById("searchResults").innerHTML = "";
      }
      function validateOrderDate() {
        const orderDate = document.getElementById("orderDate").value;
        if (!orderDate) {
          showNotification("אנא הכנס תאריך הזמנה!", "red");
          return false;
        }
        return true;
      }
      function showNotification(message, color) {
        const notification = document.getElementById("notification");
        notification.textContent = message;
        notification.style.color = color;
        notification.style.display = "block";

        setTimeout(() => {
          notification.style.display = "none";
        }, 3000); // ההודעה תיעלם אחרי 3 שניות
      }

      // פונקציה לניקוי תיבת החיפוש
      function clearSearch() {
        // ניקוי החיפוש הקיים
        const si = document.getElementById("searchInput");
        const sr = document.getElementById("searchResults");
        const pc = document.getElementById("productCode");
        if (si) si.value = "";
        if (sr) sr.innerHTML = "";
        if (pc) pc.value = "";

        // מנקה את האפשרויות הקיימות
        const existingList = document.getElementById("quantityOptionsList");
        const existingButton = document.querySelector(".quantity-toggle-btn");
        if (existingList) existingList.remove();
        if (existingButton) existingButton.remove();

        // קודם מסמן את כפתור "לפי כמות"
        const quantityRadio = document.getElementById("quantityOption");
        if (quantityRadio) {
          quantityRadio.checked = true;
          // מפעיל את אירוע השינוי
          quantityRadio.dispatchEvent(new Event("change"));

          // ממתין רגע קט לפני הגדרת הערכים
          setTimeout(() => {
            // מגדיר את ברירת המחדל ל-20 יחידות
            const quantityInput = document.getElementById("unitQuantity");
            const unitSelect = document.getElementById("unitType");
            if (quantityInput) {
              quantityInput.value = "20";
              quantityInput.dispatchEvent(new Event("change"));
            }
            if (unitSelect) {
              unitSelect.value = "יחי'";
              unitSelect.dispatchEvent(new Event("change"));
            }
          }, 100);
        }

        document.getElementById("breadTypeDiv").style.display = "none";
      }
      // הוספת מאזין אירועים לשדה המק"ט
      document
        .getElementById("productCode")
        .addEventListener("input", function (e) {
          if (timeoutId) {
            clearTimeout(timeoutId);
          }

          if (!e.target.value.trim()) {
            const existingList = document.getElementById("quantityOptionsList");
            const existingButton = document.querySelector(
              ".quantity-toggle-btn"
            );
            if (existingList) existingList.remove();
            if (existingButton) existingButton.remove();

            // קודם מסמן את כפתור "לפי כמות"
            const quantityRadio = document.getElementById("quantityOption");
            if (quantityRadio) {
              quantityRadio.checked = true;
              quantityRadio.dispatchEvent(new Event("change"));

              // ממתין רגע קט לפני הגדרת הערכים
              setTimeout(() => {
                const quantityInput = document.getElementById("unitQuantity");
                const unitSelect = document.getElementById("unitType");
                if (quantityInput) {
                  quantityInput.value = "20";
                  quantityInput.dispatchEvent(new Event("change"));
                }
                if (unitSelect) {
                  unitSelect.value = "יחי'";
                  unitSelect.dispatchEvent(new Event("change"));
                }
              }, 100);
            }

            document.getElementById("breadTypeDiv").style.display = "none";
            return;
          }

          timeoutId = setTimeout(() => {
            const code = e.target.value.trim();
            if (code) {
              console.log('נמצא מק"ט (הקלדה):', code);
              configureProduct(code);
            }
          }, 500);
        });

      // פונקציה לניקוי שדה החיפוש והצגת הודעה
      function copyToClipboard(code) {
        navigator.clipboard
          .writeText(code)
          .then(() => {
            showCopyMessage(); // הצגת הודעה

            document.getElementById("searchInput").value = "";
            document.getElementById("searchResults").innerHTML = "";
          })
          .catch((err) => {
            alert('שגיאה בהעתקת המק"ט ללוח');
          });
      }

      // עדכון פונקציית showCopyMessage
      function showCopyMessage() {
        const messageElement = document.getElementById("copyMessage");
        messageElement.style.display = "block";
        setTimeout(() => {
          messageElement.style.top = "50%";
          messageElement.style.opacity = "1";
        }, 10);

        setTimeout(() => {
          messageElement.style.top = "50";
          messageElement.style.opacity = "0";
          setTimeout(() => {
            messageElement.style.display = "none";
          }, 500);
        }, 2000);
      }

      // פונקציה לקבלת נתוני ההזמנה וליצור את הסיכום
      function generateOrderSummary() {
        const orderItems = getOrderItems(); // מניח שיש לך פונקציה שמה שמחזירה את פרטי המוצרים בהזמנה
        let orderSummary = "";

        // מוסיפים את כל פרטי המוצרים
        orderItems.forEach((item) => {
          orderSummary += `מוצר: ${item.name}, מק"ט: ${item.code}, כמות: ${item.quantity}\n`;
        });

        // הוספת הבחירה של חם או קר אם נבחר
        const temperature = document.getElementById("temperature").value;
        if (temperature) {
          orderSummary += `הערות: ${temperature}\n`;
        } else {
          orderSummary += `הערות: לא נבחר\n`;
        }

        // הצגת הסיכום בדף
        document.getElementById("order-summary").innerText = orderSummary;
      }

      // כפתור העתקה שמעתיק את הסיכום
      function copyOrderSummary() {
        const orderSummary = document.getElementById("order-summary").innerText;

        // יצירת אלמנט זמני להעתקת הטקסט
        const tempInput = document.createElement("input");
        tempInput.value = orderSummary;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);

        alert("הסיכום הועתק!");
      }

      // קוראים לפונקצייה בעת שינוי מצב החום/קור או שינוי פריט
      // document
      //   .getElementById("temperature")
      //   .addEventListener("change", generateOrderSummary);

      // אם יש כפתור העתקה
      // document
      //   .getElementById("copy-button")
      //   .addEventListener("click", copyOrderSummary);

      // פונקציה שמייצרת את סיכום ההזמנה כולל חם/קר
      function generateOrderSummary() {
        const orderItems = getOrderItems();
        let orderSummary = "";

        // הוספת פרטי המוצרים בהזמנה
        orderItems.forEach((item) => {
          orderSummary += `מוצר: ${item.name}, מק"ט: ${item.code}, כמות: ${item.quantity}\n`;
        });

        // הוספת הערה על מצב חם/קר
        const temperature = document.getElementById("temperature").value;
        if (temperature) {
          orderSummary += `הערות: ${temperature}\n`;
        } else {
          orderSummary += `הערות: לא נבחר\n`; // אם לא נבחר משהו, כתוב "לא נבחר"
        }

        // הצגת סיכום ההזמנה בדף
        document.getElementById("order-summary").innerText = orderSummary;
      }

      // כפתור להעתקת סיכום ההזמנה
      function copyOrderSummary() {
        const orderSummary = document.getElementById("order-summary").innerText;

        // יצירת אלמנט input זמני להעתקת הטקסט
        const tempInput = document.createElement("input");
        tempInput.value = orderSummary;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);

        alert("הסיכום הועתק!");
      }

      // פונקציה שמחזירה את המוצרים בהזמנה (יש לעדכן את הפונקציה הזו לפי איך שאתה שומר את פרטי ההזמנה)
      // function getOrderItems() {
        // כאן אתה יכול לשים את הדרך בה אתה אוסף את פרטי המוצרים
        // לדוגמה:
      //   return [
      //     { name: "מוצר 1", code: 'מק"ט123', quantity: 2 },
      //     { name: "מוצר 2", code: 'מק"ט124', quantity: 1 },
      //   ];
      // }

      function resetInputStyles() {
        const radioContainers = document.querySelectorAll(".radio-container");
        radioContainers.forEach((container) => {
          container.classList.remove("selected"); // Remove selected class
        });
        document.getElementById("quantityOption").checked = true; // Reset to default
        updateSelectedRadio(); // Update the visual state
      }

      // הגדרת משתנים גלובליים
      var currentEditItem = null;
      var currentEditCategory = null;

      function openEditPopup(button, category) {
        try {
          currentEditItem = button.closest("li");
          if (!currentEditItem) {
            console.error("Could not find list item");
            return;
          }

          currentEditCategory = category;
          const itemSpan = currentEditItem.querySelector("span:first-child");
          if (!itemSpan) {
            console.error("Could not find item text span");
            return;
          }

          const itemText = itemSpan.textContent;
          const editTextArea = document.getElementById("editItemText");
          const overlay = document.getElementById("overlay");
          const popup = document.getElementById("editPopup");

          if (!editTextArea || !overlay || !popup) {
            console.error("Could not find required elements");
            return;
          }

          editTextArea.value = itemText;
          overlay.style.display = "block";
          popup.style.display = "block";

          // מיקוד אוטומטי בתיבת הטקסט
          editTextArea.focus();
        } catch (error) {
          console.error("Error in openEditPopup:", error);
          showNotification("שגיאה בפתיחת חלון העריכה", "red");
        }
      }

      function closeEditPopup() {
        document.getElementById("overlay").style.display = "none";
        document.getElementById("editPopup").style.display = "none";
        currentEditItem = null;
        currentEditCategory = null;
      }

      function saveEdit() {
        if (currentEditItem && currentEditCategory) {
          const newText = document.getElementById("editItemText").value;
          currentEditItem.querySelector("span").textContent = newText;

          // ניתוח חכם של breadType
          let rawSummary = newText;
          // בדוק אם יש ביסים בפורמט: מגש ביס ... (XX יחי') ביס YYY
          const bisMatch = newText.match(
            /מגש ביס.*?\((\d+) יחי'?\).*?(ביס [^\s]+)/
          );
          if (bisMatch) {
            const breadType = bisMatch[2];
            if (!/\|BREAD_TYPE:/.test(newText)) {
              rawSummary = newText + ` |BREAD_TYPE:${breadType}|`;
            }
          }
          currentEditItem.setAttribute("data-raw-summary", rawSummary);
          saveOrderDetails();
          refreshAmarSummary();
          closeEditPopup();
          showNotification("הפריט עודכן בהצלחה!", "green");
        }
      }

      // סגירת הפופאפ בלחיצה על האוברליי
      document
        .getElementById("overlay")
        .addEventListener("click", closeEditPopup);

      // הוספת מאזין לחיצה על Escape לסגירת הפופאפ
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape") {
          closeEditPopup();
        }
      });

      document.addEventListener("DOMContentLoaded", function () {
        // וידוא שכל האלמנטים קיימים
        const overlay = document.getElementById("overlay");
        const popup = document.getElementById("editPopup");
        const editTextArea = document.getElementById("editItemText");

        if (!overlay || !popup || !editTextArea) {
          console.error("חסרים אלמנטים חיוניים בדף");
          return;
        }

        // הוספת מאזיני אירועים
        overlay.addEventListener("click", closeEditPopup);

        document.addEventListener("keydown", function (event) {
          if (event.key === "Escape") {
            closeEditPopup();
          }
        });

        // בדיקה שהמוצרים נטענו כמו שצריך
        console.log("מוצרים נטענו:", Object.keys(window.unifiedProductData || {}).length);
        
        // וידוא שהמוצרים זמינים לחיפוש
        if (!window.unifiedProductData || Object.keys(window.unifiedProductData).length === 0) {
          console.warn("unifiedProductData לא נטען - נסיון לטעון מחדש");
          // נסיון לטעון מוצרים אם productsLoader זמין
          if (window.productsLoader && typeof window.productsLoader.refreshData === 'function') {
            window.productsLoader.refreshData().catch(err => {
              console.error("שגיאה בטעינת מוצרים:", err);
            });
          }
        }
      });

      // הוספת הפונקציה החדשה לפני copyWarehouseSummary
      function getWarehouseItems() {
        const warehouseList = document.getElementById("warehouseList");
        const kitchenList = document.getElementById("kitchenList");
        let items = [];
        let pranutTotal = 0;

        // הוספת פריטי מחסן רגילים
        Array.from(warehouseList.children).forEach((item) => {
          const itemText = item.querySelector("span").textContent;
          items.push(itemText.replace(/\(מק"ט: \d+\)/g, "").trim());
        });

        // חישוב כמות הפרנות ממגש ניגוב למתקדמים
        Array.from(kitchenList.children).forEach((item) => {
          const productCodeElement = item.querySelector(".product-code");
          if (productCodeElement) {
            const productCode =
              productCodeElement.textContent.match(/מק"ט: (\d+)/)?.[1];
            if (productCode === "12602") {
              const itemText = item.querySelector("span").textContent;
              const match = itemText.match(/(\d+)\s*מגש/);
              if (match) {
                const trays = parseInt(match[1]);
                pranutTotal += trays * 5; // כל מגש = 5 פרנות
              }
            }
          }
        });

        // הוספת פרנות לרשימה אם יש
        if (pranutTotal > 0) {
          items.push(`${pranutTotal} יח' פרנה מיני`);
        }

        return items;
      }

      // פונקציה להדבקה מלוח ההעתקה - מעודכנת לעבוד עם products-loader
      async function pasteFromClipboard() {
        try {
          const text = await navigator.clipboard.readText();
          const cleanCode = text.trim();

          if (text.startsWith('http://') || text.startsWith('https://')) {
            showNotification('לא ניתן להדביק URL, יש להדביק רק מק"ט', 'red');
            return;
          }
          if (!/^\d+$/.test(cleanCode)) {
            showNotification('מק"ט חייב להכיל רק מספרים', 'red');
            return;
          }

          const productCodeInput = document.getElementById("productCode");
          if (productCodeInput) {
            productCodeInput.value = cleanCode;
            // הפעלת אירוע input כדיproducts-loader יטפל בחיפוש
            productCodeInput.dispatchEvent(new Event('input', { bubbles: true }));
          }
          showNotification('הודבק בהצלחה!', 'green');
        } catch (err) {
          console.error('Failed to read clipboard:', err);
          showNotification('לא הצלחנו לגשת ללוח ההעתקה', 'red');
        }
      }

      function openWhatsAppFruitsModal() {
        const modal = document.getElementById("whatsappFruitsModal");
        const waEditable = document.getElementById("waEditableFruits");

        if (!modal || !waEditable) {
          console.error("Modal elements not found!");
          return;
        }

        // יצירת סיכום פירות בפורמט זהה ל-copyFruitSummary
        const orderNumber = localStorage.getItem("orderNumber") || "";
        const orderDate = localStorage.getItem("orderDate") || "";
        const orderDay = getDayOfWeek(orderDate);
        const orderTime = document.getElementById("orderTime").value;

        // קבלת כל הפריטים בפורמט מודגש
        const fruitItems = getFruitItems().map((item) => {
          const match = item.match(/(\d+)\s+מגש.*?\((.*?)\)/);
          if (match) {
            const [_, quantity, size] = match;
            return `${quantity} מגש פירות *${size}*`;
          }
          return item;
        });

        // הוספת סיכום עבור המקט החדש
        const totalFruitTrays = calculateTotalFruitTrays();
        if (totalFruitTrays > 0) {
          fruitItems.push(
            `${totalFruitTrays} מגש פירות העונה בכוסות *5 סוגים שונים סה''כ 15 כוסות במגש*`
          );
        }

        if (fruitItems.length > 0) {
          // בנה את הסיכום בפורמט וואטסאפ עם הדגשות
          let fruitSummary = `*ליום ${orderDay} עד השעה: ${orderTime}*\n\n${fruitItems.join(
            "\n"
          )}\n\n(הזמנה מס' *${orderNumber}*)`;
          // המרה ל-html: כל טקסט בין כוכביות יהפוך ל-<b>
          fruitSummary = fruitSummary.replace(/\*([^*]+)\*/g, "<b>$1</b>");
          waEditable.innerHTML = fruitSummary.trim().replace(/\n/g, "<br>");
          modal.style.display = "block";
          waEditable.focus();
        } else {
          showNotification("אין פריטי פירות בהזמנה.", "red");
        }
      }

      // ... existing code ...
      // חיפוש אוטומטי בתיבת המק"ט - מוסר כי products-loader מטפל בזה
      // (function () {
      //   let searchTimeout = null;
      //   const productCodeInput = document.getElementById("productCode");
      //   const searchResults = document.getElementById("searchResults");
      //   const searchInput = document.getElementById("searchInput");

      //   if (!productCodeInput || !searchResults || !searchInput) {
      //     console.warn("חלק מהשדות לא נמצאו לחיפוש אוטומטי");
      //     return;
      //   }

      //   // מאזין יחיד לכל אירועי הקלט
      //   productCodeInput.addEventListener("input", function (e) {
      //     // ביטול טיימר קודם אם קיים
      //     if (searchTimeout) {
      //       clearTimeout(searchTimeout);
      //     }

      //     const code = e.target.value.trim();

      //     // אם השדה ריק - ניקוי תוצאות
            // products-loader מטפל בכל החיפוש עכשיו
    </script>
  </body>
</html>